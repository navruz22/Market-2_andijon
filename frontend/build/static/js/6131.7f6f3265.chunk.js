"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6131],{2543:function(t,e,n){n.d(e,{Z:function(){return o}});n(2791);var a=n.p+"static/media/Excel.3a5a1731280185e0e4ae99ee0a4eebfc.svg",i=n(3168),r=n(184);var o=function(t){var e=t.onClick,n=(0,i.$)(["common"]).t;return(0,r.jsxs)("button",{className:"exportButton",onClick:e,children:[n("Eksport"),(0,r.jsx)("span",{className:"btn-icon bg-white-900 p-[8px]",children:(0,r.jsx)("img",{src:a,alt:"excel icon"})})]})}},5668:function(t,e,n){var a=(0,n(1608).ZP)("http://45.81.227.123/"),i=JSON.parse(localStorage.getItem("userData"));a.auth={token:i.token,market:i.market},e.Z=a},2432:function(t,e,n){n.r(e);var a=n(3433),i=n(1413),r=n(9439),o=n(2791),l=n(2543),u=n(5077),c=n(4339),s=n(2987),d=n(9434),f=n(4232),v=n(1295),g=n(6408),m=n(3160),S=n(6096),p=n(2230),h=n(3168),Z=n(763),D=n(7584),P=n(2106),y=n(5668),k=n(9732),x=n(6484),I=n(184);e.default=function(t){var e=t.id,n=(0,h.$)(["common"]).t,C=(0,d.I0)(),j=(0,d.v9)((function(t){return t.currency})).currencyType,b=(0,d.v9)((function(t){return t.login})),w=(b.user,b.market),O=(0,d.v9)((function(t){return t.sellings})),E=O.searchedSellings,U=O.getSellingsLoading,B=O.total,N=O.totalSearched,z=(0,d.v9)((function(t){return t.reports})).datas,_=(0,o.useState)(""),L=(0,r.Z)(_,2),T=L[0],J=L[1],M=(0,o.useState)(z),Q=(0,r.Z)(M,2),F=Q[0],V=Q[1],W=(0,o.useState)(z),q=(0,r.Z)(W,2),$=q[0],A=q[1],R=(0,o.useState)(B),X=(0,r.Z)(R,2),Y=X[0],G=X[1],H=(0,o.useState)(E),K=(0,r.Z)(H,2),tt=K[0],et=K[1],nt=(0,o.useState)("10"),at=(0,r.Z)(nt,2),it=at[0],rt=at[1],ot=(0,o.useState)(0),lt=(0,r.Z)(ot,2),ut=lt[0],ct=lt[1],st=(0,o.useState)({id:"",client:"",product:""}),dt=(0,r.Z)(st,2),ft=dt[0],vt=dt[1],gt=(0,o.useState)({filter:"",sort:"",count:0}),mt=(0,r.Z)(gt,2),St=mt[0],pt=mt[1],ht=(0,o.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),Zt=(0,r.Z)(ht,2),Dt=Zt[0],Pt=Zt[1],yt=(0,o.useState)(new Date),kt=(0,r.Z)(yt,2),xt=kt[0],It=kt[1],Ct=(0,o.useState)(null),jt=(0,r.Z)(Ct,2),bt=jt[0],wt=jt[1],Ot=(0,o.useState)(!1),Et=(0,r.Z)(Ot,2),Ut=Et[0],Bt=Et[1],Nt=(0,o.useState)(null),zt=(0,r.Z)(Nt,2),_t=zt[0],Lt=zt[1],Tt=(0,o.useState)([]),Jt=(0,r.Z)(Tt,2),Mt=Jt[0],Qt=Jt[1],Ft=(0,o.useState)(""),Vt=(0,r.Z)(Ft,2),Wt=Vt[0],qt=Vt[1],$t=function(t){if("Enter"===t.key){ct(0);var n={filialId:e,currentPage:ut,countPage:it,startDate:Dt.toISOString(),endDate:xt.toISOString(),search:ft};C((0,x.BP)(n))}},At=(0,o.useState)(""),Rt=(0,r.Z)(At,2),Xt=Rt[0],Yt=Rt[1],Gt=(0,o.useState)(null),Ht=(0,r.Z)(Gt,2),Kt=Ht[0],te=Ht[1];(0,o.useEffect)((function(){V(z),A(z)}),[z]),(0,o.useEffect)((function(){et(E)}),[E]),(0,o.useEffect)((function(){G(B)}),[B]),(0,o.useEffect)((function(){var t={type:"payments",currentPage:ut,countPage:it,startDate:Dt.toISOString(),endDate:xt.toISOString(),search:{id:"",client:""}};C((0,x.BP)(t))}),[ut,it,Dt,xt,C]),(0,o.useEffect)((function(){var t={startDate:Dt,endDate:xt,search:ft};C((0,m.W2)(t))}),[C,Dt,xt,ft]);(0,o.useEffect)((function(){var t=[],e=[{label:"Xammasi",value:""}];w&&y.Z.emit("getProductsOfCount",{market:w._id}),w&&y.Z.on("getProductsOfCount",(function(n){var i=n.id,r=n.products;i===w._id&&(e=[].concat((0,a.Z)(e),(0,a.Z)((0,Z.map)(r,(function(t){return{value:t._id,label:t.productdata.name}})))),Qt(e),t.push.apply(t,(0,a.Z)(r)),C((0,k.r5)(t)))})),w&&y.Z.on("error",(function(t){var e=t.id,n=t.message;e===w._id&&(0,P.Ug)(n,"error")}))}),[w,C]);return(0,I.jsxs)(g.E.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,I.jsx)(p.Z,{printedSelling:bt,currency:j,body:T,isOpen:Ut,toggleModal:function(){Bt(!Ut),wt(null);var t={filialId:e,currentPage:ut,countPage:it,startDate:Dt.toISOString(),endDate:xt.toISOString(),search:{id:"",client:"",product:null===Wt||void 0===Wt?void 0:Wt.label}};C((0,m.gq)(t))},approveFunction:function(t){C((0,m.ZF)((0,i.Z)((0,i.Z)({},t),{},{saleconnectorid:_t}))).then((function(){var t={filialId:e,currentPage:ut,countPage:it,startDate:Dt.toISOString(),endDate:xt.toISOString(),search:{id:"",client:""}};C((0,m.gq)(t))})),Bt(!1)},commentText:Xt,dailyid:Kt}),(0,I.jsxs)("div",{className:"pagination mainPadding",children:[(0,I.jsx)(l.Z,{onClick:function(){var t="Sotuvlar"-(new Date).toLocaleDateString(),e=["\u2116",n("ID"),n("Mijoz"),n("Jami UZS"),n("Jami USD"),n("Chegirma UZS"),n("Chegirma USD"),n("Qarz UZS"),n("Qarz USD")];if((null===F||void 0===F?void 0:F.length)>0){var a=(0,Z.map)(F,(function(t,e){var n,a,i,r,o,l;return{nth:e+1,id:(null===t||void 0===t?void 0:t.id)||"",client:(null===t||void 0===t||null===(n=t.client)||void 0===n?void 0:n.name)||(null===t||void 0===t||null===(a=t.packman)||void 0===a?void 0:a.name),alluzs:(null===t||void 0===t||null===(i=t.products[0])||void 0===i?void 0:i.totalpriceuzs)||"",allusd:(null===t||void 0===t||null===(r=t.products[0])||void 0===r?void 0:r.totalprice)||"",discount:t.discounts.length>0?t.discounts.map((function(t){return t})):0,discountusd:t.discounts.length>0?t.discounts.map((function(t){return t})):0,debd:(null===t||void 0===t||null===(o=t.products[0])||void 0===o?void 0:o.totalpriceuzs)-(null===t||void 0===t||null===(l=t.payments[0])||void 0===l?void 0:l.paymentuzs)-(null===t||void 0===t?void 0:t.discounts.length)>0?t.discounts.map((function(t){return t.discount})):0,debdusd:t.products[0].totalprice-t.payments[0].payment-t.discounts.length>0?t.discounts.map((function(t){return t.discount})):0}}));(0,D.rD)(a,t,e)}else(0,P.Ug)("Jadvalda ma'lumot mavjud emas !","warning")}}),(0,I.jsx)("p",{className:"flex items-center",children:n("Sotuvlar")}),(0!==Y||0!==N)&&(0,I.jsx)(u.Z,{countPage:Number(it),totalDatas:N||Y,currentPage:ut,setCurrentPage:ct})]}),(0,I.jsx)(s.Z,{filterBy:["total","startDate","endDate","id","clientName","product_name"],filterByTotal:function(t){var e=t.value;rt(e),ct(0)},startDate:Dt,setStartDate:Pt,endDate:xt,setEndDate:It,searchById:ft.id,searchByClientName:ft.client,filterByClientName:function(t){var e=t.target.value,n=e.toLowerCase().replace(/\s+/g," ").trim();if(vt((0,i.Z)((0,i.Z)({},ft),{},{client:e})),(tt.length>0||N>0)&&C((0,m.Vt)()),""===n)V(z),G(B);else{var a=(0,Z.filter)(z,(function(t){var e,a;return(null===t||void 0===t||null===(e=t.client)||void 0===e?void 0:e.name.toLowerCase().includes(n))||(null===t||void 0===t||null===(a=t.packman)||void 0===a?void 0:a.name.toLowerCase().includes(n))}));V(a),G(a.length)}},filterById:function(t){var e=t.target.value,n=e.replace(/\s+/g," ").trim();if(S.y.test(e)&&vt((0,i.Z)((0,i.Z)({},ft),{},{id:e})),(tt.length>0||N>0)&&C((0,m.Vt)()),""===n)V(z),G(B);else{var a=(0,Z.filter)(z,(function(t){return t.id.includes(n)}));V(a),G(a.length)}},filterByClientNameWhenPressEnter:$t,filterByIdWhenPressEnter:$t,filteredProducts:Mt,handleChangeSelectedProduct:function(t){qt(t);var n={filialId:e,currentPage:ut,countPage:it,startDate:Dt.toISOString(),endDate:xt.toISOString(),search:{id:"",client:"",product:t.label}};C((0,m.Vi)(n))},selectedProduct:Wt}),(0,I.jsx)("div",{className:"tableContainerPadding",children:U?(0,I.jsx)(f.Z,{}):0===F.length&&0===tt.length?(0,I.jsx)(v.Z,{text:"Ro'yxat mavjud emas..."}):(0,I.jsx)(c.Z,{data:tt.length>0?tt:F,currentPage:ut,currency:j,countPage:it,page:"payments_selling",headers:[{title:"\u2116"},{title:"Sana",filter:"createdAt"},{title:"ID",filter:"saleconnector.id"},{title:"Mijoz"},{title:"To'lov UZS"},{title:"To'lov USD"},{title:"Qarzdan to'lov USD"},{title:"Qarzdan to'lov UZS"},{title:""}],Print:function(t){J("checkSell"),wt(t),Bt(!0)},addPlus:function(t){J("addPlus"),Bt(!0),Lt(t)},Sort:function(t){if(t===St.filter)switch(St.count){case 1:pt({filter:t,sort:"1",count:2}),(0,D.ki)(F,V,t,1,$);break;case 2:pt({filter:t,sort:"",count:0}),(0,D.ki)(F,V,t,"",$);break;default:pt({filter:t,sort:"-1",count:1}),(0,D.ki)(F,V,t,-1,$)}else pt({filter:t,sort:"-1",count:1}),(0,D.ki)(F,V,t,-1,$)},sortItem:St,editComment:function(t,e){Yt(e),te(t._id),J("changeComment"),Bt(!0)}})})]},"content")}}}]);
//# sourceMappingURL=6131.7f6f3265.chunk.js.map