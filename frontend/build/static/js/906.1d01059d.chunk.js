"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[906],{5692:function(e,t,a){a.d(t,{Z:function(){return y}});var n=a(71),s=(a(2791),a(184)),l=function(e){var t=e.onClick,a=e.text,l=e.type,r=e.active,u={cash:(0,s.jsx)(n.OR0,{className:"paymentsstyle",size:"1.3125rem"}),card:(0,s.jsx)(n.RjO,{className:"paymentsstyle",size:"1.3125rem"}),transfer:(0,s.jsx)(n.g2P,{className:"paymentsstyle",size:"1.3125rem"}),mixed:(0,s.jsx)(n.qTT,{className:"paymentsstyle",size:"1.3125rem"})};return(0,s.jsxs)("button",{onClick:function(){return t(l)},className:"salestyle ".concat(r?"bg-primary-700 text-white-900":"bg-[#E9ECEB]"),children:[u[l],a]})},r=function(e){var t=e.onClick,a=e.text,l=e.onDoubleClick;return(0,s.jsxs)("button",{onClick:t,onDoubleClick:l,className:"paymentstyle grow",children:[(0,s.jsx)(n.Q84,{className:"paystyle",size:"1.3125rem"}),a]})},u=a(9434);a(1413);var i=function(e){var t=e.value,a=e.onChange;return e.option,e.onSelect,(0,u.v9)((function(e){return e.currency})).currencyType,(0,s.jsx)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:(0,s.jsx)("input",{className:"w-full placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:"misol: 100 000 000",type:"number",value:t,onChange:function(e){a(e.target.value)},onWheel:function(e){return e.target.blur()},min:0})})},c=function(e){var t=e.value,a=e.onChange,n=e.option,l=e.onSelect,r=e.type,u=e.label;return(0,s.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,s.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[u,":"]}),(0,s.jsx)(i,{onChange:function(e){return a(e,r)},onSelect:l,value:t,option:n})]})},o=a(4952),m=function(e){var t=e.onClick;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{onClick:t,className:"exitbtn",children:(0,s.jsx)(n.Lp2,{size:"0.75rem"})})})};var d=function(e){var t=e.mix,a=e.value,n=e.onChange,l=e.label,r=e.onClose,u=e.keyInput,i=e.placeholder,c=e.type;return(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[l," :"]}),(0,s.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,s.jsx)(o.Z,{placeholder:i||"misol: 100 000 000",type:c||"number",value:a,onChange:function(e){n(e.target.value,u)}}),t&&(0,s.jsx)(m,{onClick:function(){return r(u)}})]})]})},h=a(8825),b=a(7689),x=a(2932),p=a(7584);var y=function(e){var t=e.returned,a=e.active,i=e.togglePaymentModal,o=e.type,m=void 0===o?"cash":o,y=e.cash,f=void 0===y?"":y,N=e.card,v=void 0===N?"":N,j=e.transfer,g=void 0===j?"":j,S=e.discount,C=e.discountUzs,k=e.hasDiscount,D=e.debt,Z=e.allPayment,w=e.allPaymentUzs,z=e.paid,U=void 0===z?0:z,P=e.client,M=void 0===P?"":P,T=e.onChange,I=e.onClose,q=e.changePaymentType,O=e.discountSelectOption,H=(e.handleClickDiscountBtn,e.handleChangeDiscountSelectOption),X=e.handleChangeDiscount,B=(e.exchangerate,e.handleClickPay),Q=e.allMainPayment,E=e.saleComment,F=e.changeComment,L=e.onDoubleClick,J=e.paymentUsd,R=void 0===J?"":J,Y=e.debtuzs,_=e.debtType,A=e.setDebtType,K=(0,b.TH)(),W=function(){switch(m){case"card":return(0,s.jsx)(d,{value:v,keyInput:m,onChange:T,onClose:I,label:(0,h.t)("Plastik")},"sale-card1");case"transfer":return(0,s.jsx)(d,{value:g,keyInput:m,onChange:T,onClose:I,label:(0,h.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,h.t)("USD"),key:"usd",value:R},{label:(0,h.t)("Naqd"),key:"cash",value:f},{label:(0,h.t)("Plastik"),key:"card",value:v},{label:(0,h.t)("O`tkazma"),key:"transfer",value:g}].map((function(e){return(0,s.jsx)(d,{value:e.value,keyInput:e.key,onChange:T,onClose:I,label:(0,h.t)(e.label)},"sale-".concat(e.key))}));default:return K.pathname.includes("/kassa/debts")?"sum"===_?(0,s.jsx)(d,{value:f,onChange:T,keyInput:m,onClose:I,label:(0,h.t)("Naqd")},"sale-cash"):(0,s.jsx)(d,{value:R,onChange:T,keyInput:"usd",onClose:I,label:(0,h.t)("USD")},"sale-usd"):(0,s.jsxs)(s.Fragment,{children:["mixed"!==m&&(0,s.jsx)(d,{value:R,onChange:T,keyInput:"usd",onClose:I,label:(0,h.t)("USD")},"sale-usd"),(0,s.jsx)(d,{value:f,onChange:T,keyInput:m,onClose:I,label:(0,h.t)("Naqd")},"sale-cash")]})}},G=(0,u.v9)((function(e){return e.currency})),V=G.currencyType;return G.currency,(0,s.jsxs)("section",{className:"absolute transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 ".concat(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:i,children:[(0,s.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,h.t)("Oynani yopish uchun bu yerga bosing !")}),(0,s.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 ".concat(a?"translate-x-0":"translate-x-full"),onClick:function(e){return e.stopPropagation()},autoFocus:!0,children:[(0,s.jsxs)("div",{className:"top-payment w-full",children:[M&&(0,s.jsxs)("div",{className:"customer-head-icon",children:[(0,s.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,s.jsx)(n.J4e,{className:"mr-[0.75rem]"}),(0,s.jsxs)("span",{children:[(0,h.t)("Mijoz")," : "]})]}),(0,s.jsx)("h3",{className:"text-[0.875rem]",children:M})]}),(0,s.jsx)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:K.pathname.includes("/kassa/debts")?"dollar"===_?Z+" USD":w+" UZS":Number(Q)+" UZS"}),(0,s.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&W(),(K.pathname.includes("/kassa/debts")||K.pathname.includes("/qarzdorlar")||K.pathname.includes("/maxsulotlar/qabul/qabulqilish")||K.pathname.includes("/maxsulotlar/qabul/qabullar"))&&W(),(0,s.jsx)(d,{value:E,keyInput:m,onChange:F,onClose:I,label:(0,h.t)("Izoh"),placeholder:(0,h.t)("misol: qarzga olindi"),type:"text"},"sale-card"),k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{value:S,onChange:X,option:O,onSelect:H,label:"Chegirma USD",type:"usd"}),(0,s.jsx)(c,{value:C,onChange:X,option:O,onSelect:H,label:"Chegirma UZS",type:"uzs"})]}),K.pathname.includes("/kassa/debts")?"sum"===_?(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[(0,h.t)("Qarzlar")," :"," "]}),(0,s.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[Y," UZS"]})]}):(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[(0,h.t)("Qarzlar")," :"," "]}),(0,s.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[(0,p.Y2)(D)," USD ",(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})]}):(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[(0,h.t)("Qarzlar")," :"," "]}),(0,s.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[Math.round(1e3*D)/1e3," USD ",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),Y," UZS"]})]}),K.pathname.includes("/kassa/debts")&&(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[(0,h.t)("Qarz")," :"," "]}),(0,s.jsxs)("h3",{className:"text-error-500 text-[1rem] flex items-center gap-2",children:[(0,s.jsx)(x.Z,{id:"debt",onChange:function(){return A("dollar")},value:"dollar"===_,label:(0,h.t)("USD")}),(0,s.jsx)(x.Z,{id:"debt2",onChange:function(){return A("sum")},value:"sum"===_,label:(0,h.t)("UZS")})]})]}),(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[Z<0?(0,h.t)("Qaytarilayotgan"):(0,h.t)("To`lanayotgan")," ",":"," "]}),(0,s.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[U.toLocaleString("ru-Ru")," ",V]})]})]})]}),(0,s.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,s.jsxs)("div",{className:"custom-paymet-btn",children:[(0,s.jsx)(l,{text:(0,h.t)("Naqd"),type:"cash",active:"cash"===m,onClick:q}),(0,s.jsx)(l,{text:(0,h.t)("Plastik"),type:"card",active:"card"===m,onClick:q}),(0,s.jsx)(l,{text:(0,h.t)("O'tkazma"),type:"transfer",active:"transfer"===m,onClick:q}),!t&&(0,s.jsx)(l,{text:(0,h.t)("Aralash"),type:"mixed",active:"mixed"===m,onClick:q})]}),(0,s.jsx)(r,{text:(0,h.t)("To'lash"),onClick:B,onDoubleClick:L})]})]})]})}},9878:function(e,t,a){a.r(t);var n=a(3433),s=a(9439),l=a(2791),r=a(9434),u=a(7584),i=a(2230),c=a(5692),o=a(2987),m=a(9078),d=a(2106),h=a(6484),b=a(763),x=a(184);t.default=function(){var e=(0,r.I0)(),t=(0,r.v9)((function(e){return e.reports})).datas,a=(0,r.v9)((function(e){return e.currency})),p=a.currencyType,y=a.currency,f=(0,r.v9)((function(e){return e.login})).user,N=(0,l.useState)([]),v=(0,s.Z)(N,2),j=v[0],g=v[1],S=(0,l.useState)([]),C=(0,s.Z)(S,2),k=C[0],D=C[1],Z=(0,l.useState)(!1),w=(0,s.Z)(Z,2),z=w[0],U=w[1],P=(0,l.useState)(!1),M=(0,s.Z)(P,2),T=M[0],I=M[1],q=(0,l.useState)("cash"),O=(0,s.Z)(q,2),H=O[0],X=O[1],B=(0,l.useState)(""),Q=(0,s.Z)(B,2),E=Q[0],F=Q[1],L=(0,l.useState)(""),J=(0,s.Z)(L,2),R=J[0],Y=J[1],_=(0,l.useState)(""),A=(0,s.Z)(_,2),K=A[0],W=A[1],G=(0,l.useState)(""),V=(0,s.Z)(G,2),$=V[0],ee=V[1],te=(0,l.useState)(""),ae=(0,s.Z)(te,2),ne=ae[0],se=ae[1],le=(0,l.useState)(""),re=(0,s.Z)(le,2),ue=re[0],ie=re[1],ce=(0,l.useState)(""),oe=(0,s.Z)(ce,2),me=oe[0],de=oe[1],he=(0,l.useState)(""),be=(0,s.Z)(he,2),xe=be[0],pe=be[1],ye=(0,l.useState)(""),fe=(0,s.Z)(ye,2),Ne=fe[0],ve=fe[1],je=(0,l.useState)(!1),ge=(0,s.Z)(je,2),Se=ge[0],Ce=ge[1],ke=(0,l.useState)(null),De=(0,s.Z)(ke,2),Ze=De[0],we=De[1],ze=(0,l.useState)(""),Ue=(0,s.Z)(ze,2),Pe=Ue[0],Me=Ue[1],Te=(0,l.useState)({label:"%",value:"%"}),Ie=(0,s.Z)(Te,2),qe=Ie[0],Oe=Ie[1],He=(0,l.useState)(0),Xe=(0,s.Z)(He,2),Be=Xe[0],Qe=Xe[1],Ee=(0,l.useState)(0),Fe=(0,s.Z)(Ee,2),Le=Fe[0],Je=Fe[1],Re=(0,l.useState)(0),Ye=(0,s.Z)(Re,2),_e=Ye[0],Ae=Ye[1],Ke=(0,l.useState)(0),We=(0,s.Z)(Ke,2),Ge=We[0],Ve=We[1],$e=(0,l.useState)(0),et=(0,s.Z)($e,2),tt=et[0],at=et[1],nt=(0,l.useState)(0),st=(0,s.Z)(nt,2),lt=st[0],rt=st[1],ut=(0,l.useState)(""),it=(0,s.Z)(ut,2),ct=it[0],ot=it[1],mt=(0,l.useState)(null),dt=(0,s.Z)(mt,2),ht=dt[0],bt=dt[1],xt=(0,l.useState)(null),pt=(0,s.Z)(xt,2),yt=pt[0],ft=pt[1],Nt=function(e){I(e?!T:e),X("cash"),Ce(!1),de(""),pe(""),ve(""),Qe(0),Je(0),Oe({label:"%",value:"%"})},vt=function(e){return Math.round(1e3*e)/1e3},jt=function(e){return Math.round(e)},gt=function(){U(!1),setTimeout((function(){ot("")}),500)},St=(0,l.useState)(new Date((new Date).setMonth((new Date).getMonth()-3))),Ct=(0,s.Z)(St,2),kt=Ct[0],Dt=Ct[1],Zt=(0,l.useState)(new Date),wt=(0,s.Z)(Zt,2),zt=wt[0],Ut=wt[1];(0,l.useEffect)((function(){e((0,h.UO)({startDate:kt,endDate:zt}))}),[e,kt,zt]),(0,l.useEffect)((function(){D(t),g(t)}),[t]);return(0,x.jsxs)("div",{className:"relative overflow-auto h-full pt-[10px]",children:[(0,x.jsx)("div",{className:"flex items-center justify-between",children:(0,x.jsx)(o.Z,{filterBy:["startDate","endDate","id","clientName"],filterById:function(e){D((0,n.Z)((0,b.filter)((0,n.Z)(j),(function(t){return t.id.includes(e.target.value)}))))},filterByClientName:function(e){D((0,n.Z)((0,b.filter)((0,n.Z)(j),(function(t){return t.client&&t.client.name.toLowerCase().includes(e.target.value.toLowerCase())}))))},startDate:kt,endDate:zt,setStartDate:function(e){Dt(new Date(e.setHours(0,0,0)))},setEndDate:function(e){Ut(new Date(e.setHours(23,59,59)))}})}),(0,x.jsx)("div",{className:"tableContainerPadding",children:k.length>0&&(0,x.jsx)(m.Z,{page:"debts",headers:[{title:"\u2116"},{title:"Sana"},{title:"ID"},{title:"Mijoz"},{title:"Izoh"},{title:"Jami"},{title:"Qarz"},{title:""}],data:k,currency:p,Pay:function(e){var t=e.debt,a=e.debtuzs;Ae(t),Ve(a),F(t),Y(a),at(t),rt(a),we(e._id),I(!0)},Print:function(e){ot("allChecks"),ft(e),U(!0)}})}),(0,x.jsx)("div",{children:(0,x.jsx)(c.Z,{returned:!0,type:H,active:T,togglePaymentModal:Nt,changePaymentType:function(e){var t=_e-Number(me),a=Ge-Number(xe);if(H!==e)switch(X(e),e){case"cash":F(t),Y(a),W(""),ee(""),se(""),ie(""),at(t),rt(a),Qe(0),Je(0);break;case"card":W(t),ee(a),F(""),Y(""),se(""),ie(""),at(t),rt(a),Qe(0),Je(0);break;case"transfer":se(t),ie(a),F(""),Y(""),W(""),ee(""),at(t),rt(a),Qe(0),Je(0);break;default:F(""),Y(""),W(""),ee(""),se(""),ie(""),at(0),rt(0),Qe(_e-Number(me)),Je(Ge-Number(xe))}},onChange:function(e,t){!function(e,t){var a=_e-Number(me),n=Ge-Number(xe);if("USD"===p)if("cash"===t){var s=Number(e)+Number(K)+Number(ne),l=Number(R)+Number($)+Number(ue);s<=a?(F(e),Y((0,u.uX)(e,y)),Qe(vt(a-s)),Je((0,u.uX)(a-s,y)),at(s),rt(l)):(0,d.bH)()}else if("card"===t){var r=Number(e)+Number(E)+Number(ne),i=Number(R)+Number($)+Number(ue);r<=a?(W(e),ee((0,u.uX)(e,y)),Qe(vt(a-r)),Je((0,u.uX)(a-r,y)),at(r),rt(i)):(0,d.bH)()}else{var c=Number(e)+Number(E)+Number(K),o=Number(R)+Number($)+Number(ue);c<=a?(se(e),ie((0,u.uX)(e,y)),Qe(vt(a-c)),Je((0,u.uX)(a-c,y)),at(c),rt(o)):(0,d.bH)()}else if("cash"===t){var m=Number(e)+Number($)+Number(ue),h=Number(E)+Number(K)+Number(ne);m<=n?(Y(e),F((0,u.Nt)(e,y)),Qe((0,u.Nt)(n-m,y)),Je(jt(n-m)),at(h),rt(m)):(0,d.bH)()}else if("card"===t){var b=Number(e)+Number(R)+Number(ue);b<=n?(W((0,u.Nt)(e,y)),ee(e),Qe((0,u.Nt)(n-b,y)),Je(jt(n-b)),at((0,u.Nt)(b,y)),rt(b)):(0,d.bH)()}else{var x=Number(e)+Number(R)+Number($),f=Number(E)+Number(K)+Number(ne);x<=n?(se((0,u.Nt)(e,y)),ie(e),Qe((0,u.Nt)(n-x,y)),Je(jt(n-x)),at(f),rt(x)):(0,d.bH)()}}(e,t)},client:Pe,allPayment:"USD"===p?_e:Ge,card:"USD"===p?K:$,cash:"USD"===p?E:R,debt:"USD"===p?Be:Le,discount:"USD"===p?"USD"===qe.value?me:Ne:"UZS"===qe.value?xe:Ne,handleChangeDiscount:function(e){var t=Math.round(5*_e/100*10)/10,a=Math.round(5*Ge/100*10)/10;if("USD"===qe.value)e>t?(0,d.kH)("".concat(t," USD")):(de(e),pe((0,u.uX)(e,y)),ve(Math.round(_e*e/100*10)/10),Qe(_e-e),Je((0,u.uX)(_e-e,y)));else if("UZS"===qe.value)e>a?(0,d.kH)("".concat(a," UZS")):(pe(e),de((0,u.Nt)(e,y)),ve(Math.round(Ge*e/100*10)/10),Qe((0,u.Nt)(Ge-e,y)),Je(Ge-e));else if(e>5)(0,d.kH)("5%");else{var n=Math.round(_e*e/100*10)/10,s=Math.round(Ge*e/100*10)/10;ve(e),de(n),pe(s),Qe(vt(_e-n)),Je(jt(Ge-s)),at(_e-n),rt(Ge-s)}F(""),Y(""),W(""),ee(""),se(""),ie(""),at(0),rt(0)},hasDiscount:Se,transfer:"USD"===p?ne:ue,handleClickDiscountBtn:function(){Ce(!Se),"cash"===H?(F(_e),Y(Ge),at(_e),rt(Ge)):"card"===H?(W(_e),ee(Ge),at(_e),rt(Ge)):"transfer"===H?(se(_e),ie(Ge),at(_e),rt(Ge)):(F(""),Y(""),W(""),ee(""),se(""),ie(""),at(0),rt(0),Qe(_e),Je(Ge)),de(""),pe(""),ve("")},discountSelectOption:qe,handleChangeDiscountSelectOption:function(e){qe.value!==e.value&&(Oe(e),de(""),pe(""),ve(""),F(""),Y(""),W(""),ee(""),se(""),ie(""),Qe(_e),Je(Ge),at(0),rt(0))},paid:"USD"===p?tt:lt,handleClickPay:function(){ot("complete"),U(!0)}})}),(0,x.jsx)(i.Z,{body:ct,toggleModal:"sell"===ct?function(){ot(""),U(!z),setTimeout((function(){}),500)}:"complete"===ct?gt:function(){U(!z),ot(""),bt(null)},approveFunction:function(){gt();var t={payment:{totalprice:Number(_e),totalpriceuzs:Number(Ge),type:H,cash:Number(E),cashuzs:Number(R),card:Number(K),carduzs:Number($),transfer:Number(ne),transferuzs:Number(ue),discount:Number(me),discountuzs:Number(xe)},user:f._id,saleconnectorid:Ze};e((0,h.Yt)(t)).then((function(t){var a=t.payload,n=new Date((new Date).setMonth((new Date).getMonth()-3)),s=new Date;bt(a),e((0,h.UO)({startDate:n,endDate:s})),setTimeout((function(){var e;ot("checkPayment"),U(!0),F(""),Y(""),W(""),ee(""),se(""),ie(""),Qe(0),Je(0),at(0),rt(0),Me(""),we(null),Nt(e)}),500)}))},isOpen:z,payment:ht,headers:[{title:"\u2116"},{title:"Kodi"},{title:"Nomi"},{title:"Soni"},{title:"Narxi"},{title:"Jami",styles:"w-[10rem]"},{title:""}],printedSelling:yt,headerText:"complete"===ct&&"To'lovni amalga oshirishni tasdiqlaysizmi ?",title:"complete"===ct&&"To'lovni amalga oshirgach bu ma`lumotlarni o`zgaritirb bo`lmaydi !"})]})}}}]);
//# sourceMappingURL=906.1d01059d.chunk.js.map