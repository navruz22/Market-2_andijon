"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7458],{602:function(e,t,n){var a=n(71),r=n(184);t.Z=function(e){var t=e.id,n=e.title,i=e.code,c=e.products,l=e.activeCategory,u=e.onClick;return(0,r.jsxs)("div",{className:"category-card ".concat(l?"active-category":""),onClick:function(){return u(t)},children:[(0,r.jsx)("h1",{className:"text-black-700 text-base leading-[1.5625rem]",children:n||"Nomsiz kategoriya"}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-[0.3125rem] items-center",children:[(0,r.jsx)("p",{className:"footer-text",children:"Kodi :"}),(0,r.jsx)("span",{className:"block rounded-[3.125rem] bg-warning-500 py-[0.125rem] px-[0.625rem] text-xs leading-[0.875rem] text-white-900",children:i||0})]}),(0,r.jsxs)("div",{className:"flex gap-[0.3125rem] items-center",children:[(0,r.jsx)("p",{className:"footer-text",children:"Maxsulot turlari :"}),(0,r.jsx)("span",{className:"block rounded-[3.125rem] bg-success-400 py-[0.125rem] px-[0.625rem] text-xs leading-[0.875rem] text-white-900",children:c||0})]})]}),(0,r.jsx)("div",{className:"category-card-checkmark",children:(0,r.jsx)(a.jI1,{size:"1rem",className:"check-icon"})})]})}},5692:function(e,t,n){n.d(t,{Z:function(){return y}});var a=n(71),r=(n(2791),n(184)),i=function(e){var t=e.onClick,n=e.text,i=e.type,c=e.active,l={cash:(0,r.jsx)(a.OR0,{className:"paymentsstyle",size:"1.3125rem"}),card:(0,r.jsx)(a.RjO,{className:"paymentsstyle",size:"1.3125rem"}),transfer:(0,r.jsx)(a.g2P,{className:"paymentsstyle",size:"1.3125rem"}),mixed:(0,r.jsx)(a.qTT,{className:"paymentsstyle",size:"1.3125rem"})};return(0,r.jsxs)("button",{onClick:function(){return t(i)},className:"salestyle ".concat(c?"bg-primary-700 text-white-900":"bg-[#E9ECEB]"),children:[l[i],n]})},c=function(e){var t=e.onClick,n=e.text,i=e.onDoubleClick;return(0,r.jsxs)("button",{onClick:t,onDoubleClick:i,className:"paymentstyle grow",children:[(0,r.jsx)(a.Q84,{className:"paystyle",size:"1.3125rem"}),n]})},l=n(9434),u=n(7146),o=n(1413),s=n(1188),d=function(e){return(0,r.jsx)(s.c.DropdownIndicator,(0,o.Z)((0,o.Z)({},e),{},{children:(0,r.jsx)(a.lmx,{size:"0.625rem"})}))},m={control:function(e){return(0,o.Z)((0,o.Z)({},e),{},{borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}})},container:function(e){return(0,o.Z)((0,o.Z)({},e),{},{height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0})},option:function(e,t){var n=t.isFocused,a=t.isSelected;return(0,o.Z)((0,o.Z)({},e),{},{fontSize:".75rem",fontWeight:"400",color:a||n?"#ffffff":"#071F45",backgroundColor:a?"#0090A3":n?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"})},menu:function(e){return(0,o.Z)((0,o.Z)({},e),{},{overflow:"hidden"})},singleValue:function(e){return(0,o.Z)((0,o.Z)({},e),{},{fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"})},valueContainer:function(e){return(0,o.Z)((0,o.Z)({},e),{},{padding:0})},indicatorsContainer:function(e){return(0,o.Z)({},e)},dropdownIndicator:function(e){return(0,o.Z)((0,o.Z)({},e),{},{padding:0,color:"#ffffff"})}};var p=function(e){var t=e.value,n=e.onChange,a=e.option,i=e.onSelect,c=(0,l.v9)((function(e){return e.currency})).currencyType,o=[{value:c,label:c},{value:"%",label:"%"}];return(0,r.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,r.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:"misol: 100 000 000",type:"number",value:t,onChange:function(e){n(e.target.value)},onWheel:function(e){return e.target.blur()},min:0}),"/>",(0,r.jsx)(u.ZP,{onChange:i,styles:m,isSearchable:!1,value:a,options:o,components:{IndicatorSeparator:function(){return null},DropdownIndicator:d}})]})},f=function(e){var t=e.value,n=e.onChange,a=e.option,i=e.onSelect;return(0,r.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,r.jsx)("div",{className:"text-black-700 text-[0.875rem]",children:"Chegirma :"}),(0,r.jsx)(p,{onChange:n,onSelect:i,value:t,option:a})]})},b=n(4952),h=function(e){var t=e.onClick;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{onClick:t,className:"exitbtn",children:(0,r.jsx)(a.Lp2,{size:"0.75rem"})})})};var v=function(e){var t=e.mix,n=e.value,a=e.onChange,i=e.label,c=e.onClose,l=e.keyInput,u=e.placeholder,o=e.type;return(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[i," :"]}),(0,r.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,r.jsx)(b.Z,{placeholder:u||"misol: 100 000 000",type:o||"number",value:n,onChange:function(e){a(e.target.value,l)}}),t&&(0,r.jsx)(h,{onClick:function(){return c(l)}})]})]})},x=n(8825),g=n(7689),N=n(2932),Z=n(7584);var y=function(e){var t=e.returned,n=e.active,u=e.togglePaymentModal,o=e.type,s=void 0===o?"cash":o,d=e.cash,m=void 0===d?"":d,p=e.card,b=void 0===p?"":p,h=e.transfer,y=void 0===h?"":h,k=e.discount,j=e.hasDiscount,z=e.debt,S=e.allPayment,C=e.allPaymentUzs,w=e.paid,U=void 0===w?0:w,_=e.client,P=void 0===_?"":_,D=e.onChange,M=e.onClose,T=e.changePaymentType,X=e.discountSelectOption,F=(e.handleClickDiscountBtn,e.handleChangeDiscountSelectOption),q=e.handleChangeDiscount,I=(e.exchangerate,e.handleClickPay),H=e.saleComment,O=e.changeComment,R=e.onDoubleClick,E=e.paymentUsd,B=void 0===E?"":E,L=e.debtuzs,Q=e.debtType,Y=e.setDebtType,V=(0,g.TH)(),J=function(){switch(s){case"card":return(0,r.jsx)(v,{value:b,keyInput:s,onChange:D,onClose:M,label:(0,x.t)("Plastik")},"sale-card1");case"transfer":return(0,r.jsx)(v,{value:y,keyInput:s,onChange:D,onClose:M,label:(0,x.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,x.t)("Naqd"),key:"cash",value:m},{label:(0,x.t)("Plastik"),key:"card",value:b},{label:(0,x.t)("O`tkazma"),key:"transfer",value:y}].map((function(e){return(0,r.jsx)(v,{value:e.value,keyInput:e.key,onChange:D,onClose:M,label:(0,x.t)(e.label)},"sale-".concat(e.key))}));default:return V.pathname.includes("/kassa/debts")?"sum"===Q?(0,r.jsx)(v,{value:m,onChange:D,keyInput:s,onClose:M,label:(0,x.t)("Naqd")},"sale-cash"):(0,r.jsx)(v,{value:B,onChange:D,keyInput:"usd",onClose:M,label:(0,x.t)("USD")},"sale-usd"):(0,r.jsxs)(r.Fragment,{children:["mixed"!==s&&(0,r.jsx)(v,{value:B,onChange:D,keyInput:"usd",onClose:M,label:(0,x.t)("USD")},"sale-usd"),(0,r.jsx)(v,{value:m,onChange:D,keyInput:s,onClose:M,label:(0,x.t)("Naqd")},"sale-cash")]})}},W=(0,l.v9)((function(e){return e.currency})).currencyType;return(0,r.jsxs)("section",{className:"absolute transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 ".concat(n?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:u,children:[(0,r.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,x.t)("Oynani yopish uchun bu yerga bosing !")}),(0,r.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 ".concat(n?"translate-x-0":"translate-x-full"),onClick:function(e){return e.stopPropagation()},autoFocus:!0,children:[(0,r.jsxs)("div",{className:"top-payment w-full",children:[P&&(0,r.jsxs)("div",{className:"customer-head-icon",children:[(0,r.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,r.jsx)(a.J4e,{className:"mr-[0.75rem]"}),(0,r.jsxs)("span",{children:[(0,x.t)("Mijoz")," : "]})]}),(0,r.jsx)("h3",{className:"text-[0.875rem]",children:P})]}),(0,r.jsx)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:V.pathname.includes("/kassa/debts")&&"dollar"===Q?S+" USD":C+" UZS"}),(0,r.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&J(),(V.pathname.includes("/kassa/debts")||V.pathname.includes("/qarzdorlar")||V.pathname.includes("/maxsulotlar/qabul/qabulqilish")||V.pathname.includes("/maxsulotlar/qabul/qabullar"))&&J(),(0,r.jsx)(v,{value:H,keyInput:s,onChange:O,onClose:M,label:(0,x.t)("Izoh"),placeholder:(0,x.t)("misol: qarzga olindi"),type:"text"},"sale-card"),j&&(0,r.jsx)(f,{value:k,onChange:q,option:X,onSelect:F}),V.pathname.includes("/kassa/debts")?"sum"===Q?(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,x.t)("Qarzlar")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[L," UZS"]})]}):(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,x.t)("Qarzlar")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[(0,Z.Y2)(z)," USD ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]})]}):(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,x.t)("Qarzlar")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[(0,Z.Y2)(z)," USD ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),L," UZS"]})]}),(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,x.t)("Qarz")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem] flex items-center gap-2",children:[(0,r.jsx)(N.Z,{id:"debt",onChange:function(){return Y("dollar")},value:"dollar"===Q,label:(0,x.t)("USD")}),(0,r.jsx)(N.Z,{id:"debt2",onChange:function(){return Y("sum")},value:"sum"===Q,label:(0,x.t)("UZS")})]})]}),(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[S<0?(0,x.t)("Qaytarilayotgan"):(0,x.t)("To`lanayotgan")," ",":"," "]}),(0,r.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[U.toLocaleString("ru-Ru")," ",W]})]})]})]}),(0,r.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,r.jsxs)("div",{className:"custom-paymet-btn",children:[(0,r.jsx)(i,{text:(0,x.t)("Naqd"),type:"cash",active:"cash"===s,onClick:T}),(0,r.jsx)(i,{text:(0,x.t)("Plastik"),type:"card",active:"card"===s,onClick:T}),(0,r.jsx)(i,{text:(0,x.t)("O'tkazma"),type:"transfer",active:"transfer"===s,onClick:T}),!t&&(0,r.jsx)(i,{text:(0,x.t)("Aralash"),type:"mixed",active:"mixed"===s,onClick:T})]}),(0,r.jsx)(c,{text:(0,x.t)("To'lash"),onClick:I,onDoubleClick:R})]})]})]})}},5668:function(e,t,n){var a=(0,n(1608).ZP)("http://45.81.227.123/"),r=JSON.parse(localStorage.getItem("userData"));a.auth={token:r.token,market:r.market},t.Z=a},3940:function(e,t,n){n.r(t);var a=n(4165),r=n(5861),i=n(1413),c=n(3433),l=n(9439),u=n(2791),o=n(2932),s=n(8063),d=n(9078),m=n(9434),p=n(71),f=n(602),b=n(1295),h=n(4232),v=n(9732),x=n(6113),g=n(7177),N=n(2594),Z=n(2230),y=n(7584),k=n(2106),j=n(5692),z=n(7689),S=n(7129),C=n(3168),w=n(763),U=n(5668),_=n(8862),P=n(7472),D=n(184);t.default=function(){var e=(0,C.$)(["common"]),t=e.t,n=(0,m.I0)(),M=(0,z.s0)(),T=(0,z.TH)(),X=(0,m.v9)((function(e){return e.login})),F=X.user,q=X.market,I=(0,m.v9)((function(e){return e.currency})),H=I.currencyType,O=I.currency,R=(0,m.v9)((function(e){return e.category})),E=R.allcategories,B=R.loading,L=(0,m.v9)((function(e){return e.registerSelling})),Q=L.allProducts,Y=L.clients,V=L.loadingMakePayment,J=L.lastPayments,W=(0,m.v9)((function(e){return e.clients})),A=W.packmans,K=(0,u.useState)([]),$=(0,l.Z)(K,2),G=$[0],ee=$[1],te=(0,u.useState)(""),ne=(0,l.Z)(te,2),ae=ne[0],re=ne[1],ie=(0,u.useState)(!1),ce=(0,l.Z)(ie,2),le=ce[0],ue=ce[1],oe=(0,u.useState)([]),se=(0,l.Z)(oe,2),de=se[0],me=se[1],pe=(0,u.useState)(E),fe=(0,l.Z)(pe,2),be=fe[0],he=fe[1],ve=(0,u.useState)(null),xe=(0,l.Z)(ve,2),ge=xe[0],Ne=xe[1],Ze=(0,u.useState)(""),ye=(0,l.Z)(Ze,2),ke=ye[0],je=ye[1],ze=(0,u.useState)([]),Se=(0,l.Z)(ze,2),Ce=Se[0],we=Se[1],Ue=(0,u.useState)(""),_e=(0,l.Z)(Ue,2),Pe=_e[0],De=_e[1],Me=(0,u.useState)([]),Te=(0,l.Z)(Me,2),Xe=Te[0],Fe=Te[1],qe=(0,u.useState)(""),Ie=(0,l.Z)(qe,2),He=Ie[0],Oe=Ie[1],Re=(0,u.useState)(""),Ee=(0,l.Z)(Re,2),Be=Ee[0],Le=Ee[1],Qe=(0,u.useState)(!1),Ye=(0,l.Z)(Qe,2),Ve=Ye[0],Je=Ye[1],We=(0,u.useState)(null),Ae=(0,l.Z)(We,2),Ke=Ae[0],$e=Ae[1],Ge=(0,u.useState)(!1),et=(0,l.Z)(Ge,2),tt=et[0],nt=et[1],at=(0,u.useState)("cash"),rt=(0,l.Z)(at,2),it=rt[0],ct=rt[1],lt=(0,u.useState)(""),ut=(0,l.Z)(lt,2),ot=ut[0],st=ut[1],dt=(0,u.useState)(""),mt=(0,l.Z)(dt,2),pt=mt[0],ft=mt[1],bt=(0,u.useState)(""),ht=(0,l.Z)(bt,2),vt=ht[0],xt=ht[1],gt=(0,u.useState)(""),Nt=(0,l.Z)(gt,2),Zt=Nt[0],yt=Nt[1],kt=(0,u.useState)(""),jt=(0,l.Z)(kt,2),zt=jt[0],St=jt[1],Ct=(0,u.useState)(""),wt=(0,l.Z)(Ct,2),Ut=wt[0],_t=wt[1],Pt=(0,u.useState)(""),Dt=(0,l.Z)(Pt,2),Mt=Dt[0],Tt=Dt[1],Xt=(0,u.useState)(""),Ft=(0,l.Z)(Xt,2),qt=Ft[0],It=Ft[1],Ht=(0,u.useState)(""),Ot=(0,l.Z)(Ht,2),Rt=Ot[0],Et=Ot[1],Bt=(0,u.useState)(""),Lt=(0,l.Z)(Bt,2),Qt=Lt[0],Yt=Lt[1],Vt=(0,u.useState)(!1),Jt=(0,l.Z)(Vt,2),Wt=Jt[0],At=Jt[1],Kt=(0,u.useState)({label:"%",value:"%"}),$t=(0,l.Z)(Kt,2),Gt=$t[0],en=$t[1],tn=(0,u.useState)(0),nn=(0,l.Z)(tn,2),an=nn[0],rn=nn[1],cn=(0,u.useState)(0),ln=(0,l.Z)(cn,2),un=ln[0],on=ln[1],sn=(0,u.useState)(0),dn=(0,l.Z)(sn,2),mn=dn[0],pn=dn[1],fn=(0,u.useState)(0),bn=(0,l.Z)(fn,2),hn=bn[0],vn=bn[1],xn=(0,u.useState)(0),gn=(0,l.Z)(xn,2),Nn=gn[0],Zn=gn[1],yn=(0,u.useState)(0),kn=(0,l.Z)(yn,2),jn=kn[0],zn=kn[1],Sn=(0,u.useState)(""),Cn=(0,l.Z)(Sn,2),wn=Cn[0],Un=Cn[1],_n=(0,u.useState)(null),Pn=(0,l.Z)(_n,2),Dn=Pn[0],Mn=Pn[1],Tn=(0,u.useState)(null),Xn=(0,l.Z)(Tn,2),Fn=Xn[0],qn=Xn[1],In=(0,u.useState)(null),Hn=(0,l.Z)(In,2),On=Hn[0],Rn=Hn[1],En=(0,u.useState)([]),Bn=(0,l.Z)(En,2),Ln=Bn[0],Qn=Bn[1],Yn=(0,u.useState)([]),Vn=(0,l.Z)(Yn,2),Jn=Vn[0],Wn=Vn[1],An=(0,u.useState)([]),Kn=(0,l.Z)(An,2),$n=Kn[0],Gn=Kn[1],ea=(0,u.useState)(0),ta=(0,l.Z)(ea,2),na=ta[0],aa=ta[1],ra=(0,u.useState)(0),ia=(0,l.Z)(ra,2),ca=ia[0],la=ia[1],ua=(0,u.useState)(0),oa=(0,l.Z)(ua,2),sa=oa[0],da=oa[1],ma=(0,u.useState)(0),pa=(0,l.Z)(ma,2),fa=pa[0],ba=pa[1],ha=(0,u.useState)(O),va=(0,l.Z)(ha,2),xa=va[0],ga=va[1],Na=(0,u.useState)(""),Za=(0,l.Z)(Na,2),ya=Za[0],ka=Za[1],ja=(0,u.useState)([]),za=(0,l.Z)(ja,2),Sa=za[0],Ca=za[1],wa=(0,u.useState)(!1),Ua=(0,l.Z)(wa,2),_a=Ua[0],Pa=Ua[1],Da=(0,u.useState)("sum"),Ma=(0,l.Z)(Da,2),Ta=Ma[0],Xa=Ma[1],Fa=(0,u.useState)({label:q.name,value:q._id}),qa=(0,l.Z)(Fa,2),Ia=qa[0],Ha=qa[1],Oa=null,Ra=[{title:"\u2116"},{title:t("Filial")},{title:t("Qoldiq")},{title:t("Nomi")},{title:t("Soni")},{title:t("Narxi")},{title:t("Jami"),styles:"w-[8rem]"},{title:""},{title:""}],Ea=[{title:"\u2116"},{title:t("Kodi")},{title:t("Nomi")},{title:t("Soni")},{title:t("Jami")},{title:t("Soni")},{title:t("Jami")}],Ba=function(e){nt(e?!tt:e),ct("cash"),At(!1),It(""),Et(""),Yt(""),rn(0),on(0),en({label:"%",value:"%"})},La=function(e){return Math.round(1e4*e)/1e4},Qa=function(e){return Math.round(e)},Ya=function(e,t){ga(Qa(e/t))},Va=function(e){st(""),ft(""),yt(""),St(""),_t(""),Tt(""),xt(""),rn(0),on(0),Zn(0),zn(0),me([]),Oe(""),De(""),we([{label:t("Tanlang"),value:""}].concat((0,c.Z)((0,w.map)((0,c.Z)(A),(function(e){return{value:e._id,label:e.name}}))))),Fe([{label:t("Barchasi"),value:""}].concat((0,c.Z)((0,w.map)((0,c.Z)(Y),(function(e){return{value:e._id,label:e.name,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null}}))))),Le(""),ue(!1),Ne(null),$e(null),je(""),Rn(null),Gn([]),Wn([]),Qn([]),da(0),ba(0),la(0),aa(0),Ba(e),Ha({label:q.name,value:q._id})},Ja=function(){Je(!1),setTimeout((function(){Un("")}),500)},Wa=function(){Ja();var e={saleproducts:(0,w.map)(de,(function(e){if(_a){var t=(0,i.Z)((0,i.Z)({},e),{},{pieces:Number(e.pieces)+Number(e.fromFilial),unitprice:e.tradeprice||e.unitprice,unitpriceuzs:e.tradepriceuzs||e.unitpriceuzs});return(null===t||void 0===t?void 0:t.tradeprice)&&(null===t||void 0===t||delete t.tradeprice),(null===t||void 0===t?void 0:t.tradepriceuzs)&&(null===t||void 0===t||delete t.tradepriceuzs),t}var n=(0,i.Z)((0,i.Z)({},e),{},{pieces:Number(e.pieces)+Number(e.fromFilial)});return(null===n||void 0===n?void 0:n.tradeprice)&&(null===n||void 0===n||delete n.tradeprice),(null===n||void 0===n?void 0:n.tradepriceuzs)&&(null===n||void 0===n||delete n.tradepriceuzs),n})),client:{_id:He?He.value:null,name:He?He.label:Be,packman:null===He||void 0===He?void 0:He.packman},packman:Pe?{_id:Pe.value,name:Pe.label}:null,discount:{discount:Number(qt),discountuzs:Number(Rt),procient:Number(Qt),isProcient:!!Qt},payment:{totalprice:Number(mn),totalpriceuzs:Number(hn),type:it,cash:Number(ot),cashuzs:Number(pt),card:Number(Zt),carduzs:Number(zt),transfer:Number(Ut),transferuzs:Number(Mt),discount:Number(qt),discountuzs:Number(Rt),usdpayment:Number(vt)},debt:{debt:Number(an),debtuzs:Number(un),debtType:Ta,comment:""},user:F._id,saleconnectorid:On,comment:ya};n(On?(0,v._w)(e):(0,v.DP)(e)).then((function(e){var t=e.payload;e.error||(Mn(t),Pa(!1),setTimeout((function(){Un("checkSell"),Je(!0),Va()}),500),Fn&&(n((0,x.kl)({_id:Fn._id})),qn(null)))}))},Aa=function(){Ja();var e={saleproducts:(0,w.filter)(Ln,(function(e){return Number(e.pieces)>0})),discounts:$n,payment:{totalprice:Number(mn),totalpriceuzs:Number(hn),type:it,cash:Number(mn<0?-1*ot:ot),cashuzs:Number(hn<0?-1*pt:pt),card:Number(mn<0?-1*Zt:Zt),carduzs:Number(mn<0?-1*zt:zt),transfer:Number(mn<0?-1*Ut:Ut),transferuzs:Number(mn<0?-1*Mt:Ut)},debt:{debt:Number(mn<0?-1*an:an),debtuzs:Number(mn<0?-1*un:un),comment:""},user:F._id,saleconnectorid:On,comment:ya};n((0,v.kv)(e)).then((function(e){var t=e.payload;e.error||(Mn(t),setTimeout((function(){Un("checkSellReturn"),Je(!0),Va()}),500))}))};console.log(de);var Ka=function(e,t){if(de.some((function(t,n){return n===e&&!t.packcount})))return(0,k.rX)();if(de.some((function(t,n){return n===e&&(null===t||void 0===t?void 0:t.packcount)>t.total})))return(0,k.rX)();console.log(t);var n=(0,w.map)(de,(function(t,n){return n===e?(0,i.Z)((0,i.Z)({},t),{},{totalpackcount:!(null!==t&&void 0!==t&&t.isPackcount)&&t.total/t.packcount/100*100,isPackcount:!(null!==t&&void 0!==t&&t.isPackcount),totalprice:null!==t&&void 0!==t&&t.isPackcount?t.unitprice:La((null===t||void 0===t?void 0:t.packcount)*(_a&&t.tradeprice||t.unitprice)),totalpriceuzs:null!==t&&void 0!==t&&t.isPackcount?t.unitpriceuzs:Qa((null===t||void 0===t?void 0:t.packcount)*(_a&&t.tradepriceuzs||t.unitpriceuzs)),packcountpieces:1,pieces:null!==t&&void 0!==t&&t.isPackcount?1:t.packcount}):t}));me(n)};console.log(de);var $a=function(e){ge===e?Ne(null):(Ne(e),je(""),he(E))},Ga=function(e){!e.barcode&&re(e);var t=e.barcode?Q.find((function(t){return t.productdata.barcode===e.barcode})):Q.find((function(t){return t._id===e.value})),n={total:t.total,product:{_id:t._id,code:t.productdata.code,name:t.productdata.name,barcode:t.productdata.barcode},totalprice:t.price.sellingprice,totalpriceuzs:t.price.sellingpriceuzs,tradeprice:t.price.tradeprice||0,tradepriceuzs:t.price.tradepriceuzs||0,pieces:1,isUsd:(null===t||void 0===t?void 0:t.isUsd)||!1,incomingprice:t.price.incomingprice,incomingpriceuzs:t.price.incomingpriceuzs,unitprice:t.price.sellingprice,unitpriceuzs:t.price.sellingpriceuzs,categorycode:t.category.code,filialProductsTotal:t.total,fromFilial:0,filial:q._id,packcount:null===t||void 0===t?void 0:t.packcount};"USD"===H&&n.incomingprice<=n.unitprice||"UZS"===H&&n.incomingpriceuzs<=n.unitpriceuzs?(me([].concat((0,c.Z)(de),[n])),re("")):(0,k.zX)()};console.log(de);var er=function(e,t){var n=_a?(0,w.map)(de,(function(n,a){return a===e?(0,i.Z)((0,i.Z)({},n),{},{tradeprice:"USD"===H?t:(0,y.Nt)(t,xa),tradepriceuzs:"UZS"===H?t:(0,y.uX)(t,xa),totalprice:"USD"===H?t*n.pieces:(0,y.Nt)(t*n.pieces,xa),totalpriceuzs:"UZS"===H?t*n.pieces:(0,y.uX)(t*n.pieces,xa)}):n})):(0,w.map)(de,(function(n,a){return a===e?(0,i.Z)((0,i.Z)({},n),{},{unitprice:"USD"===H?t:(0,y.Nt)(t,xa),unitpriceuzs:"UZS"===H?t:(0,y.uX)(t,xa),totalprice:"USD"===H?t*Number(n.pieces):(0,y.Nt)(t*Number(n.pieces),xa),totalpriceuzs:"UZS"===H?t*Number(n.pieces):(0,y.uX)(t*Number(n.pieces),xa)}):n}));me(n)},tr=function(e,t){var n=(0,w.map)(de,(function(n,a){return a===e?(0,i.Z)((0,i.Z)({},n),{},{pieces:null!==n&&void 0!==n&&n.isPackcount?Number(t)*(null===n||void 0===n?void 0:n.packcount):t,packcountpieces:null!==n&&void 0!==n&&n.isPackcount?Number(t):0,totalprice:La((null!==n&&void 0!==n&&n.isPackcount?Number(t)*(null===n||void 0===n?void 0:n.packcount):Number(t))*(_a&&n.tradeprice||n.unitprice)),totalpriceuzs:Qa((null!==n&&void 0!==n&&n.isPackcount?Number(t)*(null===n||void 0===n?void 0:n.packcount):Number(t))*(_a&&n.tradepriceuzs||n.unitpriceuzs))}):n}));me(n)},nr=function(e,t){var n=(0,w.map)(de,(function(n){return n.product._id===e?(0,i.Z)((0,i.Z)({},n),{},{fromFilial:Number(t),totalprice:La((Number(t)+Number(n.pieces))*(_a&&n.tradeprice||n.unitprice)),totalpriceuzs:Qa((Number(t)+Number(n.pieces))*(_a&&n.tradepriceuzs||n.unitpriceuzs))}):n}));me(n)},ar=function(e,t){rr(t).then((function(n){me((0,c.Z)(de).map((function(a){return a.product._id===e&&(a.filialProductsTotal=n.total,a.filial=t.filial,t.filial===q._id&&(a.fromFilial=0,a.totalprice=La(Number(a.pieces)*(_a&&a.tradeprice||a.unitprice)),a.totalpriceuzs=Qa(Number(a.pieces)*(_a&&a.tradepriceuzs||a.unitpriceuzs)))),a})))})).catch((function(e){return(0,k.Ug)(e,"error")}))},rr=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.Z.post("/filials/products/get",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){var e=[],t=[];q&&U.Z.emit("getProductsOfCount",{market:q._id}),q&&U.Z.on("categories",(function(e){var t=e.id,a=e.categories;t===q._id&&n((0,_.um)(a))})),q&&U.Z.on("getProductsOfCount",(function(a){var r=a.id,i=a.products;r===q._id&&(t=[].concat((0,c.Z)(t),(0,c.Z)((0,w.map)(i,(function(e){var t,n;return{value:e._id,label:"(".concat(e.total,") ").concat(e.category.code).concat(e.productdata.code," - ").concat(e.productdata.name," -------- (").concat(null!==e&&void 0!==e&&e.isUsd?(null===e||void 0===e||null===(t=e.price)||void 0===t?void 0:t.sellingprice).toLocaleString("ru-RU"):(null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.sellingpriceuzs).toLocaleString("ru-RU")," ").concat(null!==e&&void 0!==e&&e.isUsd?"USD":"UZS",")")}})))),ee(t),e.push.apply(e,(0,c.Z)(i)),n((0,v.r5)(e)))})),q&&U.Z.on("error",(function(e){var t=e.id,n=e.message;t===q._id&&(0,k.Ug)(n,"error")}))}),[q,n,J]),(0,u.useEffect)((function(){if(ge){var e=(0,w.filter)(Q,(function(e){return e.category._id===ge}));ee((0,w.map)(e,(function(e){return{value:e._id,label:"(".concat(e.total,") ").concat(e.category.code).concat(e.productdata.code," - ").concat(e.productdata.name)}})))}else ee((0,w.map)(Q,(function(e){return{value:e._id,label:"(".concat(e.total,") ").concat(e.category.code).concat(e.productdata.code," - ").concat(e.productdata.name)}})))}),[ge]),(0,u.useEffect)((function(){n((0,g.Im)()),n((0,v.ZL)()),n((0,v.LY)({marketData:q}))}),[n,q]),(0,u.useEffect)((function(){he(E)}),[E]),(0,u.useEffect)((function(){we([{label:t("Tanlang"),value:""}].concat((0,c.Z)((0,w.map)((0,c.Z)(A),(function(e){return{value:e._id,label:e.name}})))))}),[A,t]),(0,u.useEffect)((function(){Fe([{label:t("Barchasi"),value:""}].concat((0,c.Z)((0,w.map)((0,c.Z)(Y),(function(e){return{value:e._id,label:e.name,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null}})))))}),[Y,t]),(0,u.useEffect)((function(){var e=T.state,t=function(){e.saleconnector.client&&Oe({label:e.saleconnector.client.name,value:e.saleconnector.client._id}),e.saleconnector.packman&&De({label:e.saleconnector.packman.name,value:e.saleconnector.packman._id}),Rn(e.saleconnector._id)};if(e&&e.temporary&&(qn(e.temporary),me(e.temporary.tableProducts),Oe(e.temporary.clientValue),De(e.temporary.packmanValue),Le(e.temporary.userValue)),e&&e.saleconnector&&!e.returnProducts&&t(),e&&e.saleconnector&&e.returnProducts){t();var n=[];(0,w.map)(e.saleconnector.products,(function(e){var t={_id:e.product._id,discount:e.discount&&e.discount,pieces:e.pieces,totalprice:e.totalprice,totalpriceuzs:e.totalpriceuzs};return(0,w.map)(e.saleproducts,(function(e){return t.pieces+=e.pieces,t.totalprice+=e.totalprice,t.totalpriceuzs+=e.totalpriceuzs,""})),e.pieces>0&&n.push({pieces:"",totalpriceuzs:0,totalprice:0,unitprice:e.unitprice,unitpriceuzs:e.unitpriceuzs,product:(0,i.Z)({},t),productdata:(0,i.Z)({},e.product.productdata),_id:e._id}),""})),Qn((0,w.filter)(n,(function(e){return e.product.pieces>0}))),Wn((0,c.Z)(e.saleconnector.discounts));var a=function(e,t,n){return"uzs"===n?Qa(e.reduce((function(e,n){return e+n[t]}),0)):La(e.reduce((function(e,n){return e+n[t]}),0))};aa(a(e.saleconnector.products,"totalprice","usd")),la(a(e.saleconnector.products,"totalpriceuzs","uzs")),da(a(e.saleconnector.payments,"payment","usd")),ba(a(e.saleconnector.payments,"paymentuzs","uzs"))}window.history.replaceState({},document.title)}),[T.state]),(0,D.jsxs)("div",{className:"flex grow relative overflow-auto",children:[V&&(0,D.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,D.jsx)(h.Z,{})}),(0,D.jsx)(j.Z,{returned:!!Ln.length,exchangerate:xa,type:it,active:tt,togglePaymentModal:Ba,changePaymentType:function(e){var t=mn-Number(qt),n=hn-Number(Rt),a=Ln.reduce((function(e,t){return La(e+t.totalprice)}),0),r=Ln.reduce((function(e,t){return Qa(e+t.totalpriceuzs)}),0),i=La(na-sa-a),c=Qa(ca-fa-r);if(it!==e)switch(ct(e),e){case"cash":Ln.length>0?i<=0?(pn(i),vn(c),st(Math.abs(i)),ft(Math.abs(c)),Zn(Math.abs(i)),zn(Math.abs(c))):(st(0),ft((0,y.uX)(0,xa)),rn(La(i)),on(Qa(c)),pn(a),vn(r),Zn(a),zn(r)):(st(t),ft(n),yt(""),St(""),_t(""),Tt(""),Zn(t),zn(n),rn(0),on(0));break;case"card":Ln.length>0?i<=0?(pn(i),vn(c),yt(Math.abs(i)),St(Math.abs(c)),Zn(Math.abs(i)),zn(Math.abs(c))):(yt(0),St((0,y.uX)(0,xa)),rn(La(i)),on(Qa(c)),pn(a),vn(r),Zn(a),zn(r)):(yt(t),St(n),st(""),ft(""),_t(""),Tt(""),Zn(t),zn(n),rn(0),on(0)),st(""),ft(""),_t(""),Tt("");break;case"transfer":Ln.length>0?i<=0?(pn(i),vn(c),_t(Math.abs(i)),Tt(Math.abs(c)),Zn(Math.abs(i)),zn(Math.abs(c))):(_t(0),Tt((0,y.uX)(0,xa)),rn(La(i)),on(Qa(c)),pn(a),vn(r),Zn(a),zn(r)):(_t(t),Tt(n),st(""),ft(""),yt(""),St(""),Zn(t),zn(n),rn(0),on(0)),st(""),ft(""),yt(""),St("");break;default:st(""),ft(""),yt(""),St(""),_t(""),Tt(""),Zn(0),zn(0),xt(""),rn(mn-Number(qt)),on(hn-Number(Rt))}},onChange:function(e,t){!function(e,t){var n=Math.abs(mn),a=Math.abs(hn);if("USD"===H)if("cash"===t){var r=Number(e)+Number(vt),i=Number((0,y.uX)(e,xa))+Number((0,y.uX)(vt,xa));r<=n?(st(e),ft((0,y.uX)(e,xa)),rn(La(n-r)),on(Qa(a-i)),Zn(r),zn(i)):(0,k.bH)()}else if("usd"===t){var c=Number(e)+Number(ot),l=Number((0,y.uX)(e,xa))+Number(pt);c<=n?(rn(La(n-c)),on(Qa(a-l)),Zn(c),zn(l),xt(e)):(0,k.bH)()}else if("card"===t){var u=Number(e)+Number(ot)+Number(Ut),o=Number(pt)+Number((0,y.uX)(e,xa))+Number(Mt);u<=n?(yt(e),St((0,y.uX)(e,xa)),rn(La(n-u)),on(Qa(a-o)),Zn(u),zn(o)):(0,k.bH)()}else{var s=Number(e)+Number(ot)+Number(Zt),d=Number(pt)+Number(zt)+Number((0,y.uX)(e,xa));s<=n?(_t(e),Tt((0,y.uX)(e,xa)),rn(La(n-s)),on(Qa(a-d)),Zn(s),zn(d)):(0,k.bH)()}else if("cash"===t){var m=Number(e)+Number((0,y.uX)(vt,xa))+Number(Mt)+Number(zt),p=Number((0,y.Nt)(e,xa))+Number(vt)+Number(Ut)+Number(Zt);m<=a?(ft(e),st((0,y.Nt)(e,xa)),rn(La(n-p)),on(Qa(a-m)),Zn(p),zn(m)):(0,k.bH)()}else if("usd"===t){var f=Number(pt)+Number((0,y.uX)(e,xa)),b=Number(e)+ot;f<=a?(rn(La(n-b)),on(Qa(a-f)),Zn(b),zn(f),xt(e)):(0,k.bH)()}else if("card"===t){var h=Number(e)+Number(pt)+Number(Mt),v=Number(ot)+Number((0,y.Nt)(e,xa))+Number(Ut);h<=a?(yt((0,y.Nt)(e,xa)),St(e),rn(La(n-v)),on(Qa(a-h)),Zn((0,y.Nt)(h,xa)),zn(h)):(0,k.bH)()}else{var x=Number(e)+Number(pt)+Number(zt),g=Number(ot)+Number(Zt)+Number((0,y.Nt)(e,xa));x<=a?(_t((0,y.Nt)(e,xa)),Tt(e),rn(La(n-g)),on(Qa(a-x)),Zn(g),zn(x)):(0,k.bH)()}}(e,t)},client:Be||He.label||Pe.label,allPayment:mn,allPaymentUzs:hn,card:"USD"===H?Zt:zt,cash:"USD"===H?ot:pt,debt:an,debtuzs:un,discount:"USD"===H?"USD"===Gt.value?qt:Qt:"UZS"===Gt.value?Rt:Qt,handleChangeDiscount:function(e){var t=Math.round(30*mn/100*1e3)/1e3,n=Math.round(30*hn/100*1)/1;if("USD"===Gt.value)e>t?(0,k.kH)("".concat(t," USD")):(It(e),Et((0,y.uX)(e,xa)),Yt(Math.round(mn*e/100*1e3)/1e3),rn(mn-e),on((0,y.uX)(mn-e,xa)));else if("UZS"===Gt.value)e>n?(0,k.kH)("".concat(n," UZS")):(Et(e),It((0,y.Nt)(e,xa)),Yt(Math.round(hn*e/100*1e3)/1e3),rn((0,y.Nt)(hn-e,xa)),on(hn-e));else if(e>30)(0,k.kH)("30%");else{var a=Math.round(mn*e/100*1e3)/1e3,r=Math.round(hn*e/100*1)/1;Yt(e),It(a),Et(r),rn(La(mn-a)),on(Qa(hn-r)),Zn(mn-a),zn(hn-r)}st(""),ft(""),yt(""),St(""),_t(""),Tt(""),Zn(0),zn(0)},hasDiscount:Wt,transfer:"USD"===H?Ut:Mt,handleClickDiscountBtn:function(){At(!Wt),"cash"===it?(st(mn),ft(hn),Zn(mn),zn(hn)):"card"===it?(yt(mn),St(hn),Zn(mn),zn(hn)):"transfer"===it?(_t(mn),Tt(hn),Zn(mn),zn(hn)):(st(""),ft(""),yt(""),St(""),_t(""),Tt(""),Zn(0),zn(0),rn(mn),on(hn)),It(""),Et(""),Yt("")},discountSelectOption:Gt,handleChangeDiscountSelectOption:function(e){Gt.value!==e.value&&(en(e),It(""),Et(""),Yt(""),st(""),ft(""),yt(""),St(""),_t(""),Tt(""),rn(mn),on(hn),Zn(0),zn(0))},paid:"USD"===H?Nn:jn,handleClickPay:function(){null===Oa&&(Oa=window.setTimeout((function(){Oa=null,Un("complete"),Je(!0)}),300))},changeComment:function(e){ka(e)},saleComment:ya,onDoubleClick:function(){window.clearTimeout(Oa),Oa=null,Ln.length>0?Aa():Wa()},paymentUsd:vt,debtType:Ta,setDebtType:Xa}),(0,D.jsx)(Z.Z,{body:wn,toggleModal:"complete"===wn?Ja:function(){Je(!Ve),Un(""),Mn(null)},approveFunction:"complete"===wn?Ln.length?Aa:Wa:function(){},isOpen:Ve,product:Dn,headers:Ra,headerText:"complete"===wn&&t("To'lovni amalga oshirishni tasdiqlaysizmi ?"),title:"complete"===wn&&t("To'lovni amalga oshirgach bu ma`lumotlarni o`zgaritirb bo`lmaydi !"),changeProduct:function(e,t){switch(t){case"unitprice":!function(e){$e((0,i.Z)((0,i.Z)({},Ke),{},{unitprice:"USD"===H?e:(0,y.Nt)(e,xa),unitpriceuzs:"UZS"===H?e:(0,y.uX)(e,xa),totalprice:"USD"===H?e*Ke.pieces:(0,y.Nt)(e*Ke.pieces,xa),totalpriceuzs:"UZS"===H?e*Ke.pieces:(0,y.uX)(e*Ke.pieces,xa)}))}(e);break;case"pieces":!function(e){$e((0,i.Z)((0,i.Z)({},Ke),{},{pieces:e,totalprice:e*Ke.unitprice,totalpriceuzs:e*Ke.unitpriceuzs}))}(e);break;default:return null}}}),(0,D.jsxs)("div",{className:"flex flex-col grow gap-[1.25rem] overflow-auto",children:[(0,D.jsxs)("div",{className:"mainPadding flex flex-col gap-[1.25rem]",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(o.Z,{id:"register-selling",onChange:function(){le&&(Le(""),De(""),Oe("")),ue(!le)},value:le,label:t("Mijoz")}),(0,D.jsxs)("div",{className:"flex gap-[1.25rem] mt-[1rem]",children:[(0,D.jsx)(s.Z,{placeholder:t("Santexniklar"),maxWidth:"w-[14.676875rem]",disabled:!le,border:!0,select:!0,value:Pe,options:Ce,onChange:function(e){De(e);var n=(0,w.filter)(A,(function(t){return t._id===e.value}))[0];n&&n.hasOwnProperty("clients")?Fe((0,w.map)(n.clients,(function(e){return{label:e.name,value:e._id,packman:n,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null}}))):Fe([{label:t("Tanlang"),value:""}].concat((0,c.Z)((0,w.map)((0,c.Z)(Y),(function(e){return{label:e.name,value:e._id,packman:null===e||void 0===e?void 0:e.packman,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null}}))))),Oe(""),Le("")}}),(0,D.jsx)(s.Z,{placeholder:t("Xaridor"),maxWidth:"w-[14.676875rem]",disabled:!le,border:!0,select:!0,value:He,options:Xe,onChange:function(e){Oe(e),Rn((null===e||void 0===e?void 0:e.saleconnectorid)||null);var t,n,a=(0,w.filter)(Y,(function(t){return t._id===e.value}))[0];a&&a.hasOwnProperty("packman")&&De({label:null===a||void 0===a||null===(t=a.packman)||void 0===t?void 0:t.name,value:null===a||void 0===a||null===(n=a.packman)||void 0===n?void 0:n._id});e.value?Le(e.label):Le("")}}),(0,D.jsx)(s.Z,{placeholder:t("Amaldagi xaridor"),disabled:!le,value:Be,onChange:function(e){Le(e.target.value)}})]})]}),!Ln.length&&(0,D.jsxs)("div",{className:"flex flex-col gap-[1.25rem]",children:[(0,D.jsx)(s.Z,{select:!0,placeholder:t("misol: kompyuter"),value:ae,label:t("Maxsulotlar"),onChange:Ga,options:G}),(0,D.jsx)("div",{className:"flex justify-end items-start",children:(0,D.jsxs)("div",{className:"checkbox-card sale-toggle-container",children:[(0,D.jsxs)("p",{className:"toggleText",children:[t("Optom narxida hisoblash")," :"]}),(0,D.jsx)("input",{type:"checkbox",checked:_a,onChange:function(e){var t=e.target.checked;de.length>0?(Pa(!_a),me(t?function(e){return e.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{totalprice:e.tradeprice?La(Number(e.pieces+e.fromFilial)*e.tradeprice):e.totalprice,totalpriceuzs:e.tradepriceuzs?Qa(Number(e.pieces+e.fromFilial)*e.tradepriceuzs):e.totalpriceuzs})}))}:function(e){return e.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{totalprice:e.unitprice?La(Number(e.pieces+e.fromFilial)*e.unitprice):e.totalprice,totalpriceuzs:e.unitpriceuzs?Qa(Number(e.pieces+e.fromFilial)*e.unitpriceuzs):e.totalpriceuzs})}))})):(0,k._P)()}})]})})]})]}),(0,D.jsx)("div",{className:"tableContainerPadding mt-[-20px]",children:Ln.length?(0,D.jsx)(d.Z,{page:"backproduct",data:Ln,headers:Ea,currency:H,changeHandler:function(e,n,a){if(e>Number(Ln[a].product.pieces))return(0,k.Ug)(t("Diqqat! Qaytariladigan mahsulot soni sotilgan mahsulot sonidan ortiq bo'lolmaydi"),"warning");var r=(0,w.map)(Ln,(function(t){return t._id===n?(0,i.Z)((0,i.Z)({},t),{},{pieces:e,totalprice:La(e*t.unitprice),totalpriceuzs:Qa(e*t.unitpriceuzs)}):t}));Qn(r)}}):de.length?(0,D.jsx)(d.Z,{page:"registersale",data:de,headers:Ra,currency:H,Delete:function(e){de.splice(e,1),me((0,c.Z)(de))},changeHandler:function(e,t,n){switch(n){case"unitprice":er(e,t);break;case"pieces":tr(e,t);break;case"fromFilial":nr(e,t);break;case"select":ar(e,t);break;case"packcount":Ka(e,t)}},footer:"registersale",increment:function(e){var t=(0,w.map)(de,(function(t){return t.product._id===e?(0,i.Z)((0,i.Z)({},t),{},{pieces:Number(t.pieces)+1,totalprice:La((Number(t.pieces)+Number(t.fromFilial)+1)*(_a&&t.tradeprice||t.unitprice)),totalpriceuzs:Qa((Number(t.pieces)+Number(t.fromFilial)+1)*(_a&&t.tradepriceuzs||t.unitpriceuzs))}):t}));me(t)},decrement:function(e){var t=(0,w.map)(de,(function(t){return t.product._id===e?(0,i.Z)((0,i.Z)({},t),{},{pieces:Number(t.pieces)>1?Number(t.pieces)-1:1,totalprice:La((Number(t.pieces)>1?Number(t.pieces)-1+Number(t.fromFilial):1)*(_a&&t.tradeprice||t.unitprice)),totalpriceuzs:Qa((Number(t.pieces)>1?Number(t.pieces)-1+Number(t.fromFilial):1)*(_a&&t.tradepriceuzs||t.unitpriceuzs))}):t}));me(t)},lowUnitpriceProducts:Sa,wholeSale:_a,selectedFilial:Ia}):(0,D.jsx)(b.Z,{text:t("Sotuvda mahsulotlar qo'shilmagan!")})})]}),(0,D.jsxs)("div",{className:"register-selling-right min-w-[20.25rem] bg-white-400 backdrop-blur-[3.125rem] rounded-[0.25rem] flex flex-col gap-[1.25rem]",children:[(0,D.jsxs)("div",{className:"flex flex-col grow gap-[1.25rem]",children:[(0,D.jsx)(N.Z,{placeholder:t("kategoriyani qidirish..."),value:ke,onChange:function(e){var t=e.target.value;je(t);var n=t.replace(/\s+/g," ").trim(),a=(0,w.filter)(E,(function(e){return e.name&&e.name.toLowerCase().includes(n)||e.code.includes(n)}));he(""!==t?a:E)},onKeyUp:function(){}}),(0,D.jsx)("div",{className:"grow relative overflow-auto",children:(0,D.jsx)("div",{className:"cards-container absolute left-0 right-[0.125rem] top-0 bottom-0",children:B?(0,D.jsx)("div",{className:"tableContainerPadding",children:(0,D.jsx)(h.Z,{})}):be.length>0?(0,w.map)(be,(function(e){return(0,D.jsx)(f.Z,{id:e._id,activeCategory:e._id===ge,title:e.name,code:e.code,products:e.products.length,onClick:$a},e._id)})):(0,D.jsx)(b.Z,{text:t("Kategoriya mavjud emas")})})})]}),(0,D.jsxs)("div",{className:"flex gap-[0.625rem]",children:[(0,D.jsx)("button",{type:"button",className:"register-selling-right-accept-btn",onClick:Ln.length?function(){if(Ln.length){var e=Ln.reduce((function(e,t){return La(e+t.totalprice)}),0),t=Ln.reduce((function(e,t){return Qa(e+t.totalpriceuzs)}),0),n=Jn.map((function(e){var t=(0,i.Z)({},e);return(0,w.map)(Ln,(function(n){var a;return e._id===(null===(a=n.product)||void 0===a?void 0:a.discount)&&(t=(0,i.Z)((0,i.Z)({},e),{},{discount:La(t.discount-n.totalprice*e.procient/100),discountuzs:Qa(t.discountuzs-n.totalpriceuzs*e.procient/100),totalprice:La(t.totalprice-n.totalprice),totalpriceuzs:Qa(t.totalpriceuzs-n.totalpriceuzs)})),""})),(0,i.Z)({},t)})),a=n.reduce((function(e,t){return e+t.discount}),0),r=n.reduce((function(e,t){return e+t.discountuzs}),0),c=La(na-sa-a-e),l=Qa(ca-fa-r-t);Gn(n),c<=0?(pn(c),vn(l),st(Math.abs(c)),ft(Math.abs(l)),Zn(Math.abs(c)),zn(Math.abs(l))):(st(0),ft((0,y.uX)(0,xa)),rn(La(c)),on(Qa(l)),pn(e),vn(t),Zn(e),zn(t)),nt(!0),Ya(t,e)}else(0,k.v_)()}:function(){if(de.length){if(de.some((function(e){return 0===e.total&&0===e.fromFilial})))return(0,k.H9)();var e=de.filter((function(e){return e.unitprice<=e.incomingprice})).map((function(e){return e.product._id}));if(e.length>0)Ca(e),(0,k.zX)();else{Ca(e);var t=de.reduce((function(e,t){return La(e+t.totalprice)}),0),n=de.reduce((function(e,t){return Qa(e+t.totalpriceuzs)}),0),a=de.reduce((function(e,t){return Qa(e+(!t.isUsd&&t.totalpriceuzs||0))}),0),r=de.reduce((function(e,t){return e+(t.isUsd&&t.totalprice||0)}),0),i=de.reduce((function(e,t){return e+(!t.isUsd&&t.totalprice||0)}),0);pn((0,y.Y2)(t)),vn(n),xt((0,y.Y2)(r)),st((0,y.Y2)(i)),ft(a),Zn((0,y.Y2)(t)),zn(n),nt(!0),Ya(n,t)}}else O?(0,k._P)():(0,k.YQ)()},children:t("To'lov")}),!Ln.length&&(0,D.jsx)("button",{type:"button",onClick:function(){if(de.length>0){var e=de.reduce((function(e,t){return La(e+t.totalprice)}),0),t=de.reduce((function(e,t){return Qa(e+t.totalpriceuzs)}),0),a={temporary:{saleconnectorid:null,clientValue:He,packmanValue:Pe,userValue:Be,tableProducts:de,totalPrice:e,totalPriceUzs:t}};n((0,v.Jk)(a)).then((function(e){e.error||(Va(!1),M("/sotuv/saqlanganlar"))})),Fn&&(n((0,x.kl)({_id:Fn._id})),qn(null))}},className:"register-selling-right-deny-btn",children:(0,D.jsx)(p.T24,{size:"1.5rem"})})]})]}),(0,D.jsx)(S.Z,{onError:function(){(0,k.Ug)(t("Mahsulot kodi o'qilmadi!"),"warning")},onScan:function(e){Ga({barcode:e})}})]})}}}]);
//# sourceMappingURL=7458.8f013e53.chunk.js.map