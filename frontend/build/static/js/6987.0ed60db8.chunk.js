"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6987],{5692:function(e,t,n){n.d(t,{Z:function(){return j}});var a=n(71),r=(n(2791),n(184)),i=function(e){var t=e.onClick,n=e.text,i=e.type,l=e.active,s={cash:(0,r.jsx)(a.OR0,{className:"paymentsstyle",size:"1.3125rem"}),card:(0,r.jsx)(a.RjO,{className:"paymentsstyle",size:"1.3125rem"}),transfer:(0,r.jsx)(a.g2P,{className:"paymentsstyle",size:"1.3125rem"}),mixed:(0,r.jsx)(a.qTT,{className:"paymentsstyle",size:"1.3125rem"})};return(0,r.jsxs)("button",{onClick:function(){return t(i)},className:"salestyle ".concat(l?"bg-primary-700 text-white-900":"bg-[#E9ECEB]"),children:[s[i],n]})},l=function(e){var t=e.onClick,n=e.text,i=e.onDoubleClick;return(0,r.jsxs)("button",{onClick:t,onDoubleClick:i,className:"paymentstyle grow",children:[(0,r.jsx)(a.Q84,{className:"paystyle",size:"1.3125rem"}),n]})},s=n(9434),u=n(7146),o=n(1413),c=n(1188),m=function(e){return(0,r.jsx)(c.c.DropdownIndicator,(0,o.Z)((0,o.Z)({},e),{},{children:(0,r.jsx)(a.lmx,{size:"0.625rem"})}))},d={control:function(e){return(0,o.Z)((0,o.Z)({},e),{},{borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}})},container:function(e){return(0,o.Z)((0,o.Z)({},e),{},{height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0})},option:function(e,t){var n=t.isFocused,a=t.isSelected;return(0,o.Z)((0,o.Z)({},e),{},{fontSize:".75rem",fontWeight:"400",color:a||n?"#ffffff":"#071F45",backgroundColor:a?"#0090A3":n?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"})},menu:function(e){return(0,o.Z)((0,o.Z)({},e),{},{overflow:"hidden"})},singleValue:function(e){return(0,o.Z)((0,o.Z)({},e),{},{fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"})},valueContainer:function(e){return(0,o.Z)((0,o.Z)({},e),{},{padding:0})},indicatorsContainer:function(e){return(0,o.Z)({},e)},dropdownIndicator:function(e){return(0,o.Z)((0,o.Z)({},e),{},{padding:0,color:"#ffffff"})}};var p=function(e){var t=e.value,n=e.onChange,a=e.option,i=e.onSelect,l=(0,s.v9)((function(e){return e.currency})).currencyType,o=[{value:l,label:l},{value:"%",label:"%"}];return(0,r.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,r.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:"misol: 100 000 000",type:"number",value:t,onChange:function(e){n(e.target.value)},onWheel:function(e){return e.target.blur()},min:0}),"/>",(0,r.jsx)(u.ZP,{onChange:i,styles:d,isSearchable:!1,value:a,options:o,components:{IndicatorSeparator:function(){return null},DropdownIndicator:m}})]})},f=function(e){var t=e.value,n=e.onChange,a=e.option,i=e.onSelect;return(0,r.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,r.jsx)("div",{className:"text-black-700 text-[0.875rem]",children:"Chegirma :"}),(0,r.jsx)(p,{onChange:n,onSelect:i,value:t,option:a})]})},h=n(4952),b=function(e){var t=e.onClick;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{onClick:t,className:"exitbtn",children:(0,r.jsx)(a.Lp2,{size:"0.75rem"})})})};var x=function(e){var t=e.mix,n=e.value,a=e.onChange,i=e.label,l=e.onClose,s=e.keyInput,u=e.placeholder,o=e.type;return(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[i," :"]}),(0,r.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,r.jsx)(h.Z,{placeholder:u||"misol: 100 000 000",type:o||"number",value:n,onChange:function(e){a(e.target.value,s)}}),t&&(0,r.jsx)(b,{onClick:function(){return l(s)}})]})]})},g=n(8825),v=n(7689),y=n(2932),N=n(7584);var j=function(e){var t=e.returned,n=e.active,u=e.togglePaymentModal,o=e.type,c=void 0===o?"cash":o,m=e.cash,d=void 0===m?"":m,p=e.card,h=void 0===p?"":p,b=e.transfer,j=void 0===b?"":b,Z=e.discount,k=e.hasDiscount,C=e.debt,S=e.allPayment,z=e.allPaymentUzs,w=e.paid,D=void 0===w?0:w,U=e.client,_=void 0===U?"":U,q=e.onChange,P=e.onClose,T=e.changePaymentType,Y=e.discountSelectOption,I=(e.handleClickDiscountBtn,e.handleChangeDiscountSelectOption),M=e.handleChangeDiscount,E=(e.exchangerate,e.handleClickPay),X=e.saleComment,O=e.changeComment,F=e.onDoubleClick,H=e.paymentUsd,R=void 0===H?"":H,Q=e.debtuzs,A=e.debtType,B=e.setDebtType,L=(0,v.TH)(),W=function(){switch(c){case"card":return(0,r.jsx)(x,{value:h,keyInput:c,onChange:q,onClose:P,label:(0,g.t)("Plastik")},"sale-card1");case"transfer":return(0,r.jsx)(x,{value:j,keyInput:c,onChange:q,onClose:P,label:(0,g.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,g.t)("Naqd"),key:"cash",value:d},{label:(0,g.t)("Plastik"),key:"card",value:h},{label:(0,g.t)("O`tkazma"),key:"transfer",value:j}].map((function(e){return(0,r.jsx)(x,{value:e.value,keyInput:e.key,onChange:q,onClose:P,label:(0,g.t)(e.label)},"sale-".concat(e.key))}));default:return L.pathname.includes("/kassa/debts")?"sum"===A?(0,r.jsx)(x,{value:d,onChange:q,keyInput:c,onClose:P,label:(0,g.t)("Naqd")},"sale-cash"):(0,r.jsx)(x,{value:R,onChange:q,keyInput:"usd",onClose:P,label:(0,g.t)("USD")},"sale-usd"):(0,r.jsxs)(r.Fragment,{children:["mixed"!==c&&(0,r.jsx)(x,{value:R,onChange:q,keyInput:"usd",onClose:P,label:(0,g.t)("USD")},"sale-usd"),(0,r.jsx)(x,{value:d,onChange:q,keyInput:c,onClose:P,label:(0,g.t)("Naqd")},"sale-cash")]})}},J=(0,s.v9)((function(e){return e.currency})).currencyType;return(0,r.jsxs)("section",{className:"absolute transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 ".concat(n?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:u,children:[(0,r.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,g.t)("Oynani yopish uchun bu yerga bosing !")}),(0,r.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 ".concat(n?"translate-x-0":"translate-x-full"),onClick:function(e){return e.stopPropagation()},autoFocus:!0,children:[(0,r.jsxs)("div",{className:"top-payment w-full",children:[_&&(0,r.jsxs)("div",{className:"customer-head-icon",children:[(0,r.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,r.jsx)(a.J4e,{className:"mr-[0.75rem]"}),(0,r.jsxs)("span",{children:[(0,g.t)("Mijoz")," : "]})]}),(0,r.jsx)("h3",{className:"text-[0.875rem]",children:_})]}),(0,r.jsx)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:L.pathname.includes("/kassa/debts")&&"dollar"===A?S+" USD":z+" UZS"}),(0,r.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&W(),(L.pathname.includes("/kassa/debts")||L.pathname.includes("/qarzdorlar")||L.pathname.includes("/maxsulotlar/qabul/qabulqilish")||L.pathname.includes("/maxsulotlar/qabul/qabullar"))&&W(),(0,r.jsx)(x,{value:X,keyInput:c,onChange:O,onClose:P,label:(0,g.t)("Izoh"),placeholder:(0,g.t)("misol: qarzga olindi"),type:"text"},"sale-card"),k&&(0,r.jsx)(f,{value:Z,onChange:M,option:Y,onSelect:I}),L.pathname.includes("/kassa/debts")?"sum"===A?(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,g.t)("Qarzlar")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[Q," UZS"]})]}):(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,g.t)("Qarzlar")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[(0,N.Y2)(C)," USD ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]})]}):(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,g.t)("Qarzlar")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[(0,N.Y2)(C)," USD ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),Q," UZS"]})]}),(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,g.t)("Qarz")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem] flex items-center gap-2",children:[(0,r.jsx)(y.Z,{id:"debt",onChange:function(){return B("dollar")},value:"dollar"===A,label:(0,g.t)("USD")}),(0,r.jsx)(y.Z,{id:"debt2",onChange:function(){return B("sum")},value:"sum"===A,label:(0,g.t)("UZS")})]})]}),(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[S<0?(0,g.t)("Qaytarilayotgan"):(0,g.t)("To`lanayotgan")," ",":"," "]}),(0,r.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[D.toLocaleString("ru-Ru")," ",J]})]})]})]}),(0,r.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,r.jsxs)("div",{className:"custom-paymet-btn",children:[(0,r.jsx)(i,{text:(0,g.t)("Naqd"),type:"cash",active:"cash"===c,onClick:T}),(0,r.jsx)(i,{text:(0,g.t)("Plastik"),type:"card",active:"card"===c,onClick:T}),(0,r.jsx)(i,{text:(0,g.t)("O'tkazma"),type:"transfer",active:"transfer"===c,onClick:T}),!t&&(0,r.jsx)(i,{text:(0,g.t)("Aralash"),type:"mixed",active:"mixed"===c,onClick:T})]}),(0,r.jsx)(l,{text:(0,g.t)("To'lash"),onClick:E,onDoubleClick:F})]})]})]})}},4927:function(e,t,n){n.r(t);var a=n(7762),r=n(1413),i=n(3433),l=n(9439),s=n(2791),u=n(9434),o=n(8309),c=n(9078),m=n(5121),d=n(7129),p=n(9403),f=n(2230),h=n(7584),b=n(7689),x=n(3168),g=n(763),v=n(2106),y=n(5692),N=n(1338),j=n(184);t.default=function(){var e=(0,x.$)(["common"]).t,t=(0,u.I0)(),n=(0,b.s0)(),Z=(0,u.v9)((function(e){return e.login})),k=Z.market._id,C=Z.user,S=(0,u.v9)((function(e){return e.currency})),z=S.currency,w=S.currencyType,D=(0,u.v9)((function(e){return e.incoming})),U=D.suppliers,_=D.products,q=D.successAdd,P=D.successTemporary,T=D.temporary,Y=D.loading,I=(0,s.useState)([]),M=(0,l.Z)(I,2),E=M[0],X=M[1],O=(0,s.useState)([]),F=(0,l.Z)(O,2),H=F[0],R=F[1],Q=(0,s.useState)({}),A=(0,l.Z)(Q,2),B=A[0],L=A[1],W=(0,s.useState)([]),J=(0,l.Z)(W,2),K=J[0],V=J[1],G=(0,s.useState)({}),$=(0,l.Z)(G,2),ee=$[0],te=$[1],ne=(0,s.useState)([]),ae=(0,l.Z)(ne,2),re=ae[0],ie=ae[1],le=(0,s.useState)(""),se=(0,l.Z)(le,2),ue=se[0],oe=se[1],ce=(0,s.useState)(""),me=(0,l.Z)(ce,2),de=me[0],pe=me[1],fe=(0,s.useState)(!1),he=(0,l.Z)(fe,2),be=he[0],xe=he[1],ge=(0,s.useState)("cash"),ve=(0,l.Z)(ge,2),ye=ve[0],Ne=ve[1],je=(0,s.useState)(""),Ze=(0,l.Z)(je,2),ke=Ze[0],Ce=Ze[1],Se=(0,s.useState)(""),ze=(0,l.Z)(Se,2),we=ze[0],De=ze[1],Ue=(0,s.useState)(""),_e=(0,l.Z)(Ue,2),qe=_e[0],Pe=_e[1],Te=(0,s.useState)(""),Ye=(0,l.Z)(Te,2),Ie=Ye[0],Me=Ye[1],Ee=(0,s.useState)(""),Xe=(0,l.Z)(Ee,2),Oe=Xe[0],Fe=Xe[1],He=(0,s.useState)(""),Re=(0,l.Z)(He,2),Qe=Re[0],Ae=Re[1],Be=(0,s.useState)(0),Le=(0,l.Z)(Be,2),We=Le[0],Je=Le[1],Ke=(0,s.useState)(0),Ve=(0,l.Z)(Ke,2),Ge=Ve[0],$e=Ve[1],et=(0,s.useState)(0),tt=(0,l.Z)(et,2),nt=tt[0],at=tt[1],rt=(0,s.useState)(0),it=(0,l.Z)(rt,2),lt=it[0],st=it[1],ut=(0,s.useState)(0),ot=(0,l.Z)(ut,2),ct=ot[0],mt=ot[1],dt=(0,s.useState)(0),pt=(0,l.Z)(dt,2),ft=pt[0],ht=pt[1],bt=(0,s.useState)("registerincomingbody"),xt=(0,l.Z)(bt,2),gt=xt[0],vt=xt[1],yt=(0,s.useState)(!1),Nt=(0,l.Z)(yt,2),jt=Nt[0],Zt=Nt[1],kt=(0,s.useState)(z),Ct=(0,l.Z)(kt,2),St=Ct[0],zt=Ct[1],wt=(0,s.useState)(""),Dt=(0,l.Z)(wt,2),Ut=Dt[0],_t=Dt[1],qt=null,Pt=function(e){pe({label:e.label,value:e.value}),K.some((function(t){return t._id===e.value&&t.supplier._id===B._id}))?(0,v.Ug)("Diqqat mahsulot ro'yxatda mavjud","warning"):Tt(e.value)},Tt=function(e,t){var n=(0,i.Z)((0,g.filter)((0,i.Z)(_),(function(t){return t._id===e})))[0];te({_id:n._id,oldprice:n.price.incomingprice,oldpriceuzs:n.price.incomingpriceuzs,product:(0,r.Z)((0,r.Z)({},n.productdata),{},{_id:n._id}),pieces:"",unitprice:"",unitpriceuzs:"",totalprice:"",totalpriceuzs:"",user:C._id,unit:n.unit,sellingprice:n.price.sellingprice,sellingpriceuzs:n.price.sellingpriceuzs,tradeprice:n.price.tradeprice,tradepriceuzs:n.price.tradepriceuzs,procient:"",supplier:(0,r.Z)({},B)}),vt("registerincomingbody"),Zt(!0)},Yt=function(e,t,n){var a,l=Number(e.target.value),s=function(e){return t===e},u=!n&&(0,r.Z)({},ee)||(0,r.Z)({},(0,g.filter)((0,i.Z)(K),(function(e){return e._id===n}))[0]),o="USD"===w?l:(0,h.Nt)(l,z),c="UZS"===w?l:(0,h.uX)(l,z),m=function(e){return"UZS"===w?Math.round(e/100*l)+e:Math.round(e/100*l*1e3)/1e3+e};s("pieces")&&((a=u).pieces=l,a.totalprice=(0,h.Y2)(l*a.unitprice),a.totalpriceuzs=(0,h.ei)(l*a.unitpriceuzs)),s("unitprice")&&function(e){e.unitprice=(0,h.Nt)(l,z),e.unitpriceuzs=l,e.totalprice=(0,h.Y2)((0,h.Nt)(l,z)*e.pieces),e.totalpriceuzs=(0,h.ei)(l*e.pieces)}(u),s("unitpriceusd")&&function(t){t.unitprice=e.target.value,t.unitpriceuzs=(0,h.uX)(e.target.value,z),t.totalprice=(0,h.Y2)(e.target.value*t.pieces),t.totalpriceuzs=(0,h.ei)((0,h.uX)(e.target.value,z)*t.pieces)}(u),s("sellingprice")&&function(t){t.sellingprice=(0,h.Nt)(e.target.value,z),t.sellingpriceuzs=e.target.value,t.procient=0}(u),s("sellingpriceusd")&&function(t){t.sellingprice=e.target.value,t.sellingpriceuzs=(0,h.uX)(e.target.value,z),t.procient=0}(u),s("procient")&&function(e){e.procient=l,e.sellingprice=m(e.unitprice),e.sellingpriceuzs=m(e.unitpriceuzs)}(u),s("tradeprice")&&function(e){e.tradeprice=o,e.tradepriceuzs=c}(u),n?V((0,i.Z)((0,g.map)((0,i.Z)(K),(function(e){return e._id===n?u:e})))):te(u)},It=function(t){return Number(t.pieces)<1?(0,v.Ug)(e("Mahsulot sonini kiriting!"),"warning"):Number(t.unitprice)<.01?(0,v.Ug)(e("Mahsulot qabul narxini kiriting!"),"warning"):Number(t.sellingprice)<Number(t.unitprice)&&(0,v.Ug)(e("Sotish narxi olish narxidan kam bo'lmasin"),"warning")},Mt=function(){T.incomings&&T.incomings.length>0&&re.length>0&&(t((0,m.PF)({_id:T._id})),t((0,m.yu)()))},Et=[{title:e("\u2116"),styles:"w-[8%]"},{title:e("Kodi"),styles:"w-[10%]"},{title:e("Nomi")},{title:e("Soni"),styles:"w-[10%]"},{title:e("Narxi"),styles:"w-[10%]"},{title:e("Avvalgi narxi"),styles:"w-[15%]"},{title:e("Jami"),styles:"w-[15%]"},{title:e("Sotish"),styles:"w-[15%]"},{title:"Optom narx",styles:"w-[15%]"},{title:"",styles:"w-[5%]"}],Xt=function(){Zt(!jt),pe(""),setTimeout((function(){vt("")}),500)},Ot=function(e,t){var n=Math.abs(nt),a=Math.abs(lt);if("USD"===w)if("cash"===t){var r=Number(e)+Number(qe)+Number(Oe),i=Number((0,h.uX)(e,St))+Number(Ie)+Number(Qe);r<=n?(Ce(e),De((0,h.uX)(e,St)),Je((0,h.Y2)(n-r)),$e((0,h.ei)(a-i)),mt(r),ht(i)):(0,v.bH)()}else if("card"===t){var l=Number(e)+Number(ke)+Number(Oe),s=Number(we)+Number((0,h.uX)(e,St))+Number(Qe);l<=n?(Pe(e),Me((0,h.uX)(e,St)),Je((0,h.Y2)(n-l)),$e((0,h.ei)(a-s)),mt(l),ht(s)):(0,v.bH)()}else{var u=Number(e)+Number(ke)+Number(qe),o=Number(we)+Number(Ie)+Number((0,h.uX)(e,St));u<=n?(Fe(e),Ae((0,h.uX)(e,St)),Je((0,h.Y2)(n-u)),$e((0,h.ei)(a-o)),mt(u),ht(o)):(0,v.bH)()}else if("cash"===t){var c=Number(e)+Number(Ie)+Number(Qe),m=Number((0,h.Nt)(e,St))+Number(qe)+Number(Oe);c<=a?(De(e),Ce((0,h.Nt)(e,St)),Je((0,h.Y2)(n-m)),$e((0,h.ei)(a-c)),mt(m),ht(c)):(0,v.bH)()}else if("card"===t){var d=Number(e)+Number(we)+Number(Qe),p=Number(ke)+Number((0,h.Nt)(e,St))+Number(Oe);d<=a?(Pe((0,h.Nt)(e,St)),Me(e),Je((0,h.Y2)(n-p)),$e((0,h.ei)(a-d)),mt((0,h.Nt)(d,St)),ht(d)):(0,v.bH)()}else{var f=Number(e)+Number(we)+Number(Ie),b=Number(ke)+Number(qe)+Number((0,h.Nt)(e,St));f<=a?(Fe((0,h.Nt)(e,St)),Ae(e),Je((0,h.Y2)(n-b)),$e((0,h.ei)(a-f)),mt(b),ht(f)):(0,v.bH)()}},Ft=function(){if(!Y){var e=(0,g.map)(K,(function(e){var t=(0,r.Z)({},e);return delete t._id,delete t.procient,t}));t((0,m.PV)({products:(0,i.Z)(e),user:C._id,payment:{totalprice:Number(nt),totalpriceuzs:Number(lt),type:ye,cash:Number(ke),cashuzs:Number(we),card:Number(qe),carduzs:Number(Ie),transfer:Number(Oe),transferuzs:Number(Qe)}})).then((function(e){var a=e.error;Mt(),t((0,m.Xp)()),!a&&n("/maxsulotlar/qabul/qabullar")}))}};return(0,s.useEffect)((function(){U.length<1&&t((0,m.yn)(k)),U.length>0&&function(e){var t=(0,g.map)(e,(function(e){return{label:e.name,value:e._id}}));X(t)}(U)}),[t,k,U]),(0,s.useEffect)((function(){_.length<1&&t((0,m.Xp)({market:k})),_.length>0&&function(e){var t=(0,g.map)(e,(function(e){return{label:e.productdata.code+" - "+e.productdata.name,value:e._id,barcode:e.productdata.barcode}}));R(t)}(_)}),[t,k,_]),(0,s.useEffect)((function(){q&&(V([]),t((0,m.EY)()))}),[t,q]),(0,s.useEffect)((function(){P&&(V([]),t((0,m.l8)()))}),[t,P]),(0,s.useEffect)((function(){Object.keys(T).length>0&&(L(T.supplier),V(T.incomings),ie(T.incomings),oe({label:T.supplier.name,value:T.supplier._id}))}),[T,t]),(0,s.useEffect)((function(){return function(){t((0,m.yu)()),V([]),ie([]),L({})}}),[t]),(0,j.jsxs)(j.Fragment,{children:[Y&&(0,j.jsx)("div",{className:"absolute top-0 left-0 z-30",children:(0,j.jsx)(N.Z,{})}),(0,j.jsxs)("div",{className:"relative grow overflow-auto",children:[(0,j.jsx)(y.Z,{returned:!0,type:ye,active:be,togglePaymentModal:function(e){xe(e?!be:e),Ne("cash"),Je(0),$e(0)},changePaymentType:function(e){if(ye!==e)switch(Ne(e),e){case"cash":Ce(nt),De(lt),Pe(""),Me(""),Fe(""),Ae(""),mt(nt),ht(lt),Je(0),$e(0);break;case"card":Pe(nt),Me(lt),Ce(""),De(""),Fe(""),Ae(""),mt(nt),ht(lt),Je(0),$e(0);break;case"transfer":Fe(nt),Ae(lt),Ce(""),De(""),Pe(""),Me(""),mt(nt),ht(lt),Je(0),$e(0);break;default:Ce(""),De(""),Pe(""),Me(""),Fe(""),Ae(""),mt(0),ht(0),Je(nt),$e(lt)}},onChange:function(e,t){Ot(e,t)},client:"",allPayment:"USD"===w?nt:lt,card:"USD"===w?qe:Ie,cash:"USD"===w?ke:we,debt:"USD"===w?We:Ge,hasDiscount:!1,transfer:"USD"===w?Oe:Qe,paid:"USD"===w?ct:ft,handleClickPay:function(){null===qt&&(qt=window.setTimeout((function(){qt=null,vt("complete"),Zt(!0)}),300))},changeComment:function(e){_t(e)},saleComment:Ut,onDoubleClick:function(){Y||(window.clearTimeout(qt),qt=null,Ft())}}),(0,j.jsxs)("div",{className:"flex items-center mainPadding",children:[(0,j.jsx)("div",{className:"w-full pr-[1.25rem] border-r border-blue-100",children:(0,j.jsx)(o.Z,{options:E,onSelect:function(e){oe({label:e.label,value:e.value}),L.apply(void 0,(0,i.Z)((0,g.filter)((0,i.Z)(U),(function(t){return t._id===e.value})))),K.length>0&&V((0,i.Z)((0,g.map)((0,i.Z)(K),(function(t){return(0,r.Z)((0,r.Z)({},t),{},{supplier:{_id:e.value,name:e.label}})}))))},value:ue,placeholder:e("Yetkazib beruvchi")})}),(0,j.jsx)("div",{className:"w-full pl-[1.25rem]",children:(0,j.jsx)(o.Z,{value:de,options:H,onSelect:Pt,isDisabled:!B._id,placeholder:e("Maxsulotlar")})})]}),(0,j.jsxs)("p",{className:"text-[1.25rem] text-blue-900 mainPadding",children:[e("Yetkazib beruvchi"),": ",B.name]}),(0,j.jsxs)("div",{className:"".concat(K.length>0?"tableContainerPadding":"hidden"),children:[(0,j.jsx)(c.Z,{page:"registerincoming",headers:Et,data:K,currency:w,changeHandler:Yt,Delete:function(e){var n=(0,g.filter)(K,(function(t){return t._id!==e._id}));V(n);var a=(0,g.filter)(re,(function(t){return t._id!==e._id}));ie(a),0===a.length&&t((0,m.yu)())}}),(0,j.jsxs)("div",{className:"flex items-center justify-end gap-[0.625rem] pt-[1.25rem]",children:[(0,j.jsx)(p.G,{text:e("Saqlash"),onClick:function(){Mt(),t((0,m.Cz)({market:k,temporaryincoming:{supplier:B,incomings:K}})).then((function(t){t.error||(oe({label:e("Yetkazib beruvchi"),value:""}),pe({label:e("Mahsulotlar"),value:""}),n("/maxsulotlar/qabul/saqlanganlar"))}))}}),(0,j.jsx)(p.J,{text:e("Tasdiqlash"),onClick:function(){if(!function(t){var n,r=(0,a.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.pieces<1)return(0,v.Ug)(e("Mahsulot sonini kiriting!"),"warning");if(i.unitprice<.01)return(0,v.Ug)(e("Mahsulot qabul narxini kiriting!"),"warning");if(i.sellingprice<i.unitprice)return(0,v.Ug)(e("Sotish narxi olish narxidan kam bo'lmasin"),"warning")}}catch(l){r.e(l)}finally{r.f()}return!1}((0,g.map)(K,(function(e){var t=(0,r.Z)({},e);return delete t._id,delete t.procient,t}))))if(K.length){var t=(0,h.KE)(K,"totalprice"),n=(0,h.KE)(K,"totalpriceuzs");at(t),st(n),Ce(t),De(n),mt(t),ht(n),xe(!0),zt((0,h.Ts)(n,t))}else z?(0,v._P)():(0,v.YQ)()}})]})]}),(0,j.jsx)(f.Z,{isOpen:jt,body:gt,headerText:e("To'lovni amalga oshirishni tasdiqlaysizmi ?"),title:e("To'lovni amalga oshirgach bu ma`lumotlarni o`zgaritirb bo`lmaydi !"),product:ee,toggleModal:Xt,changeProduct:Yt,approveFunction:"complete"===gt?Ft:function(){It(ee)||(V([ee].concat((0,i.Z)(K))),Xt())},currency:w})]}),(0,j.jsx)(d.Z,{onError:function(){(0,v.Ug)(e("Mahsulot kodi o'qilmadi!"),"warning")},onScan:function(e){var t=(0,i.Z)(_).filter((function(t){return t.productdata.barcode===e}))[0];Pt({value:t._id,label:t.productdata.name})}})]})}}}]);
//# sourceMappingURL=6987.0ed60db8.chunk.js.map