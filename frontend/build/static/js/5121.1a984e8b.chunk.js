"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5121],{2543:function(e,t,a){a.d(t,{Z:function(){return l}});a(2791);var n=a.p+"static/media/Excel.3a5a1731280185e0e4ae99ee0a4eebfc.svg",s=a(3168),r=a(184);var l=function(e){var t=e.onClick,a=(0,s.$)(["common"]).t;return(0,r.jsxs)("button",{className:"exportButton",onClick:t,children:[a("Eksport"),(0,r.jsx)("span",{className:"btn-icon bg-white-900 p-[8px]",children:(0,r.jsx)("img",{src:n,alt:"excel icon"})})]})}},7667:function(e,t,a){a(2791);var n=a(1087),s=a(71),r=a(184);t.Z=function(e){var t=e.link;return(0,r.jsx)(n.rU,{to:t,className:"linktoback",children:(0,r.jsx)(s.dUf,{})})}},5692:function(e,t,a){a.d(t,{Z:function(){return f}});var n=a(71),s=(a(2791),a(184)),r=function(e){var t=e.onClick,a=e.text,r=e.type,l=e.active,i={cash:(0,s.jsx)(n.OR0,{className:"paymentsstyle",size:"1.3125rem"}),card:(0,s.jsx)(n.RjO,{className:"paymentsstyle",size:"1.3125rem"}),transfer:(0,s.jsx)(n.g2P,{className:"paymentsstyle",size:"1.3125rem"}),mixed:(0,s.jsx)(n.qTT,{className:"paymentsstyle",size:"1.3125rem"})};return(0,s.jsxs)("button",{onClick:function(){return t(r)},className:"salestyle ".concat(l?"bg-primary-700 text-white-900":"bg-[#E9ECEB]"),children:[i[r],a]})},l=function(e){var t=e.onClick,a=e.text,r=e.onDoubleClick;return(0,s.jsxs)("button",{onClick:t,onDoubleClick:r,className:"paymentstyle grow",children:[(0,s.jsx)(n.Q84,{className:"paystyle",size:"1.3125rem"}),a]})},i=a(9434);a(1413);var c=function(e){var t=e.value,a=e.onChange;return e.option,e.onSelect,(0,i.v9)((function(e){return e.currency})).currencyType,(0,s.jsx)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:(0,s.jsx)("input",{className:"w-full placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:"misol: 100 000 000",type:"number",value:t,onChange:function(e){a(e.target.value)},onWheel:function(e){return e.target.blur()},min:0})})},u=function(e){var t=e.value,a=e.onChange,n=e.option,r=e.onSelect,l=e.type,i=e.label;return(0,s.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,s.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[i,":"]}),(0,s.jsx)(c,{onChange:function(e){return a(e,l)},onSelect:r,value:t,option:n})]})},o=a(4952),d=function(e){var t=e.onClick;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{onClick:t,className:"exitbtn",children:(0,s.jsx)(n.Lp2,{size:"0.75rem"})})})};var m=function(e){var t=e.mix,a=e.value,n=e.onChange,r=e.label,l=e.onClose,i=e.keyInput,c=e.placeholder,u=e.type;return(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[r," :"]}),(0,s.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,s.jsx)(o.Z,{placeholder:c||"misol: 100 000 000",type:u||"number",value:a,onChange:function(e){n(e.target.value,i)}}),t&&(0,s.jsx)(d,{onClick:function(){return l(i)}})]})]})},p=a(8825),h=a(7689),x=a(2932),b=a(7584);var f=function(e){var t=e.returned,a=e.active,c=e.togglePaymentModal,o=e.type,d=void 0===o?"cash":o,f=e.cash,v=void 0===f?"":f,y=e.card,g=void 0===y?"":y,N=e.transfer,j=void 0===N?"":N,k=e.discount,C=e.discountUzs,S=e.hasDiscount,Z=e.debt,z=e.allPayment,w=e.allPaymentUzs,D=e.paid,U=void 0===D?0:D,P=e.client,T=void 0===P?"":P,q=e.onChange,E=e.onClose,I=e.changePaymentType,L=e.discountSelectOption,_=(e.handleClickDiscountBtn,e.handleChangeDiscountSelectOption),M=e.handleChangeDiscount,H=(e.exchangerate,e.handleClickPay),O=e.allMainPayment,R=e.saleComment,B=e.changeComment,Q=e.onDoubleClick,A=e.paymentUsd,F=void 0===A?"":A,X=e.debtuzs,J=e.debtType,K=e.setDebtType,Y=(0,h.TH)(),$=function(){switch(d){case"card":return(0,s.jsx)(m,{value:g,keyInput:d,onChange:q,onClose:E,label:(0,p.t)("Plastik")},"sale-card1");case"transfer":return(0,s.jsx)(m,{value:j,keyInput:d,onChange:q,onClose:E,label:(0,p.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,p.t)("USD"),key:"usd",value:F},{label:(0,p.t)("Naqd"),key:"cash",value:v},{label:(0,p.t)("Plastik"),key:"card",value:g},{label:(0,p.t)("O`tkazma"),key:"transfer",value:j}].map((function(e){return(0,s.jsx)(m,{value:e.value,keyInput:e.key,onChange:q,onClose:E,label:(0,p.t)(e.label)},"sale-".concat(e.key))}));default:return Y.pathname.includes("/kassa/debts")?"sum"===J?(0,s.jsx)(m,{value:v,onChange:q,keyInput:d,onClose:E,label:(0,p.t)("Naqd")},"sale-cash"):(0,s.jsx)(m,{value:F,onChange:q,keyInput:"usd",onClose:E,label:(0,p.t)("USD")},"sale-usd"):(0,s.jsxs)(s.Fragment,{children:["mixed"!==d&&(0,s.jsx)(m,{value:F,onChange:q,keyInput:"usd",onClose:E,label:(0,p.t)("USD")},"sale-usd"),(0,s.jsx)(m,{value:v,onChange:q,keyInput:d,onClose:E,label:(0,p.t)("Naqd")},"sale-cash")]})}},W=(0,i.v9)((function(e){return e.currency})),G=W.currencyType;return W.currency,(0,s.jsxs)("section",{className:"absolute transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 ".concat(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:c,children:[(0,s.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,p.t)("Oynani yopish uchun bu yerga bosing !")}),(0,s.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 ".concat(a?"translate-x-0":"translate-x-full"),onClick:function(e){return e.stopPropagation()},autoFocus:!0,children:[(0,s.jsxs)("div",{className:"top-payment w-full",children:[T&&(0,s.jsxs)("div",{className:"customer-head-icon",children:[(0,s.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,s.jsx)(n.J4e,{className:"mr-[0.75rem]"}),(0,s.jsxs)("span",{children:[(0,p.t)("Mijoz")," : "]})]}),(0,s.jsx)("h3",{className:"text-[0.875rem]",children:T})]}),(0,s.jsx)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:Y.pathname.includes("/kassa/debts")?"dollar"===J?z+" USD":w+" UZS":Number(O)+" UZS"}),(0,s.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&$(),(Y.pathname.includes("/kassa/debts")||Y.pathname.includes("/qarzdorlar")||Y.pathname.includes("/maxsulotlar/qabul/qabulqilish")||Y.pathname.includes("/maxsulotlar/qabul/qabullar"))&&$(),(0,s.jsx)(m,{value:R,keyInput:d,onChange:B,onClose:E,label:(0,p.t)("Izoh"),placeholder:(0,p.t)("misol: qarzga olindi"),type:"text"},"sale-card"),S&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{value:k,onChange:M,option:L,onSelect:_,label:"Chegirma USD",type:"usd"}),(0,s.jsx)(u,{value:C,onChange:M,option:L,onSelect:_,label:"Chegirma UZS",type:"uzs"})]}),Y.pathname.includes("/kassa/debts")?"sum"===J?(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[(0,p.t)("Qarzlar")," :"," "]}),(0,s.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[X," UZS"]})]}):(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[(0,p.t)("Qarzlar")," :"," "]}),(0,s.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[(0,b.Y2)(Z)," USD ",(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})]}):(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[(0,p.t)("Qarzlar")," :"," "]}),(0,s.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[Math.round(1e3*Z)/1e3," USD ",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),X," UZS"]})]}),Y.pathname.includes("/kassa/debts")&&(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[(0,p.t)("Qarz")," :"," "]}),(0,s.jsxs)("h3",{className:"text-error-500 text-[1rem] flex items-center gap-2",children:[(0,s.jsx)(x.Z,{id:"debt",onChange:function(){return K("dollar")},value:"dollar"===J,label:(0,p.t)("USD")}),(0,s.jsx)(x.Z,{id:"debt2",onChange:function(){return K("sum")},value:"sum"===J,label:(0,p.t)("UZS")})]})]}),(0,s.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,s.jsxs)("span",{className:"custom-payment-text-style",children:[z<0?(0,p.t)("Qaytarilayotgan"):(0,p.t)("To`lanayotgan")," ",":"," "]}),(0,s.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[U.toLocaleString("ru-Ru")," ",G]})]})]})]}),(0,s.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,s.jsxs)("div",{className:"custom-paymet-btn",children:[(0,s.jsx)(r,{text:(0,p.t)("Naqd"),type:"cash",active:"cash"===d,onClick:I}),(0,s.jsx)(r,{text:(0,p.t)("Plastik"),type:"card",active:"card"===d,onClick:I}),(0,s.jsx)(r,{text:(0,p.t)("O'tkazma"),type:"transfer",active:"transfer"===d,onClick:I}),!t&&(0,s.jsx)(r,{text:(0,p.t)("Aralash"),type:"mixed",active:"mixed"===d,onClick:I})]}),(0,s.jsx)(l,{text:(0,p.t)("To'lash"),onClick:H,onDoubleClick:Q})]})]})]})}},7795:function(e,t,a){a(2791);var n=a(3168),s=a(184);t.Z=function(e){var t=e.connectors,a=e.styles,r=e.currencyType,l=(0,n.$)(["common"]).t;return(0,s.jsxs)("div",{className:"productTypeBlock ".concat(a),children:[(0,s.jsxs)("div",{className:"productType",children:[l("Maxsulotlar soni:")," ",(0,s.jsx)("span",{className:"ml-[0.5rem] font-[400] text-black-900",children:t.reduce((function(e,t){return e+t.products}),0).toLocaleString("ru-RU")})]}),(0,s.jsxs)("div",{className:"productSumAll",children:[l("Jami")," :"," ",(0,s.jsxs)("span",{className:"ml-[0.5rem] font-[400] text-black-900",children:[t.length>0?"USD"===r?t.reduce((function(e,t){return e+t.totalprice}),0).toLocaleString("ru-RU"):t.reduce((function(e,t){return e+t.totalpriceuzs}),0).toLocaleString("ru-RU"):0," ",r]})]})]})}},8405:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var n=a(3433),s=a(1413),r=a(7762),l=a(9439),i=a(2791),c=a(9434),u=a(7689),o=a(2543),d=a(184),m=function(e){var t=e.products,a=e.deliver,n=e.date,s=e.pieces,r=e.onClick,l=e.debt,i=void 0===l?0:l,u=e.debtUzs,o=void 0===u?0:u,m=e.paid,p=void 0===m?0:m,h=e.paidUzs,x=void 0===h?0:h,b=e.all,f=void 0===b?0:b,v=e.allUzs,y=void 0===v?0:v,g=e.onClickPayDebt,N=e.id,j=e.time,k=(0,c.v9)((function(e){return e.currency})).currencyType;return(0,d.jsxs)("div",{onClick:r,className:"flex-[0_0_23.5%] cardStyle",children:[(0,d.jsx)("h1",{className:"headerStyle",children:a}),(0,d.jsxs)("div",{className:"text-[.875rem] mt-[1rem] text-center",children:[(0,d.jsxs)("div",{className:"numberCard",children:[(0,d.jsx)("p",{className:"paragrafCard",children:"Maxsulot turlari:"}),(0,d.jsx)("p",{children:t.toLocaleString("ru-Ru")})]}),(0,d.jsxs)("div",{className:"numberCard",children:[(0,d.jsx)("p",{className:"paragrafCardBtn",children:"Maxsulotlar soni"}),(0,d.jsx)("p",{children:s.toLocaleString("ru-Ru")})]}),(0,d.jsxs)("div",{className:"numberCard",children:[(0,d.jsx)("p",{className:"paragrafCard",children:"Sana:"}),(0,d.jsx)("p",{children:n})]}),(0,d.jsxs)("div",{className:"numberCard",children:[(0,d.jsx)("p",{className:"paragrafCard",children:"Vaqti:"}),(0,d.jsx)("p",{className:"text-warning-200",children:j})]}),(0,d.jsx)("span",{className:"block h-[1px] bg-white-400 my-[0.5rem]"}),(0,d.jsxs)("div",{className:"numberCard items-center",children:[(0,d.jsx)("p",{className:"paragrafCard",children:"Umumiy :"}),(0,d.jsxs)("span",{className:"block p-[0.1rem_0.5rem] rounded-[4px] bg-primary-700",children:["UZS"===k?y:f," ",(0,d.jsx)("span",{children:k})]})]}),(0,d.jsxs)("div",{className:"numberCard items-center",children:[(0,d.jsx)("p",{className:"paragrafCard",children:"To'langan :"}),(0,d.jsxs)("span",{className:"block p-[0.1rem_0.5rem] rounded-[4px] bg-success-500",children:["UZS"===k?x:p," ",(0,d.jsx)("span",{children:k})]})]}),0!==i&&(0,d.jsxs)("div",{className:"numberCard items-center",children:[(0,d.jsx)("p",{className:"paragrafCard",children:"Qarzlar :"}),(0,d.jsxs)("span",{className:"block p-[0.2rem_0.5rem] rounded-[4px] bg-error-500",children:["UZS"===k?o.toLocaleString("ru-Ru"):i.toLocaleString("ru-Ru")," ",(0,d.jsx)("span",{children:k})]})]}),0!==i&&(0,d.jsx)("button",{className:"mt-[1rem] p-[.5rem_1rem] rounded-[1rem] text-center bg-error-500 text-white-900 hover:bg-warning-500 duration-200 active:scale-95 shadow-[0_0_10px_rgba(255,255,255,0.2)] active:shadow-none",onClick:function(e){g({debt:i,debtUzs:o,deliver:a,id:N}),e.stopPropagation()},children:"Qarzni to'lash"})]})]})},p=a(7667),h=a(5077),x=a(7795),b=a(5121),f=a(7584),v=a(2987),y=a(763),g=a(2230),N=a(3168),j=a(5692),k=a(2106),C=a(1295),S=a(9078),Z=a(4232),z=function(){var e=(0,N.$)(["common"]).t,t=(0,c.I0)(),a=(0,c.v9)((function(e){return e.login})),z=a.market._id,w=a.user,D=(0,c.v9)((function(e){return e.incoming})),U=D.incomings,P=D.incomingscount,T=D.incomingconnectors,q=D.successUpdate,E=D.successDelete,I=D.loadingExcel,L=(0,c.v9)((function(e){return e.currency})),_=L.currencyType,M=L.currency,H=(0,u.TH)().state,O=H.date,R=H.supplier,B=new Date(new Date(O).setHours(3,0,0,0)).toISOString(),Q=new Date(new Date(O).setHours(26,59,59,59)).toISOString(),A=(0,i.useState)(0),F=(0,l.Z)(A,2),X=F[0],J=F[1],K=(0,i.useState)(10),Y=(0,l.Z)(K,2),$=Y[0],W=Y[1],G=(0,i.useState)({name:"",code:"",supplier:R}),V=(0,l.Z)(G,2),ee=V[0],te=V[1],ae=(0,i.useState)({name:"",code:"",supplier:R}),ne=(0,l.Z)(ae,2),se=ne[0],re=ne[1],le=(0,i.useState)({filter:"",sort:"",count:0}),ie=(0,l.Z)(le,2),ce=ie[0],ue=ie[1],oe=(0,i.useState)([]),de=(0,l.Z)(oe,2),me=de[0],pe=de[1],he=(0,i.useState)([]),xe=(0,l.Z)(he,2),be=xe[0],fe=xe[1],ve=(0,i.useState)([]),ye=(0,l.Z)(ve,2),ge=ye[0],Ne=ye[1],je=(0,i.useState)([]),ke=(0,l.Z)(je,2),Ce=ke[0],Se=ke[1],Ze=(0,i.useState)({}),ze=(0,l.Z)(Ze,2),we=ze[0],De=ze[1],Ue=(0,i.useState)(""),Pe=(0,l.Z)(Ue,2),Te=Pe[0],qe=Pe[1],Ee=(0,i.useState)(!1),Ie=(0,l.Z)(Ee,2),Le=Ie[0],_e=Ie[1],Me=(0,i.useState)("cash"),He=(0,l.Z)(Me,2),Oe=He[0],Re=He[1],Be=(0,i.useState)(""),Qe=(0,l.Z)(Be,2),Ae=Qe[0],Fe=Qe[1],Xe=(0,i.useState)(""),Je=(0,l.Z)(Xe,2),Ke=Je[0],Ye=Je[1],$e=(0,i.useState)(""),We=(0,l.Z)($e,2),Ge=We[0],Ve=We[1],et=(0,i.useState)(""),tt=(0,l.Z)(et,2),at=tt[0],nt=tt[1],st=(0,i.useState)(""),rt=(0,l.Z)(st,2),lt=rt[0],it=rt[1],ct=(0,i.useState)(""),ut=(0,l.Z)(ct,2),ot=ut[0],dt=ut[1],mt=(0,i.useState)(0),pt=(0,l.Z)(mt,2),ht=pt[0],xt=pt[1],bt=(0,i.useState)(0),ft=(0,l.Z)(bt,2),vt=ft[0],yt=ft[1],gt=(0,i.useState)(0),Nt=(0,l.Z)(gt,2),jt=Nt[0],kt=Nt[1],Ct=(0,i.useState)(0),St=(0,l.Z)(Ct,2),Zt=St[0],zt=St[1],wt=(0,i.useState)(0),Dt=(0,l.Z)(wt,2),Ut=Dt[0],Pt=Dt[1],Tt=(0,i.useState)(0),qt=(0,l.Z)(Tt,2),Et=qt[0],It=qt[1],Lt=(0,i.useState)("approve"),_t=(0,l.Z)(Lt,2),Mt=_t[0],Ht=_t[1],Ot=(0,i.useState)(!1),Rt=(0,l.Z)(Ot,2),Bt=Rt[0],Qt=Rt[1],At=(0,i.useState)(M),Ft=(0,l.Z)(At,2),Xt=Ft[0],Jt=Ft[1],Kt=(0,i.useState)(""),Yt=(0,l.Z)(Kt,2),$t=Yt[0],Wt=Yt[1],Gt=(0,i.useState)(""),Vt=(0,l.Z)(Gt,2),ea=Vt[0],ta=Vt[1],aa=(0,i.useState)(""),na=(0,l.Z)(aa,2),sa=na[0],ra=na[1],la=null,ia=(0,i.useCallback)((function(e){var t,a,n=[],l=(0,r.Z)(e);try{for(l.s();!(t=l.n()).done;){var i=t.value,c={_id:i._id,createdAt:new Date(i.createdAt).toLocaleDateString(),time:new Date(i.createdAt).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit",hourCycle:"h24"}),supplier:(0,s.Z)({},i.supplier),products:i.incoming.length,pieces:(a=i.incoming,a.reduce((function(e,t){return e+t.pieces}),0)),totalprice:i.total,totalpriceuzs:i.totaluzs,totalpayment:i.totalpayment,totalpaymentuzs:i.totalpaymentuzs,debt:i.debt,debtuzs:i.debtuzs};n.push(c)}}catch(u){l.e(u)}finally{l.f()}pe(n)}),[]),ca=function(){ge.some((function(e){return e.pieces===we.pieces&&e.unitprice===we.unitprice&&e.sellingprice===we.sellingprice}))?De({}):t((0,b.NP)({market:z,startDate:B,endDate:Q,product:(0,s.Z)({},we)}))},ua=(0,i.useCallback)((function(){t((0,b.eT)({market:z,beginDay:B,endDay:Q,currentPage:X,countPage:$,search:ee}))}),[t,z,B,Q,X,$,ee]),oa=(0,i.useCallback)((function(){t((0,b.FN)({market:z,beginDay:B,endDay:Q}))}),[t,z,B,Q]),da=function(){Qt(!Bt),setTimeout((function(){Ht(""),qe({})}),500)},ma=function(e){return Math.round(1e3*e)/1e3},pa=function(e){return Math.round(e)},ha=function(e){_e(e?!Le:e),Re("cash"),xt(0),yt(0)},xa=function(e,t){var a=Math.abs(jt),n=Math.abs(Zt);if("USD"===_)if("cash"===t){var s=Number(e)+Number(Ge)+Number(lt),r=Number((0,f.uX)(e,Xt))+Number(at)+Number(ot);s<=a?(Fe(e),Ye((0,f.uX)(e,Xt)),xt(ma(a-s)),yt(pa(n-r)),Pt(s),It(r)):(0,k.bH)()}else if("card"===t){var l=Number(e)+Number(Ae)+Number(lt),i=Number(Ke)+Number((0,f.uX)(e,Xt))+Number(ot);l<=a?(Ve(e),nt((0,f.uX)(e,Xt)),xt(ma(a-l)),yt(pa(n-i)),Pt(l),It(i)):(0,k.bH)()}else{var c=Number(e)+Number(Ae)+Number(Ge),u=Number(Ke)+Number(at)+Number((0,f.uX)(e,Xt));c<=a?(it(e),dt((0,f.uX)(e,Xt)),xt(ma(a-c)),yt(pa(n-u)),Pt(c),It(u)):(0,k.bH)()}else if("cash"===t){var o=Number(e)+Number(at)+Number(ot),d=Number((0,f.Nt)(e,Xt))+Number(Ge)+Number(lt);o<=n?(Ye(e),Fe((0,f.Nt)(e,Xt)),xt(ma(a-d)),yt(pa(n-o)),Pt(d),It(o)):(0,k.bH)()}else if("card"===t){var m=Number(e)+Number(Ke)+Number(ot),p=Number(Ae)+Number((0,f.Nt)(e,Xt))+Number(lt);m<=n?(Ve((0,f.Nt)(e,Xt)),nt(e),xt(ma(a-p)),yt(pa(n-m)),Pt((0,f.Nt)(m,Xt)),It(m)):(0,k.bH)()}else{var h=Number(e)+Number(Ke)+Number(at),x=Number(Ae)+Number(Ge)+Number((0,f.Nt)(e,Xt));h<=n?(it((0,f.Nt)(e,Xt)),dt(e),xt(ma(a-x)),yt(pa(n-h)),Pt(x),It(h)):(0,k.bH)()}},ba=function(e){var t=e.debt,a=e.debtUzs;ta(e.deliver),ra(e.id),kt(t),zt(a),Fe(t),Ye(a),Pt(t),It(a),_e(!0),Jt(pa(a/t)),_e(!0)},fa=function(){var e=function(e){return e<0&&e||-1*e},a={payment:{payment:Number(jt<0?e(Ae):Ae)+Number(jt<0?e(Ge):Ge)+Number(jt<0?e(lt):lt),paymentuzs:Number(jt<0?e(Ke):Ke)+Number(jt<0?e(at):at)+Number(jt<0?lt<0&&e(ot):ot),type:Oe,cash:Number(jt<0?e(Ae):Ae),cashuzs:Number(Zt<0?e(Ke):Ke),card:Number(jt<0?e(Ge):Ge),carduzs:Number(jt<0?e(at):at),transfer:Number(jt<0?e(lt):lt),transferuzs:Number(jt<0?e(ot):ot),comment:$t},user:w._id,incomingconnectorid:sa};t((0,b.Yt)(a)).then((function(e){e.error||(t((0,b.FN)({market:z,beginDay:B,endDay:Q})),Qt(!1),Ht(""),ha())}))};(0,i.useEffect)((function(){ua()}),[ua]),(0,i.useEffect)((function(){q&&(ua(),oa(),De({}),t((0,b.qd)()))}),[t,ua,oa,q]),(0,i.useEffect)((function(){E&&(ua(),t((0,b.LG)()))}),[t,ua,E]),(0,i.useEffect)((function(){oa()}),[oa]),(0,i.useEffect)((function(){ia(T)}),[T,ia]),(0,i.useEffect)((function(){!function(e){var t=(0,y.map)(e,(function(e){return(0,s.Z)((0,s.Z)({},e),{},{sellingprice:e.product.price.sellingprice,sellingpriceuzs:e.product.price.sellingpriceuzs})}));fe(t),Ne(t),Se(t)}(U)}),[U]);var va=[{title:"\u2116"},{title:e("Yetkazuvchi"),styles:"w-[10%]"},{title:e("Kodi"),filter:"product.productdata.code",styles:"w-[7%]"},{title:e("Nomi"),filter:"product.productdata.name"},{title:e("Soni"),styles:"w-[10%]"},{title:e("Kelish"),styles:"w-[10%]"},{title:e("Jami"),styles:"w-[15%]"},{title:e("Sotish"),styles:"w-[10%]"},{title:"",styles:"w-[5%]"}];return(0,d.jsxs)("div",{className:"relative grow overflow-hidden",children:[I&&(0,d.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,d.jsx)(Z.Z,{})}),(0,d.jsx)(j.Z,{returned:!0,type:Oe,active:Le,togglePaymentModal:ha,changePaymentType:function(e){if(Oe!==e)switch(Re(e),e){case"cash":Fe(jt),Ye(Zt),Ve(""),nt(""),it(""),dt(""),Pt(jt),It(Zt),xt(0),yt(0);break;case"card":Ve(jt),nt(Zt),Fe(""),Ye(""),it(""),dt(""),Pt(jt),It(Zt),xt(0),yt(0);break;case"transfer":it(jt),dt(Zt),Fe(""),Ye(""),Ve(""),nt(""),Pt(jt),It(Zt),xt(0),yt(0);break;default:Fe(""),Ye(""),Ve(""),nt(""),it(""),dt(""),Pt(0),It(0),xt(jt),yt(Zt)}},onChange:function(e,t){xa(e,t)},client:ea,allPayment:"USD"===_?jt:Zt,card:"USD"===_?Ge:at,cash:"USD"===_?Ae:Ke,debt:"USD"===_?ht:vt,hasDiscount:!1,transfer:"USD"===_?lt:ot,paid:"USD"===_?Ut:Et,handleClickPay:function(){null===la&&(la=window.setTimeout((function(){la=null,Ht("complete"),Qt(!0)}),300))},changeComment:function(e){Wt(e)},saleComment:$t,onDoubleClick:function(){window.clearTimeout(la),la=null,fa()}}),(0,d.jsxs)("div",{className:"absolute left-0 right-0 top-0 bottom-0 overflow-auto",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mainPadding",children:[(0,d.jsx)(p.Z,{link:"/maxsulotlar/qabul/qabullar"}),(0,d.jsx)(x.Z,{connectors:me,currencyType:_})]}),(0,d.jsx)("div",{className:"flex flex-wrap gap-[2.5rem_2%] mainPadding",children:me.length>0&&(0,y.map)(me,(function(e){return(0,d.jsx)(m,{date:e.createdAt,time:e.time,deliver:e.supplier.name,products:e.products,pieces:e.pieces,debt:e.debt,debtUzs:e.debtuzs,paid:e.totalpayment,paidUzs:e.totalpaymentuzs,all:e.totalprice,allUzs:e.totalpriceuzs,onClickPayDebt:ba,id:e._id,onClick:function(){return function(e){var t=(0,y.filter)(be,(function(t){return t.incomingconnector===e}));Ne(t),Se(t)}(e._id)}},(0,y.uniqueId)("card"))}))}),ge.length?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"mainPadding flex items-center justify-between",children:[(0,d.jsx)(o.Z,{onClick:function(){var a="Maxsulotlar-qabul-qabullar - ".concat((new Date).toLocaleDateString()),n=["\u2116",e("Yetkazuvchi"),e("Kodi"),e("Nomi"),e("Soni"),e("Kelish UZS"),e("Kelish USD"),e("Jami UZS"),e("Jami USD")],s={beginDay:B,endDay:Q};t((0,b.vi)(s)).then((function(e){var t=e.error,s=e.payload;if(!t)if((null===s||void 0===s?void 0:s.length)>0){var r=(0,y.map)(s,(function(e,t){var a,n,s,r,l,i;return{nth:t+1,supplier:(null===e||void 0===e||null===(a=e.supplier)||void 0===a?void 0:a.name)||"",code:(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(s=n.productdata)||void 0===s?void 0:s.code)||"",name:(null===e||void 0===e||null===(r=e.product)||void 0===r||null===(l=r.productdata)||void 0===l?void 0:l.name)||"",count:(null===e||void 0===e?void 0:e.pieces)+" "+(null===e||void 0===e||null===(i=e.unit)||void 0===i?void 0:i.name)||"",unit:(null===e||void 0===e?void 0:e.unitpriceuzs)||"",unitusd:(null===e||void 0===e?void 0:e.unitprice)||"",all:(null===e||void 0===e?void 0:e.totalpriceuzs)||"",allusd:(null===e||void 0===e?void 0:e.totalprice)||""}}));(0,f.rD)(r,a,n)}else(0,k.Ug)("Jadvalda ma'lumot mavjud emas !","warning")}))}}),(0,d.jsx)("span",{children:"Ro`yxat"}),(0,d.jsx)(h.Z,{currentPage:X,setCurrentPage:J,countPage:$,totalDatas:P})]}),(0,d.jsx)(v.Z,{filterBy:["total","code","name"],filterByName:function(e){var t=e.target.value.toLowerCase();Ne((0,n.Z)((0,y.filter)((0,n.Z)(Ce),(function(e){return e.product.productdata.name.toLowerCase().includes(t)})))),re((0,s.Z)((0,s.Z)({},se),{},{name:t}))},filterByTotal:function(e){return W(e.value)},filterByCode:function(e){var t=e.target.value.toLowerCase();Ne((0,n.Z)((0,y.filter)((0,n.Z)(Ce),(function(e){return e.product.productdata.code.includes(t)})))),re((0,s.Z)((0,s.Z)({},se),{},{code:t}))},filterByCodeAndNameAndCategoryWhenPressEnter:function(e){"Enter"===e.key&&te(se)}}),(0,d.jsx)("div",{className:"tableContainerPadding",children:(0,d.jsx)(S.Z,{page:"incomings",headers:va,data:ge,currentPage:X,countPage:$,currency:_,editedIncoming:we,Edit:function(e){De(e)},changeHandler:function(e,t){var a=Number(e.target.value),n=(0,s.Z)({},we),r=function(e){return t===e},l="USD"===_?a:(0,f.Nt)(a,M),i="UZS"===_?a:(0,f.uX)(a,M);r("pieces")&&(n.pieces=a,n.totalprice=a*n.unitprice,n.totalpriceuzs=a*n.unitpriceuzs),r("unitprice")&&(n.unitprice=l,n.unitpriceuzs=i,n.totalprice=l*n.pieces,n.totalpriceuzs=i*n.pieces),r("sellingprice")&&(n.sellingprice=l,n.sellingpriceuzs=i),De(n)},saveEditIncoming:ca,Delete:function(e){return function(e){qe(e),Qt(!0),Ht("approve")}(e)},Sort:function(e){if(e===ce.filter)switch(ce.count){case 1:ue({filter:e,sort:"1",count:2}),(0,f.ki)(ge,Ne,e,1,Ce);break;case 2:ue({filter:e,sort:"",count:0}),(0,f.ki)(ge,Ne,e,"",Ce);break;default:ue({filter:e,sort:"-1",count:1}),(0,f.ki)(ge,Ne,e,-1,Ce)}else ue({filter:e,sort:"-1",count:1}),(0,f.ki)(ge,Ne,e,-1,Ce)},onKeyUp:function(e){"Enter"===e.key&&ca()},sortItem:ce})})]}):(0,d.jsx)(C.Z,{text:"Qabullar mavjud emas..."}),(0,d.jsx)(g.Z,{body:Mt,isOpen:Bt,headerText:e("complete"===Mt?"To'lovni amalga oshirishni tasdiqlaysizmi ?":"Mahsulotni o`chirishni tasdiqlaysizmi?"),title:e("complete"===Mt?"To'lovni amalga oshirgach bu ma`lumotlarni o`zgaritirb bo`lmaydi !":"O`chirilgan mahsulotni tiklashning imkoni mavjud emas!"),approveFunction:"complete"===Mt?fa:function(){t((0,b.H4)({market:z,beginDay:B,endDay:Q,product:(0,s.Z)({},Te)})),da()},toggleModal:da})]})]})}}}]);
//# sourceMappingURL=5121.1a984e8b.chunk.js.map