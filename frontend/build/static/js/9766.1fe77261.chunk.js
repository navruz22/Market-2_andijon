"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9766],{3082:function(t,e,n){n.r(e);var a=n(9439),i=n(2791),r=n(4045),o=n(4339),c=n(5077),s=n(2987),l=n(9434),u=n(2106),d=n(4232),f=n(1295),g=n(6408),v=n(5650),p=n(2230),h=n(3168),x=n(7584),D=n(184);e.default=function(){var t=(0,h.$)(["common"]).t,e=[{styles:"w-[10%] text-start",title:"\u2116"},{styles:"w-[10%] text-start",filter:"createdAt",title:t("Sana")},{styles:"w-[10%] text-start",filter:"id",title:t("ID")},{styles:"text-start",title:t("Maxsulotlar")},{styles:"w-[10%]",title:t("Holati")},{styles:"w-[10%]",title:" "}],n=(0,l.I0)(),y=(0,l.v9)((function(t){return t.inventoryConnectors})),S=y.connectors,m=y.errorConnectors,w=y.clearErrorConnectors,Z=y.loading,j=y.dataLoading,k=y.total,b=(0,i.useState)({filter:"",sort:"",count:0}),P=(0,a.Z)(b,2),I=P[0],_=P[1],C=(0,i.useState)(S),E=(0,a.Z)(C,2),z=E[0],F=E[1],N=(0,i.useState)(S),M=(0,a.Z)(N,2),U=M[0],q=M[1],O=(0,i.useState)("10"),A=(0,a.Z)(O,2),H=A[0],K=A[1],L=(0,i.useState)(0),B=(0,a.Z)(L,2),Y=B[0],T=B[1],$=(0,i.useState)(k),G=(0,a.Z)($,2),J=G[0],Q=G[1],R=(0,i.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),1)),V=(0,a.Z)(R,2),W=V[0],X=V[1],tt=(0,i.useState)(new Date),et=(0,a.Z)(tt,2),nt=et[0],at=et[1],it=(0,i.useState)(null),rt=(0,a.Z)(it,2),ot=rt[0],ct=rt[1],st=(0,i.useState)(!1),lt=(0,a.Z)(st,2),ut=lt[0],dt=lt[1],ft=["\u2116",t("Sana"),t("Kodi"),t("Maxsulot"),t("Dastlabki"),t("Sanoq"),t("Farqi"),t("Farqi USD"),t("Farqi UZS")],gt=(0,i.useCallback)((function(e){var n=function(t){var e=Object.keys(t[0]),n=e.reduce((function(t,e){return t>e.length?t:e.length}),0);return e.map((function(t){return{wch:n}}))}(e),a=r.P6.book_new(),i=r.P6.json_to_sheet([]);i["!cols"]=n,r.P6.sheet_add_aoa(i,[ft]),r.P6.sheet_add_json(i,e,{origin:"A2",skipHeader:!0}),r.P6.book_append_sheet(a,i,"Inventorizatsiyalar"),r.NC(a,"".concat(t("Invertarizatsiyalar"),"-").concat((new Date).toLocaleDateString(),".xlsx"))}),[ft,t]);return(0,i.useEffect)((function(){q(S),F(S)}),[S]),(0,i.useEffect)((function(){m&&((0,u.Ug)(m,"error"),n(w()))}),[n,w,m]),(0,i.useEffect)((function(){var t={currentPage:Y,countPage:H,startDate:new Date(new Date(W).getFullYear(),new Date(W).getMonth(),new Date(W).getDate()).toISOString(),endDate:nt.toISOString()};n((0,v.C1)(t))}),[Y,H,n,W,nt]),(0,i.useEffect)((function(){q(S)}),[S]),(0,i.useEffect)((function(){Q(k)}),[k]),(0,D.jsxs)(g.E.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,D.jsx)(p.Z,{printedInventories:ot,body:"checkInventory",isOpen:ut,toggleModal:function(){dt(!ut),ct(null)}}),j&&(0,D.jsx)("div",{className:"fixed z-[50] backdrop-blur-[2px] left-0 right-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,D.jsx)(d.Z,{})}),(0,D.jsxs)("div",{className:"inventoriesHead mainPadding",children:[(0,D.jsx)("div",{className:"font-[400] text-[1.25rem] text-blue-900",children:t("Inventarizatsiyalar")}),(0,D.jsx)("div",{children:0!==J&&(0,D.jsx)(c.Z,{countPage:Number(H),totalDatas:J,currentPage:Y,setCurrentPage:T})})]}),(0,D.jsx)(s.Z,{filterBy:["total","startDate","endDate"],filterByTotal:function(t){var e=t.value;K(e),T(0)},setEndDate:at,setStartDate:X,startDate:W,endDate:nt}),(0,D.jsx)("div",{className:"tableContainerPadding",children:Z?(0,D.jsx)(d.Z,{}):0===U.length?(0,D.jsx)(f.Z,{text:"Invnentarizatsiyalar mavjud emas!"}):(0,D.jsx)(o.Z,{isDisabled:j,page:"inventories",currentPage:Y,countPage:H,data:U,headers:e,Excel:function(t,e){var a={id:t._id};n((0,v.FK)(a)).then((function(t){var n=t.payload.inventories;if(n.length>0){var a=n.map((function(t,e){return{nth:e+1,data:new Date(null===t||void 0===t?void 0:t.createdAt).toLocaleDateString(),code:t.productdata.code,name:t.productdata.name,initial:t.productcount,count:t.inventorycount,difference:t.inventorycount-t.productcount,differenceUSD:t.inventorycount*t.price.incomingprice-t.productcount*t.price.incomingprice,differenceUZS:t.inventorycount*t.price.incomingpriceuzs-t.productcount*t.price.incomingpriceuzs}}));gt(a,e)}}))},Print:function(t){var e={id:t._id};n((0,v.FK)(e)).then((function(t){var e=t.payload.inventories;e.length>0&&ct(e)})),dt(!0)},Sort:function(t){if(t===I.filter)switch(I.count){case 1:_({filter:t,sort:"1",count:2}),(0,x.ki)(U,q,t,1,z);break;case 2:_({filter:t,sort:"",count:0}),(0,x.ki)(U,q,t,"",z);break;default:_({filter:t,sort:"-1",count:1}),(0,x.ki)(U,q,t,-1,z)}else _({filter:t,sort:"-1",count:1}),(0,x.ki)(U,q,t,-1,z)},sortItem:I})})]},"content")}}}]);
//# sourceMappingURL=9766.1fe77261.chunk.js.map