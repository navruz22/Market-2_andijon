{"version":3,"file":"static/js/2987.ef376db7.chunk.js","mappings":"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","sources":["Components/LinkToBack/LinkToBack.js","Pages/Seller/SellersReport.js"],"sourcesContent":["import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport {IoChevronBack} from 'react-icons/io5'\r\n\r\nconst LinkToBack = ({link}) => {\r\n    return (\r\n        <Link to={link} className='linktoback'>\r\n            <IoChevronBack />\r\n        </Link>\r\n    )\r\n}\r\n\r\nexport default LinkToBack\r\n","import React, {useEffect, useState} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {useParams} from 'react-router-dom'\r\nimport LinkToBack from '../../Components/LinkToBack/LinkToBack'\r\nimport Pagination from '../../Components/Pagination/Pagination'\r\nimport SearchForm from '../../Components/SearchForm/SearchForm'\r\nimport Table from '../../Components/Table/Table'\r\nimport {getSellerReports} from './sellerSlice'\r\nimport {filter, reduce} from 'lodash'\r\nimport UniversalModal from '../../Components/Modal/UniversalModal.js'\r\nconst SellersReport = () => {\r\n    const {id} = useParams()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const headers = [\r\n        {\r\n            title: 'â„–',\r\n        },\r\n        {\r\n            title: 'Sana',\r\n            filter: 'createdAt',\r\n        },\r\n        {\r\n            title: 'ID',\r\n            filter: 'id',\r\n        },\r\n        {\r\n            title: 'Mijoz',\r\n        },\r\n        {\r\n            title: 'Jami',\r\n        },\r\n        {\r\n            title: 'Chegirma',\r\n        },\r\n        {\r\n            title: 'Qarz',\r\n        },\r\n        {\r\n            title: 'Izoh',\r\n        },\r\n        {title: ''},\r\n    ]\r\n\r\n    const headersInfo = [\r\n        {\r\n            title: 'Sotuvlar soni',\r\n        },\r\n        {\r\n            title: 'Sotilgan mahsulotlar',\r\n        },\r\n        {\r\n            title: 'Jami tushum',\r\n        },\r\n    ]\r\n\r\n    const {currencyType} = useSelector((state) => state.currency)\r\n    const {sellersreport, count} = useSelector((state) => state.sellers)\r\n\r\n    const [data, setData] = useState([])\r\n    const [currentPage, setCurrentPage] = useState(0)\r\n    const [countPage, setCountPage] = useState(10)\r\n    const [search, setSearch] = useState({\r\n        id: '',\r\n        client: '',\r\n    })\r\n    const [sendingSearch, setSendingSearch] = useState({\r\n        id: '',\r\n        client: '',\r\n    })\r\n    const [printedSelling, setPrintedSelling] = useState(null)\r\n    const [modalVisible, setModalVisible] = useState(false)\r\n    const [generalReport, setGeneralreport] = useState({})\r\n    const [startDate, setStartDate] = useState(\r\n        new Date(\r\n            new Date().getFullYear(),\r\n            new Date().getMonth(),\r\n            new Date().getDate()\r\n        )\r\n    )\r\n    const [endDate, setEndDate] = useState(new Date())\r\n\r\n    const toggleModal = () => {\r\n        setModalVisible(!modalVisible)\r\n        setPrintedSelling(null)\r\n    }\r\n\r\n    const handleClickPrint = (selling) => {\r\n        setPrintedSelling(selling)\r\n        setModalVisible(true)\r\n    }\r\n    // handle change client and id\r\n    const handleChangeId = (e) => {\r\n        const val = e.target.value\r\n        const valForSearch = val.replace(/\\s+/g, ' ').trim()\r\n        const filteredProducts = filter(sellersreport, (selling) => {\r\n            return selling.id.includes(valForSearch)\r\n        })\r\n        setData(filteredProducts)\r\n        setSearch({\r\n            ...search,\r\n            id: valForSearch,\r\n        })\r\n    }\r\n    const handleChangeClient = (e) => {\r\n        const val = e.target.value.toLowerCase()\r\n        const filteredProducts = filter(sellersreport, (selling) => {\r\n            return selling?.client?.name\r\n                ? selling?.client?.name.toLowerCase().includes(val)\r\n                : selling\r\n        })\r\n        setData(filteredProducts)\r\n        setSearch({\r\n            ...search,\r\n            client: val,\r\n        })\r\n    }\r\n    const handleChangeIdAndClientWhenPressEnter = (e) => {\r\n        if (e.key === 'Enter') {\r\n            setCurrentPage(0)\r\n            setSendingSearch(search)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        let body = {\r\n            startDate,\r\n            endDate,\r\n            currentPage,\r\n            countPage,\r\n            search: sendingSearch,\r\n            seller: id,\r\n        }\r\n        dispatch(getSellerReports(body))\r\n    }, [\r\n        dispatch,\r\n        startDate,\r\n        endDate,\r\n        currentPage,\r\n        countPage,\r\n        id,\r\n        sendingSearch,\r\n    ])\r\n\r\n    useEffect(() => {\r\n        setData(sellersreport)\r\n        if (sellersreport.length > 0) {\r\n            const totalprice = reduce(\r\n                sellersreport,\r\n                (summ, sale) =>\r\n                    summ +\r\n                    reduce(\r\n                        sale.payments,\r\n                        (summ, payment) => summ + payment.payment,\r\n                        0\r\n                    ),\r\n                0\r\n            )\r\n            const totalpriceuzs = reduce(\r\n                sellersreport,\r\n                (summ, sale) =>\r\n                    summ +\r\n                    reduce(\r\n                        sale.payments,\r\n                        (summ, payment) => summ + payment.paymentuzs,\r\n                        0\r\n                    ),\r\n                0\r\n            )\r\n\r\n            const saleProducts = reduce(\r\n                sellersreport,\r\n                (summ, sale) => summ + sale.products.length,\r\n                0\r\n            )\r\n\r\n            setGeneralreport({\r\n                salesCount: sellersreport.length,\r\n                totalprice,\r\n                totalpriceuzs,\r\n                saleProducts,\r\n            })\r\n        }\r\n    }, [sellersreport])\r\n    return (\r\n        <div className='w-full'>\r\n            <UniversalModal\r\n                printedSelling={printedSelling}\r\n                currency={currencyType}\r\n                body={'allChecks'}\r\n                isOpen={modalVisible}\r\n                toggleModal={toggleModal}\r\n            />\r\n            <div className='flex items-center justify-between mainPadding'>\r\n                <LinkToBack link={'/hamkorlar/sotuvchilar'} />\r\n            </div>\r\n            <div className=''>\r\n                <Pagination\r\n                    countPage={countPage}\r\n                    totalDatas={count || 1}\r\n                    currentPage={currentPage}\r\n                    setCurrentPage={setCurrentPage}\r\n                />\r\n            </div>\r\n            <div className='flex w-full'>\r\n                <SearchForm\r\n                    filterBy={[\r\n                        'total',\r\n                        'startDate',\r\n                        'endDate',\r\n                        'id',\r\n                        'clientName',\r\n                    ]}\r\n                    filterByTotal={(e) => setCountPage(e.value)}\r\n                    startDate={startDate}\r\n                    setStartDate={setStartDate}\r\n                    endDate={endDate}\r\n                    setEndDate={setEndDate}\r\n                    searchById={search.id}\r\n                    searchByClientName={search.client}\r\n                    filterByClientName={handleChangeClient}\r\n                    filterById={handleChangeId}\r\n                    filterByClientNameWhenPressEnter={\r\n                        handleChangeIdAndClientWhenPressEnter\r\n                    }\r\n                    filterByIdWhenPressEnter={\r\n                        handleChangeIdAndClientWhenPressEnter\r\n                    }\r\n                />\r\n            </div>\r\n            {data.length > 0 && (\r\n                <>\r\n                    <div className='tableContainerPadding'>\r\n                        <Table\r\n                            data={generalReport}\r\n                            currency={currencyType}\r\n                            page={'generalreport'}\r\n                            headers={headersInfo}\r\n                        />\r\n                    </div>\r\n                    <div className='tableContainerPadding'>\r\n                        <Table\r\n                            data={data}\r\n                            currentPage={currentPage}\r\n                            currency={currencyType}\r\n                            countPage={countPage}\r\n                            page={'saleslist'}\r\n                            headers={headers}\r\n                            sellers={true}\r\n                            Print={handleClickPrint}\r\n                        />\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SellersReport\r\n"],"names":["_ref","link","_jsx","Link","to","className","children","IoChevronBack","id","useParams","dispatch","useDispatch","currencyType","useSelector","state","currency","_useSelector2","sellers","sellersreport","count","_useState","useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","currentPage","setCurrentPage","_useState5","_useState6","countPage","setCountPage","_useState7","client","_useState8","search","setSearch","_useState9","_useState10","sendingSearch","setSendingSearch","_useState11","_useState12","printedSelling","setPrintedSelling","_useState13","_useState14","modalVisible","setModalVisible","_useState15","_useState16","generalReport","setGeneralreport","_useState17","Date","getFullYear","getMonth","getDate","_useState18","startDate","setStartDate","_useState19","_useState20","endDate","setEndDate","handleChangeIdAndClientWhenPressEnter","e","key","useEffect","body","seller","getSellerReports","length","totalprice","reduce","summ","sale","payments","payment","totalpriceuzs","paymentuzs","saleProducts","products","salesCount","_jsxs","UniversalModal","isOpen","toggleModal","LinkToBack","Pagination","totalDatas","SearchForm","filterBy","filterByTotal","value","searchById","searchByClientName","filterByClientName","val","target","toLowerCase","filteredProducts","filter","selling","_selling$client","_selling$client2","name","includes","_objectSpread","filterById","valForSearch","replace","trim","filterByClientNameWhenPressEnter","filterByIdWhenPressEnter","_Fragment","Table","page","headers","title","Print"],"sourceRoot":""}