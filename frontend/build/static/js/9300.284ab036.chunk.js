"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9300],{2543:function(e,t,a){a.d(t,{Z:function(){return i}});a(2791);var r=a.p+"static/media/Excel.3a5a1731280185e0e4ae99ee0a4eebfc.svg",n=a(3168),o=a(184);var i=function(e){var t=e.onClick,a=(0,n.$)(["common"]).t;return(0,o.jsxs)("button",{className:"exportButton",onClick:t,children:[a("Eksport"),(0,o.jsx)("span",{className:"btn-icon bg-white-900 p-[8px]",children:(0,o.jsx)("img",{src:r,alt:"excel icon"})})]})}},830:function(e,t,a){a(2791);var r=a(71),n=a(3168),o=a(184);t.Z=function(e){var t=e.readExcel,a=(0,n.$)(["common"]).t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{children:(0,o.jsxs)("label",{htmlFor:"import-field",className:"importButton",children:[a("Import"),(0,o.jsx)("span",{className:"btn-icon bg-white-900 p-[8px] text-primary-800",children:(0,o.jsx)(r.hOP,{size:"1rem"})})]})}),(0,o.jsx)("input",{type:"file",className:"hidden",id:"import-field",onClick:function(e){return e.target.value=null},onChange:function(e){var a=e.target.files[0];t(a)}})]})}},3114:function(e,t,a){a.r(t);var r=a(3433),n=a(9439),o=a(8063),i=a(2791),s=a(7799),l=a(2106),c=a(2543),u=a(830),d=a(5077),m=a(9434),f=a(9078),g=a(2987),h=a(8498),x=a(4232),p=a(1295),v=a(7129),b=a(7584),j=a(2230),Z=a(4045),S=a(763),k=a(184);t.default=function(){var e=(0,m.I0)(),t=(0,m.v9)((function(e){return e.barcode})),a=t.products,P=t.searchedProducts,y=t.totalSearched,C=t.total,N=t.loadingGetAll,E=(0,i.useState)(a),w=(0,n.Z)(E,2),B=w[0],D=w[1],M=(0,i.useState)(C),_=(0,n.Z)(M,2),F=_[0],U=_[1],A=(0,i.useState)(""),T=(0,n.Z)(A,2),q=T[0],z=T[1],O=(0,i.useState)(""),W=(0,n.Z)(O,2),$=W[0],J=W[1],K=(0,i.useState)(""),I=(0,n.Z)(K,2),L=I[0],Q=I[1],R=(0,i.useState)(""),G=(0,n.Z)(R,2),X=G[0],H=G[1],V=(0,i.useState)(0),Y=(0,n.Z)(V,2),ee=Y[0],te=Y[1],ae=(0,i.useState)(10),re=(0,n.Z)(ae,2),ne=re[0],oe=re[1],ie=(0,i.useState)(null),se=(0,n.Z)(ie,2),le=se[0],ce=se[1],ue=(0,i.useState)(null),de=(0,n.Z)(ue,2),me=de[0],fe=de[1],ge=(0,i.useState)(!1),he=(0,n.Z)(ge,2),xe=he[0],pe=he[1],ve=(0,i.useState)(!1),be=(0,n.Z)(ve,2),je=be[0],Ze=be[1],Se=(0,i.useState)(null),ke=(0,n.Z)(Se,2),Pe=ke[0],ye=ke[1],Ce=(0,i.useState)([]),Ne=(0,n.Z)(Ce,2),Ee=Ne[0],we=Ne[1],Be=(0,i.useState)([]),De=(0,n.Z)(Be,2),Me=De[0],_e=De[1],Fe=function(){Ze(!je),ye(null),setTimeout((function(){we([])}),500)},Ue=function(e){e&&(e.autofocus=!0),e&&e.preventDefault(),z(""),J(""),pe(!1)},Ae=function(t){if("Enter"===t.key){te(0);var a={currentPage:0,countPage:ne,search:{code:L.replace(/\s+/g," ").trim(),name:X.replace(/\s+/g," ").trim()}};e((0,h._Q)(a))}};return(0,i.useEffect)((function(){D(a)}),[a]),(0,i.useEffect)((function(){U(C)}),[C]),(0,i.useEffect)((function(){var t={currentPage:ee,countPage:ne,search:{code:"",name:""}};e((0,h.$5)(t))}),[e,ee,ne]),(0,k.jsxs)("section",{children:[(0,k.jsx)(j.Z,{body:Pe,title:"Agar shtrix kodni o'chirsangiz uni qayta tiklab bo'lmaydi !",headerText:"Shtrix kodni o'chirishni tasdiqlaysizmi ?",approveFunction:"approve"===Pe?function(){var t={_id:me._id,currentPage:ee,countPage:ne,search:{code:L.replace(/\s+/g," ").trim(),name:X.replace(/\s+/g," ").trim()}};e((0,h.JX)(t)).then((function(e){e.error||(Fe(),fe(null))}))}:function(){var t=Object.keys(Ee[0]),a=(0,S.map)(Me,(function(e){var t={};for(var a in e)t[a]=e[a].toString().replace(/\s+/g," ").trim();return t}));a.forEach((function(e){return t.forEach((function(t){return e.hasOwnProperty(t)&&delete e[t]}))}));var n={barcodes:(0,r.Z)(a),countPage:ne,currentPage:ee,search:{code:L.replace(/\s+/g," ").trim(),name:X.replace(/\s+/g," ").trim()}};e((0,h.KF)(n)).then((function(e){e.error||(Fe(),_e([]),we([]))}))},toggleModal:Fe,isOpen:je,excelData:Ee,headers:[{name:"Shtrix kodi",value:"barcode"},{name:"Maxsulot name",value:"name"}],createdData:Me,setCreatedData:_e}),(0,k.jsxs)("form",{className:"flex items-end gap-[1.25rem] bg-background mainPadding transition ease-linear duration-200 ".concat(xe?"stickyForm":""),children:[(0,k.jsx)(o.Z,{type:"number",label:"Shtix kodi",border:!0,maxWidth:"grow",placeholder:"Enter barcode",value:q,onChange:function(e){return z(e.target.value)}}),(0,k.jsx)(o.Z,{type:"text",label:"Maxsulot nomi",placeholder:"Enter name",border:!0,maxWidth:"grow",value:$,onChange:function(e){return J(e.target.value)}}),(0,k.jsxs)("div",{className:"flex min-w-[25rem] gap-[1.25rem]",children:[(0,k.jsx)(s.Z,{add:!xe,edit:xe,text:xe?"Saqlash":"Qo'shish",onClick:xe?function(t){t.preventDefault(),t.autofocus=!0;var a=(0,b.lj)([{value:q,message:"Shtrix kod"},{value:$,message:"Maxsulot nomi"}]),r=a.failed,n=a.message;if(r)(0,l.pM)(n);else{var o={currentPage:ee,countPage:ne,barcode:{_id:le._id,barcode:q,name:$.replace(/\s+/g," ").trim()},search:{code:L.replace(/\s+/g," ").trim(),name:X.replace(/\s+/g," ").trim()}};e((0,h.p)(o)).then((function(e){e.error||(Ue(),ce(null))}))}}:function(t){t.preventDefault(),t.autofocus=!0;var a=(0,b.lj)([{value:q,message:"Shtrix kod"},{value:$,message:"Maxsulot nomi"}]),r=a.failed,n=a.message;if(r)(0,l.pM)(n);else{var o={currentPage:ee,countPage:ne,barcode:{barcode:q,name:$.replace(/\s+/g," ").trim()},search:{code:L.replace(/\s+/g," ").trim(),name:X.replace(/\s+/g," ").trim()}};e((0,h.T_)(o)).then((function(e){e.error||Ue()}))}}}),(0,k.jsx)(s.Z,{text:"Tozalash",onClick:Ue})]})]}),(0,k.jsxs)("div",{className:"flex justify-between items-center mainPadding",children:[(0,k.jsxs)("div",{className:"flex gap-[1.5rem]",children:[(0,k.jsx)(c.Z,{onClick:function(){if((null===a||void 0===a?void 0:a.length)>0){var e=(0,S.map)(a,(function(e,t){return{nth:t+1,code:(null===e||void 0===e?void 0:e.barcode)||"",name:(null===e||void 0===e?void 0:e.name)||""}}));(0,b.rD)(e,"Shtrix Kodlar",["\u2116","Shtix kodi","Maxsulot Nomi"])}else(0,l.Ug)("Jadvalda ma'lumot mavjud emas !","warning")}}),(0,k.jsx)(u.Z,{readExcel:function(e){["xls","xlsx"].includes(e.name.split(".").pop())?new Promise((function(t,a){var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(e){var a=e.target.result,r=Z.ij(a,{type:"buffer"}),n=r.SheetNames[0],o=r.Sheets[n],i=Z.P6.sheet_to_json(o);t(i)},r.onerror=function(e){(0,l.Ug)("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430","error"),a(e)}})).then((function(e){e.length>0?(we(e),ye("import"),Ze(!0)):(0,l.Ug)("Jadvalda ma`lumot mavjud emas","error")})):(0,l.Ug)("Fayl formati noto'g'ri","error")}})]}),(0,k.jsx)("h3",{className:"text-blue-900 text-[xl] leading-[1.875rem]",children:"Maxsulotlar"}),(0!==F||0!==y)&&(0,k.jsx)(d.Z,{countPage:Number(ne),totalDatas:y||F,currentPage:ee,setCurrentPage:te})]}),(0,k.jsx)(g.Z,{filterBy:["total","barcode","name"],filterByTotal:function(e){var t=e.value;oe(t),te(0)},filterByName:function(t){var r=t.target.value,n=r.toLowerCase().replace(/\s+/g," ").trim();if(H(r),(P.length>0||y>0)&&e((0,h.rk)()),""===n)D(a),U(C);else{var o=(0,S.filter)(a,(function(e){return e.name.toLowerCase().includes(n)}));D(o),U(o.length)}},filterByBarcode:function(t){var r=t.target.value,n=r.replace(/\s+/g," ").trim();if(Q(r),(P.length>0||y>0)&&e((0,h.rk)()),""===n)D(a),U(C);else{var o=(0,S.filter)(a,(function(e){return e.barcode.includes(n)}));D(o),U(o.length)}},barcode:L,searchByName:X,filterByCodeAndNameAndCategoryWhenPressEnter:Ae,filterByBarcodeWhenPressEnter:Ae}),(0,k.jsx)("div",{className:"tableContainerPadding",children:N?(0,k.jsx)(x.Z,{}):0===B.length&&0===P.length?(0,k.jsx)(p.Z,{text:"Maxsulot mavjud emas"}):(0,k.jsx)(f.Z,{headers:[{title:"\u2116"},{title:"Barcode"},{title:"Name"},{title:""}],data:P.length>0?P:B,currentPage:ee,countPage:ne,page:"barcode",Edit:function(e){pe(!0),z(e.barcode),J(e.name),ce(e)},Delete:function(e){ye("approve"),Ze(!0),fe(e)}})}),(0,k.jsx)(v.Z,{onError:function(e){e.toString().length>4&&(0,l.Ug)("Maxsulot kodi o'qilmadi!","error")},onScan:function(t){var a={code:t};e((0,h.nR)(a)).then((function(e){e.error?/^[0-9]*$/.test(t)?z(t):(0,l.Ug)("Shtrix kod formati noto`g`ri","error",{autoClose:2e3,position:"bottom-right"}):(0,l.Ug)("Bunday shtrix kodli maxsulot mavjud","error",{autoClose:2e3,position:"bottom-right"})}))},stopPropagation:!0,preventDefault:!0,onKeyDetect:function(e){e.preventDefault()}})]})}}}]);
//# sourceMappingURL=9300.284ab036.chunk.js.map