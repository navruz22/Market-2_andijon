"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6064],{2543:function(e,t,n){n.d(t,{Z:function(){return o}});n(2791);var i=n.p+"static/media/Excel.3a5a1731280185e0e4ae99ee0a4eebfc.svg",a=n(3168),r=n(184);var o=function(e){var t=e.onClick,n=(0,a.$)(["common"]).t;return(0,r.jsxs)("button",{className:"exportButton",onClick:t,children:[n("Eksport"),(0,r.jsx)("span",{className:"btn-icon bg-white-900 p-[8px]",children:(0,r.jsx)("img",{src:i,alt:"excel icon"})})]})}},4451:function(e,t,n){n.r(t);var i=n(3433),a=n(1413),r=n(9439),o=n(2791),c=n(9434),u=n(7584),l=n(2543),s=n(2071),d=n(2230),p=n(5077),f=n(2987),m=n(4339),v=n(763),g=n(5121),h=n(3168),Z=n(4232),x=n(2106),y=n(184);t.default=function(){var e=(0,c.I0)(),t=(0,h.$)(["common"]).t,n=(0,c.v9)((function(e){return e.login})).market._id,S=(0,c.v9)((function(e){return e.incoming})),w=S.incomings,D=S.incomingscount,k=S.successUpdate,b=S.successDelete,j=S.loadingExcel,C=(0,c.v9)((function(e){return e.currency})),N=C.currencyType,z=C.currency,E=(0,o.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString()),P=(0,r.Z)(E,2),U=P[0],I=P[1],B=(0,o.useState)(new Date((new Date).setHours(23,59,59,0)).toISOString()),L=(0,r.Z)(B,2),K=L[0],O=L[1],M=(0,o.useState)({name:"",code:"",supplier:""}),J=(0,r.Z)(M,2),T=J[0],q=J[1],H=(0,o.useState)({name:"",code:"",supplier:""}),W=(0,r.Z)(H,2),Y=W[0],A=W[1],F=(0,o.useState)(0),$=(0,r.Z)(F,2),G=$[0],R=$[1],X=(0,o.useState)(10),_=(0,r.Z)(X,2),Q=_[0],V=_[1],ee=(0,o.useState)(!1),te=(0,r.Z)(ee,2),ne=te[0],ie=te[1],ae=(0,o.useState)({filter:"",sort:"",count:0}),re=(0,r.Z)(ae,2),oe=re[0],ce=re[1],ue=(0,o.useState)({}),le=(0,r.Z)(ue,2),se=le[0],de=le[1],pe=(0,o.useState)({}),fe=(0,r.Z)(pe,2),me=fe[0],ve=fe[1],ge=(0,o.useState)([]),he=(0,r.Z)(ge,2),Ze=he[0],xe=he[1],ye=(0,o.useState)([]),Se=(0,r.Z)(ye,2),we=Se[0],De=Se[1],ke=function(){Ze.some((function(e){return e.pieces===se.pieces&&e.unitprice===se.unitprice&&e.sellingprice===se.sellingprice}))?de({}):e((0,g.NP)({market:n,startDate:U,endDate:K,product:(0,a.Z)({},se)}))},be=function(e,t){"beginDay"===t&&I(new Date(e).toISOString()),"endDay"===t&&O(new Date(e).toISOString())},je=function(){ve({}),ie(!1)},Ce=(0,o.useCallback)((function(){e((0,g.eT)({market:n,beginDay:U,endDay:K,currentPage:G,countPage:Q,search:T}))}),[e,n,U,K,G,Q,T]);(0,o.useEffect)((function(){!function(e){var t=(0,v.map)(e,(function(e){return(0,a.Z)((0,a.Z)({},e),{},{sellingprice:e.product.price.sellingprice,sellingpriceuzs:e.product.price.sellingpriceuzs})}));xe(t),De(t)}(w)}),[w]),(0,o.useEffect)((function(){Ce()}),[Ce,U,K,G,Q,T]),(0,o.useEffect)((function(){k&&(Ce(),de({}),e((0,g.qd)()))}),[e,Ce,k]),(0,o.useEffect)((function(){b&&(Ce(),de({}),e((0,g.LG)()))}),[e,Ce,b]);var Ne=[{title:"\u2116"},{title:t("Yetkazuvchi"),filter:"supplier.name",styles:"w-[10%]"},{title:t("Kodi"),filter:"product.productdata.code",styles:"w-[7%]"},{title:t("Nomi"),filter:"product.productdata.name"},{title:t("Soni"),styles:"w-[10%]"},{title:t("Kelish"),styles:"w-[10%]"},{title:t("Jami"),styles:"w-[15%]"},{title:t("Sotish"),styles:"w-[10%]"},{title:"",styles:"w-[5%]"}];return(0,y.jsxs)("div",{className:"grow overflow-auto",children:[j&&(0,y.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,y.jsx)(Z.Z,{})}),(0,y.jsx)("div",{className:"mainPadding text-center",children:(0,y.jsx)("p",{children:t("Ro'yxat")})}),(0,y.jsxs)("div",{className:"mainPadding flex items-center justify-between",children:[(0,y.jsx)(l.Z,{onClick:function(){var n="Maxsulotlar-qabul"-(new Date).toLocaleDateString(),i=["\u2116",t("Yetkazuvchi"),t("Kodi"),t("Nomi"),t("Soni"),t("Kelish UZS"),t("Kelish USD"),t("Jami UZS"),t("Jami USD"),t("Sotish UZS"),t("Sotish USD")],a={beginDay:U,endDay:K};e((0,g.vi)(a)).then((function(e){var t=e.error,a=e.payload;if(!t)if((null===a||void 0===a?void 0:a.length)>0){var r=(0,v.map)(a,(function(e,t){var n,i,a,r,o,c;return{nth:t+1,supplier:(null===(n=e.supplier)||void 0===n?void 0:n.name)||"",code:(null===(i=e.product)||void 0===i||null===(a=i.productdata)||void 0===a?void 0:a.code)||"",name:(null===(r=e.product)||void 0===r||null===(o=r.productdata)||void 0===o?void 0:o.name)||"",count:e.pieces+" "+(null===(c=e.unit)||void 0===c?void 0:c.name)||"",unit:(null===e||void 0===e?void 0:e.unitpriceuzs)||"",unitusd:(null===e||void 0===e?void 0:e.unitprice)||"",all:(null===e||void 0===e?void 0:e.totalpriceuzs)||"",allusd:(null===e||void 0===e?void 0:e.totalprice)||""}}));(0,u.rD)(r,n,i)}else(0,x.Ug)("Jadvalda ma'lumot mavjud emas !","warning")}))}}),(0,y.jsxs)("div",{className:"flex gap-[10px]",children:[(0,y.jsx)(s.Z,{label:t("dan"),value:new Date(U),onChange:function(e){return be(e,"beginDay")},maxWidth:"max-w-[9.6875rem]"}),(0,y.jsx)(s.Z,{label:t("gacha"),value:new Date(K),onChange:function(e){return be(e,"endDay")},maxWidth:"max-w-[9.6875rem]"})]}),(0,y.jsx)(p.Z,{currentPage:G,setCurrentPage:R,countPage:Q,totalDatas:D})]}),(0,y.jsx)("div",{children:(0,y.jsx)(f.Z,{filterBy:["total","code","delivererName","name"],filterByName:function(e){var t=e.target.value.toLowerCase();xe((0,i.Z)((0,v.filter)((0,i.Z)(we),(function(e){return e.product.productdata.name.toLowerCase().includes(t)})))),A((0,a.Z)((0,a.Z)({},Y),{},{name:t}))},filterByTotal:function(e){return V(e.value)},filterByCode:function(e){var t=e.target.value.toLowerCase();xe((0,i.Z)((0,v.filter)((0,i.Z)(we),(function(e){return e.product.productdata.code.includes(t)})))),A((0,a.Z)((0,a.Z)({},Y),{},{code:t}))},filterByCodeAndNameAndCategoryWhenPressEnter:function(e){"Enter"===e.key&&q(Y)},filterByDelivererName:function(e){var t=e.target.value.toLowerCase();xe((0,i.Z)((0,v.filter)((0,i.Z)(we),(function(e){return e.supplier.name.toLowerCase().includes(t)})))),A((0,a.Z)((0,a.Z)({},Y),{},{supplier:t}))}})}),(0,y.jsx)("div",{className:"tableContainerPadding",children:(0,y.jsx)(m.Z,{page:"incomings",headers:Ne,data:Ze,currentPage:G,countPage:Q,currency:N,editedIncoming:se,Edit:function(e){de(e)},changeHandler:function(e,t){var n=Number(e.target.value),i=(0,a.Z)({},se),r=function(e){return t===e},o="USD"===N?n:(0,u.Nt)(n,z),c="UZS"===N?n:(0,u.uX)(n,z);r("pieces")&&(i.pieces=n,i.totalprice=n*i.unitprice,i.totalpriceuzs=n*i.unitpriceuzs),r("unitprice")&&(i.unitprice=o,i.unitpriceuzs=c,i.totalprice=o*i.pieces,i.totalpriceuzs=c*i.pieces),r("sellingprice")&&(i.sellingprice=o,i.sellingpriceuzs=c),de(i)},saveEditIncoming:ke,Delete:function(e){return function(e){ve(e),ie(!0)}(e)},Sort:function(e){if(e===oe.filter)switch(oe.count){case 1:ce({filter:e,sort:"1",count:2}),(0,u.ki)(Ze,xe,e,1,we);break;case 2:ce({filter:e,sort:"",count:0}),(0,u.ki)(Ze,xe,e,"",we);break;default:ce({filter:e,sort:"-1",count:1}),(0,u.ki)(Ze,xe,e,-1,we)}else ce({filter:e,sort:"-1",count:1}),(0,u.ki)(Ze,xe,e,-1,we)},onKeyUp:function(e){"Enter"===e.key&&ke()},sortItem:oe})}),(0,y.jsx)(d.Z,{body:"approve",isOpen:ne,headerText:t("Mahsulotni o`chirishni tasdiqlaysizmi?"),title:t("O`chirilgan mahsulotni tiklashning imkoni mavjud emas!"),approveFunction:function(){e((0,g.H4)({market:n,beginDay:U,endDay:K,product:(0,a.Z)({},me)})),ie(!1)},closeModal:je,toggleModal:je})]})}}}]);
//# sourceMappingURL=6064.6c29d9fa.chunk.js.map