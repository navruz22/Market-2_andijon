"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[599],{2856:function(e,t,a){a.r(t);var n=a(3433),l=a(9439),i=a(2791),s=a(8063),r=a(7799),c=a(5077),u=a(9078),o=a(9434),f=a(4232),m=a(1295),d=a(2987),g=a(2230),h=a(6408),p=a(763),v=a(2106),x=a(7177),Z=a(7584),j=a(3168),S=a(184);t.default=function(){var e=(0,j.$)(["common"]).t,t=(0,o.I0)(),a=(0,o.v9)((function(e){return e.clients})),k=a.packmans,P=a.clients,y=a.loading,D=a.searchedClients,w=a.total,C=a.totalSearched,b=[{title:"\u2116",styles:"w-[8%] text-left"},{title:e("Mijoz"),styles:"w-[41%] text-left"},{title:"Savdo",styles:"w-[41%] text-left"},{title:"Sof foyda",styles:"w-[41%] text-left"},{title:"",styles:"w-[8%] text-left"}],N=(0,i.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),z=(0,l.Z)(N,2),E=z[0],M=z[1],B=(0,i.useState)(new Date),_=(0,l.Z)(B,2),T=_[0],W=_[1],q=(0,i.useState)([]),F=(0,l.Z)(q,2),I=F[0],L=F[1],O=(0,i.useState)([]),Y=(0,l.Z)(O,2),A=Y[0],G=Y[1],H=(0,i.useState)([]),Q=(0,l.Z)(H,2),$=Q[0],J=Q[1],K=(0,i.useState)(""),R=(0,l.Z)(K,2),U=R[0],V=R[1],X=(0,i.useState)(null),ee=(0,l.Z)(X,2),te=ee[0],ae=ee[1],ne=(0,i.useState)(null),le=(0,l.Z)(ne,2),ie=le[0],se=le[1],re=(0,i.useState)(""),ce=(0,l.Z)(re,2),ue=ce[0],oe=ce[1],fe=(0,i.useState)(null),me=(0,l.Z)(fe,2),de=me[0],ge=me[1],he=(0,i.useState)(!1),pe=(0,l.Z)(he,2),ve=pe[0],xe=pe[1],Ze=(0,i.useState)(!1),je=(0,l.Z)(Ze,2),Se=je[0],ke=je[1],Pe=(0,i.useState)("10"),ye=(0,l.Z)(Pe,2),De=ye[0],we=ye[1],Ce=(0,i.useState)(0),be=(0,l.Z)(Ce,2),Ne=be[0],ze=be[1],Ee=(0,i.useState)(w),Me=(0,l.Z)(Ee,2),Be=Me[0],_e=Me[1],Te=(0,i.useState)(""),We=(0,l.Z)(Te,2),qe=We[0],Fe=We[1],Ie=(0,i.useState)(null),Le=(0,l.Z)(Ie,2),Oe=Le[0],Ye=Le[1],Ae=(0,i.useState)(null),Ge=(0,l.Z)(Ae,2),He=Ge[0],Qe=Ge[1],$e=function(){xe(!ve),setTimeout((function(){ge(null)}),500)},Je=function(e){e&&e.preventDefault(),V(""),ae(null),ke(!1)},Ke=function(e){if("Enter"===e.key){var a={currentPage:Ne,countPage:De,search:{client:qe.replace(/\s+/g," ").trim()}};t((0,x.mT)(a))}};return(0,i.useEffect)((function(){t((0,x.Im)())}),[t]),(0,i.useEffect)((function(){var e={currentPage:Ne,countPage:De,startDate:E,endDate:T,search:{client:qe.replace(/\s+/g," ").trim(),packman:ie}};t((0,x.ZL)(e))}),[t,De,Ne,E,T,ie]),(0,i.useEffect)((function(){G(P)}),[P]),(0,i.useEffect)((function(){_e(w)}),[w]),(0,i.useEffect)((function(){J(D)}),[D]),(0,i.useEffect)((function(){var e=(0,p.map)(k,(function(e){return{label:e.name,value:e._id}}));L(e)}),[k]),(0,S.jsxs)(h.E.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,S.jsx)(g.Z,{headerText:"".concat(de&&de.name," ").concat(e("ismli mijozni o`chirishni tasdiqlaysizmi?")),title:e("O`chirilgan mijozni tiklashning imkoni mavjud emas!"),toggleModal:$e,body:He,approveFunction:function(){var e={name:de.name,_id:de._id,packman:de.packman,currentPage:Ne,countPage:De,search:{client:qe.replace(/\s+/g," ").trim()}};t((0,x.vl)(e)).then((function(e){e.error||(Je(),(0,v.GH)())})),$e()},isOpen:ve,printedSelling:Oe}),(0,S.jsx)("form",{className:"flex gap-[1.25rem] bg-background flex-col mainPadding transition ease-linear duration-200 ".concat(Se&&"stickyForm"),children:(0,S.jsxs)("div",{className:"supplier-style",children:[(0,S.jsx)(s.Z,{value:te,onChange:function(e){ae(e)},label:e("Agentni tanlang"),placeholder:e("misol: Dilso`z"),select:!0,options:I,maxWidth:"w-[21rem]",border:!0}),(0,S.jsx)(s.Z,{value:U,label:e("Mijoz ismi"),placeholder:e("misol: Navro`z"),maxWidth:"w-[21rem]",type:"string",onChange:function(e){V(e.target.value)}}),(0,S.jsxs)("div",{className:"flex gap-[1.25rem] grow w-[18.3125rem]",children:[(0,S.jsx)(r.Z,{add:!Se,edit:Se,text:e(Se?"Saqlash":"Yangi agent qo`shish"),onClick:Se?function(a){a.preventDefault();var n=(0,Z.lj)([{value:U,message:e("Mijoz ismi")}]),l=n.failed,i=n.message;if(l)(0,v.pM)(i);else{var s={name:U,_id:ue._id,packman:te&&te.value||null,currentPage:Ne,countPage:De,search:{client:qe.replace(/\s+/g," ").trim()}};t((0,x.Q0)(s)).then((function(e){e.error||(Je(),(0,v.n7)())}))}}:function(a){a.preventDefault();var n=(0,Z.lj)([{value:U,message:e("Mijoz ismi")}]),l=n.failed,i=n.message;if(l)(0,v.pM)(i);else{var s={name:U,packman:te&&te.value||null,currentPage:Ne,countPage:De,search:{client:qe.replace(/\s+/g," ").trim()}};t((0,x.If)(s)).then((function(e){e.error||(Je(),(0,v.Sw)())}))}}}),(0,S.jsx)(r.Z,{onClick:Je,text:e("Tozalash")})]})]})}),(0,S.jsxs)("div",{className:"pagination-supplier mainPadding",children:[(0,S.jsx)("p",{className:"supplier-title",children:e("Mijozlar")}),(0!==Be||0!==C)&&(0,S.jsx)(c.Z,{countPage:Number(De),totalDatas:C||Be,currentPage:Ne,setCurrentPage:ze})]}),(0,S.jsx)(d.Z,{filterBy:["total","startDate","endDate","clientName","select"],filterByPackman:function(e){var t=e.value;se(t)},filterByTotal:function(e){var t=e.value;we(t),ze(0)},filterByClientNameWhenPressEnter:Ke,filterByDelivererNameWhenPressEnter:Ke,searchByClientName:qe,filterByClientName:function(e){var a=e.target.value,n=a.toLowerCase().replace(/\s+/g," ").trim();if(Fe(a),($.length>0||C>0)&&t((0,x.dt)()),""===n)G(P),_e(w);else{var l=(0,p.filter)(P,(function(e){return e.name.toLowerCase().includes(n)}));G(l),_e(l.length)}},startDate:E,endDate:new Date(T),setStartDate:M,setEndDate:W,searchByPackmans:[{label:"Barchasi",value:null}].concat((0,n.Z)(I))}),(0,S.jsx)("div",{className:"tableContainerPadding",children:y?(0,S.jsx)(f.Z,{}):0===A.length&&0===$.length?(0,S.jsx)(m.Z,{text:e("Mijozlar mavjud emas")}):(0,S.jsx)(u.Z,{data:$.length>0?$:A,page:"client",currentPage:Ne,countPage:De,headers:b,Edit:function(e){ae(e.packman?{label:e.packman.name,value:e.packman._id}:""),V(e.name||""),oe(e),ke(!0)},Delete:function(e){ge(e),Qe("approve"),xe(!0)},Print:function(e){Qe("allChecks"),Ye(e),xe(!0)}})})]},"content")}}}]);
//# sourceMappingURL=599.2269a874.chunk.js.map