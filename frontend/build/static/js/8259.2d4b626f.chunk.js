"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8259],{4237:function(e,t,n){n(2791);var i=n(71),a=n(184);t.Z=function(e){var t=e.type,n=e.onClick,r=e.active,l={product:{icon:(0,a.jsx)(i.lkm,{className:"shopIcons"}),bgColor:"bg-[#12B76A]"},selling:{icon:(0,a.jsx)(i.toq,{className:"shopIcons"}),bgColor:"bg-[#F79009]"},payments:{icon:(0,a.jsx)(i.B9Z,{className:"shopIcons"}),bgColor:"bg-[#00B4CC]"},income:{icon:(0,a.jsx)(i.Wem,{className:"shopIcons"}),bgColor:"bg-[#00B4CC]"}};return(0,a.jsx)("button",{onClick:n,className:"".concat(r?"filial-active":l[t].bgColor," shopButton"),children:l[t].icon})}},5668:function(e,t,n){var i=(0,n(1608).ZP)("http://45.81.227.123/"),a=JSON.parse(localStorage.getItem("userData"));i.auth={token:a.token,market:a.market},t.Z=i},7121:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var i=n(9439),a=n(2791),r=n(4237),l=n(3012),o=n(7689),c=n(1087),u=n(918),s=n(5971),d=n(4885);var f=n(4007),v=n(843),m=0;function g(){var e=m;return m++,e}var p=function(e){var t=e.children,n=e.initial,i=e.isPresent,r=e.onExitComplete,l=e.custom,o=e.presenceAffectsLayout,c=(0,v.h)(h),u=(0,v.h)(g),s=(0,a.useMemo)((function(){return{id:u,initial:n,isPresent:i,custom:l,onExitComplete:function(e){c.set(e,!0);var t=!0;c.forEach((function(e){e||(t=!1)})),t&&(null===r||void 0===r||r())},register:function(e){return c.set(e,!1),function(){return c.delete(e)}}}}),o?void 0:[i]);return(0,a.useMemo)((function(){c.forEach((function(e,t){return c.set(t,!1)}))}),[i]),a.useEffect((function(){!i&&!c.size&&(null===r||void 0===r||r())}),[i]),a.createElement(f.O.Provider,{value:s},t)};function h(){return new Map}var x=n(5941);function S(e){return e.key||""}var y=function(e){var t=e.children,n=e.custom,i=e.initial,r=void 0===i||i,l=e.onExitComplete,o=e.exitBeforeEnter,c=e.presenceAffectsLayout,u=void 0===c||c,f=function(){var e=(0,a.useRef)(!1),t=(0,s.CR)((0,a.useState)(0),2),n=t[0],i=t[1];return(0,d.z)((function(){return e.current=!0})),(0,a.useCallback)((function(){!e.current&&i(n+1)}),[n])}(),v=(0,a.useContext)(x.WH);(0,x.Md)(v)&&(f=v.forceUpdate);var m=(0,a.useRef)(!0),g=function(e){var t=[];return a.Children.forEach(e,(function(e){(0,a.isValidElement)(e)&&t.push(e)})),t}(t),h=(0,a.useRef)(g),y=(0,a.useRef)(new Map).current,Z=(0,a.useRef)(new Set).current;if(function(e,t){e.forEach((function(e){var n=S(e);t.set(n,e)}))}(g,y),m.current)return m.current=!1,a.createElement(a.Fragment,null,g.map((function(e){return a.createElement(p,{key:S(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:u},e)})));for(var j=(0,s.ev)([],(0,s.CR)(g)),P=h.current.map(S),k=g.map(S),C=P.length,D=0;D<C;D++){var E=P[D];-1===k.indexOf(E)?Z.add(E):Z.delete(E)}return o&&Z.size&&(j=[]),Z.forEach((function(e){if(-1===k.indexOf(e)){var t=y.get(e);if(t){var i=P.indexOf(e);j.splice(i,0,a.createElement(p,{key:S(t),isPresent:!1,onExitComplete:function(){y.delete(e),Z.delete(e);var t=h.current.findIndex((function(t){return t.key===e}));h.current.splice(t,1),Z.size||(h.current=g,f(),l&&l())},custom:n,presenceAffectsLayout:u},t))}}})),j=j.map((function(e){var t=e.key;return Z.has(t)?e:a.createElement(p,{key:S(e),isPresent:!0,presenceAffectsLayout:u},e)})),h.current=j,a.createElement(a.Fragment,null,Z.size?j:j.map((function(e){return(0,a.cloneElement)(e)})))},Z=n(2432),j=n(3168),P=n(9434),k=n(9078),C=n(4070),D=n(6408),E=n(2987),N=n(2543),b=n(5077),I=n(763),w=n(1295),_=n(4232),U=n(7584),B=n(2106),O=n(184);var M=function(e){var t=e.id,n=e.currency,r=(0,P.I0)(),l=(0,P.v9)((function(e){return e.filialData})),o=l.shops,c=l.loading,u=l.total,s=l.totalSearched,d=l.searchedExchanges,f=l.startDate,v=l.endDate,m=(0,a.useState)(0),g=(0,i.Z)(m,2),p=g[0],h=g[1],x=(0,a.useState)("10"),S=(0,i.Z)(x,2),y=S[0],Z=S[1],j=(0,a.useState)([]),M=(0,i.Z)(j,2),z=M[0],L=M[1],R=(0,a.useState)(u),A=(0,i.Z)(R,2),T=A[0],J=A[1],F=(0,a.useState)(""),W=(0,i.Z)(F,2),q=W[0],K=W[1],H=(0,a.useState)(d),Q=(0,i.Z)(H,2),V=Q[0],$=Q[1];return(0,a.useEffect)((function(){var e={currentPage:p,countPage:y,startDate:new Date(new Date(f).getFullYear(),new Date(f).getMonth(),new Date(f).getDate()).toISOString(),endDate:v,filial:t};r((0,C.l6)(e))}),[r,t,f,v,p,y]),console.log("worgverge"),(0,a.useEffect)((function(){L(o)}),[r,o,f,v]),(0,a.useEffect)((function(){$(d)}),[d]),(0,a.useEffect)((function(){J(u)}),[u]),(0,O.jsxs)(D.E.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,O.jsxs)("div",{className:"pagination-supplier mainPadding",children:[(0,O.jsx)(N.Z,{onClick:function(){if((null===z||void 0===z?void 0:z.length)>0){var e=(0,I.map)(z,(function(e,t){return{nth:t+1,date:new Date(null===e||void 0===e?void 0:e.createdAt).toLocaleDateString()||"",product_id:(null===e||void 0===e?void 0:e._id)||"",product_type:(null===e||void 0===e?void 0:e.products.length)||"",product_number:(null===e||void 0===e?void 0:e.pieces)||"",all_get_product:"UZS"===n?(Math.round(1*e.totalincomingpriceuzs)/1).toLocaleString("ru-RU"):(Math.round(1e3*e.totalincomingprice)/1e3).toLocaleString("ru-RU"),all_sell_product:"UZS"===n?(Math.round(1*(null===e||void 0===e?void 0:e.totalsellingpriceuzs))/1).toLocaleString("ru-RU"):(Math.round(1e3*(null===e||void 0===e?void 0:e.totalsellingprice))/1e3).toLocaleString("ru-RU")}}));(0,U.rD)(e,"Almashinilgan tovarlar",["\u2116","Sana","Id","Maxsulot turi","Maxsulot Soni","Jami olish summasi","Jami sotish summasi"])}else(0,B.Ug)("Jadvalda ma'lumot mavjud emas !","warning")}}),(0,O.jsx)("p",{className:"supplier-title",children:"Almashinilgan tovarlar"}),(0,O.jsx)("div",{children:(0!==T||0!==s)&&(0,O.jsx)(b.Z,{countPage:Number(y),totalDatas:s||T,setCurrentPage:h,currentPage:p})})]}),(0,O.jsx)(E.Z,{filterBy:["total","id","startDate","endDate"],filterByTotal:function(e){var t=e.value;Z(t),h(0)},searchById:q,filterById:function(e){var t=e.target.value,n=t.replace(/\s+/g," ").trim();if(K(t),(V.length>0||s>0)&&r((0,C.Hi)()),""===n)L(o),J(u);else{var i=(0,I.filter)(o,(function(e){return e._id.includes(n)}));L(i),J(i.length)}},filterByIdWhenPressEnter:function(e){if("Enter"===e.key){var t={currentPage:p,countPage:y,search:{name:q.replace(/\s+/g," ").trim()}};r((0,C.xr)(t))}},startDate:new Date(f),endDate:new Date(v),setStartDate:function(e){r((0,C.es)({start:e.toISOString()}))},setEndDate:function(e){r((0,C.v1)({end:e.toISOString()}))}}),(0,O.jsx)("div",{className:"pl-[2.5rem] pr-[1.25rem] pb-[1.25rem]",children:c?(0,O.jsx)(_.Z,{}):0===z.length?(0,O.jsx)(w.Z,{text:"Tovarlar mavjud emas"}):(0,O.jsx)(k.Z,{data:z,page:"filialShop",currentPage:p,countPage:y,headers:[{styles:"w-[10%] text-start",title:"\u2116"},{styles:"w-[10%] text-start",filter:"createdAt",title:"Sana"},{styles:"w-[10%] text-start",filter:"id",title:"ID"},{styles:"text-start",title:"Maxsulot turi"},{styles:"text-start",title:"Maxsulot soni"},{styles:"text-start",title:"Qabul qilish"},{styles:"text-start",title:"Sotish"},{styles:"w-[10%]",title:" "}],currency:n})})]},"content")},z=n(6124),L=n(4165),R=n(5861),A=n(3433),T=n(4337),J=n(1146),F=n(4016),W=function(e){var t=e.id,n=(0,j.$)(["common"]).t,r=[{title:n("\u2116")},{title:n("Kategoriyasi"),filter:"category.code"},{title:n("Maxsulot kodi"),filter:"productdata.code"},{title:n("Maxsulot nomi"),filter:"productdata.name"},{title:n("Soni(dona)"),filter:"product.total"},{title:n("Olish"),filter:"price.incomingprice"},{title:n("Olish jami")},{title:n("Sotish"),filter:"price.sellingprice"},{title:n("Sotish jami")},{title:n("Cheklar soni")},{title:""}],l=(0,P.I0)(),o=(0,P.v9)((function(e){return e.products})),c=o.products,u=o.total,s=o.loading,d=o.searchedProducts,f=o.totalSearched,v=o.loadingExcel,m=(0,P.v9)((function(e){return e.currency})).currencyType,g=(0,P.v9)((function(e){return e.login})).market.name,p=(0,a.useState)(c),h=(0,i.Z)(p,2),x=h[0],S=h[1],y=(0,a.useState)(d),Z=(0,i.Z)(y,2),C=Z[0],M=Z[1],z=(0,a.useState)(u),W=(0,i.Z)(z,2),q=W[0],K=W[1],H=(0,a.useState)("10"),Q=(0,i.Z)(H,2),V=Q[0],$=Q[1],X=(0,a.useState)(0),Y=(0,i.Z)(X,2),G=Y[0],ee=Y[1],te=(0,a.useState)(""),ne=(0,i.Z)(te,2),ie=ne[0],ae=ne[1],re=(0,a.useState)(""),le=(0,i.Z)(re,2),oe=le[0],ce=le[1],ue=(0,a.useState)(""),se=(0,i.Z)(ue,2),de=se[0],fe=se[1],ve=(0,a.useState)(null),me=(0,i.Z)(ve,2),ge=me[0],pe=me[1],he=(0,a.useState)(""),xe=(0,i.Z)(he,2),Se=xe[0],ye=xe[1],Ze=(0,a.useState)({filter:"",sort:"",count:0}),je=(0,i.Z)(Ze,2),Pe=je[0],ke=je[1],Ce=(0,a.useState)(!1),De=(0,i.Z)(Ce,2),Ee=De[0],Ne=De[1],be=(0,a.useState)([]),Ie=(0,i.Z)(be,2),we=Ie[0],_e=Ie[1],Ue=(0,a.useRef)(),Be=(0,a.useRef)(),Oe=(0,J.useReactToPrint)({content:function(){return Ue.current},onBeforeGetContent:function(){return Ne(!0),new Promise((function(e){Be.current=e,setTimeout((function(){Ne(!1),e()}),2e3)}))}}),Me=function(){var e=(0,R.Z)((0,L.Z)().mark((function e(t,n){return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&_e((0,A.Z)((0,I.filter)(we,(function(e){return e.product._id===t._id})))),e.next=3,Oe();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){var e={filial:t,currentPage:G,countPage:V,search:{name:oe.replace(/\s+/g," ").trim(),code:ie.replace(/\s+/g," ").trim(),category:de.replace(/\s+/g,"")}};l((0,T.KX)(e))}),[G,V,l]),(0,a.useEffect)((function(){S(c)}),[c]),(0,a.useEffect)((function(){K(u)}),[u]),(0,a.useEffect)((function(){M(d)}),[d]),(0,a.useEffect)((function(){Ee&&"function"===typeof Be.current&&Be.current()}),[Be.current,Ee]),(0,a.useEffect)((function(){Ee||(_e([]),ye(""),pe(null))}),[Ee]),(0,O.jsxs)(D.E.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[v||Ee&&(0,O.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,O.jsx)(_.Z,{})}),(0,O.jsxs)("div",{className:"pagination mainPadding",children:[(0,O.jsx)(N.Z,{onClick:function(){var e=["\u2116","Mahsulot kodi","Mahsulot nomi","Soni","Olish narxi USD","Olish narxi UZS","Olish narxi jami USD","Olish narxi jami UZS","Sotish narxi USD","Sotish narxi UZS","Sotish narxi jami UZS","Sotish narxi jami USD"];l((0,T.Bd)()).then((function(t){var n=t.error,i=t.payload;if(!n)if((null===i||void 0===i?void 0:i.length)>0){var a=(0,I.map)(i,(function(e,t){var n,i,a,r,l,o,c,u,s,d,f;return{nth:t+1,code:(null===e||void 0===e||null===(n=e.productdata)||void 0===n?void 0:n.code)||"",name:(null===e||void 0===e||null===(i=e.productdata)||void 0===i?void 0:i.name)||"",total:e.total+(null===e||void 0===e||null===(a=e.unit)||void 0===a?void 0:a.name)||"",incomingprice:(null===e||void 0===e||null===(r=e.price)||void 0===r?void 0:r.incomingprice)||"",incomingpriceuzs:(null===e||void 0===e||null===(l=e.price)||void 0===l?void 0:l.incomingpriceuzs)||"",incomingpricealluzs:(null===e||void 0===e||null===(o=e.price)||void 0===o?void 0:o.incomingpriceuzs)*e.total,incomingpriceallusd:(null===e||void 0===e||null===(c=e.price)||void 0===c?void 0:c.incomingprice)*e.total,sellingprice:(null===e||void 0===e||null===(u=e.price)||void 0===u?void 0:u.sellingprice)||"",sellingpriceuzs:(null===e||void 0===e||null===(s=e.price)||void 0===s?void 0:s.sellingpriceuzs)||"",sellingalluzs:(null===e||void 0===e||null===(d=e.price)||void 0===d?void 0:d.sellingpriceuzs)*e.total,sellingallusd:(null===e||void 0===e||null===(f=e.price)||void 0===f?void 0:f.sellingprice)*e.total}}));(0,U.rD)(a,"Etiketka",e)}else(0,B.Ug)("Jadvalda ma'lumot mavjud emas !","warning")}))}}),(0,O.jsx)("p",{className:"product_name",children:n("Etiketka")}),(0!==q||0!==f)&&(0,O.jsx)(b.Z,{countPage:Number(V),totalDatas:f||q,currentPage:G,setCurrentPage:ee})]}),(0,O.jsx)(E.Z,{filterBy:["total","category","code","name","checks","printBtn"],filterByCode:function(e){var t=e.target.value,n=t.replace(/\s+/g," ").trim();if(ae(t),(C.length>0||f>0)&&l((0,T.rk)()),""===n)S(c),K(u);else{var i=(0,I.filter)(c,(function(e){return e.productdata.code.includes(n)}));S(i),K(i.length)}},filterByName:function(e){var t=e.target.value,n=t.toLowerCase().replace(/\s+/g," ").trim();if(ce(t),(C.length>0||f>0)&&l((0,T.rk)()),""===n)S(c),K(u);else{var i=(0,I.filter)(c,(function(e){return e.productdata.name.toLowerCase().includes(n)}));S(i),K(i.length)}},searchByCode:ie,searchByName:oe,searchByCategory:de,filterByCategory:function(e){var t=e.target.value,n=t.replace(/\s+/g," ").trim();if(fe(t),(C.length>0||f>0)&&l((0,T.rk)()),""===n)S(c),K(u);else{var i=(0,I.filter)(c,(function(e){return e.category.code.includes(n)}));S(i),K(i.length)}},numberOfChecks:Se,filterByTotal:function(e){var t=e.value;$(t),ee(0)},filterByCodeAndNameAndCategoryWhenPressEnter:function(e){if("Enter"===e.key){ee(0);var n={filialId:t,currentPage:0,countPage:V,search:{name:oe.replace(/\s+/g," ").trim(),code:ie.replace(/\s+/g," ").trim(),category:de.replace(/\s+/g,"")}};l((0,T.aR)(n))}},clickPrintBtn:Me,setNumberOfChecks:function(e){ye(e.target.value),pe(C.length>0?C:x)}}),(0,O.jsx)("div",{className:"tableContainerPadding",children:s?(0,O.jsx)(_.Z,{}):0===x.length&&0===C.length?(0,O.jsx)(w.Z,{text:n("Maxsulotlar mavjud emas")}):(0,O.jsx)(k.Z,{page:"labelsincome",data:C.length>0?C:x,currentPage:G,countPage:V,currency:m,headers:r,Sort:function(e){if(e===Pe.filter)switch(Pe.count){case 1:ke({filter:e,sort:"1",count:2}),(0,U.ki)(C.length>0?C:x,C.length>0?M:S,e,1,C.length>0?d:c);break;case 2:ke({filter:e,sort:"",count:0}),(0,U.ki)(C.length>0?C:x,C.length>0?M:S,e,"",C.length>0?d:c);break;default:ke({filter:e,sort:"-1",count:1}),(0,U.ki)(C.length>0?C:x,C.length>0?M:S,e,-1,C.length>0?d:c)}else ke({filter:e,sort:"-1",count:1}),(0,U.ki)(C.length>0?C:x,C.length>0?M:S,e,-1,C?d:c,C.length>0)},sortItem:Pe,placeholder:"misol : 10",changeHandler:function(e,t){var n=we.findIndex((function(e){return e.product._id===t._id}));-1!==n?(""!==e.target.value.trim()?we[n].numberOfChecks=Number(e.target.value):we.splice(n,1),_e((0,A.Z)(we))):_e([].concat((0,A.Z)(we),[{product:t,numberOfChecks:Number(e.target.value)}]))},Print:Me,printedData:we})}),(0,O.jsx)("div",{className:"hidden",children:(0,O.jsx)(F.C,{currency:m,componentRef:Ue,countOfCheques:Se,productForCheques:ge,printedData:we,marketName:g})})]},"content")},q=function(e){var t=e.active,n=e.value,s=(0,P.v9)((function(e){return e.currency})).currencyType,d=(0,o.UO)(),f=d.tablename,v=d._id,m=(0,o.TH)(),g=(0,a.useState)(!0),p=(0,i.Z)(g,2),h=p[0],x=p[1],S=(0,a.useState)(!0),k=(0,i.Z)(S,2),C=k[0],D=k[1],E=(0,a.useState)(!0),N=(0,i.Z)(E,2),b=N[0],I=N[1],w=(0,a.useState)(v),_=(0,i.Z)(w,2),U=_[0],B=_[1],L=(0,a.useState)(),R=(0,i.Z)(L,2),A=R[0],T=R[1],J=(0,j.$)(["common"]).t;return(0,a.useEffect)((function(){v&&B(v)}),[v]),(0,O.jsxs)("section",{children:[(0,O.jsxs)("div",{className:"shops_card flex gap-[1.25rem] ".concat(t?"active_shop":""),children:[(0,O.jsx)(l.Z,{border:!0,director:n.director}),(0,O.jsxs)("div",{className:"product-cost",children:[(0,O.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,O.jsx)("p",{className:"product",children:J("Kategoriyalar")}),(0,O.jsx)("p",{className:"product-number",children:n.typecount})]}),(0,O.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,O.jsx)("p",{className:"product",children:J("Maxsulotlar turi")}),(0,O.jsx)("p",{className:"product-number",children:n.productcount})]}),(0,O.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,O.jsx)("p",{className:"product",children:J("Jami")}),(0,O.jsxs)("p",{className:"product-total",children:["UZS"===s?n.totalPrice.toLocaleString("ru-Ru"):n.totalPriceUSD.toLocaleString("ru-Ru")," ",s]})]})]}),(0,O.jsxs)("div",{className:"shop-name flex flex-col w-[13.4375rem]",children:[(0,O.jsx)("div",{className:"shop-title",children:(0,O.jsx)("p",{children:J(n.shopname)})}),(0,O.jsxs)("div",{className:"filial-btn",children:[(0,O.jsx)(c.rU,{to:"".concat(h?"/dukonlar/filiallar/report/".concat(n._id):"/dukonlar/filiallar"),onClick:function(){return e&&e.preventDefault(),x(!h),D(!0),void I(!0);var e},children:(0,O.jsx)(r.Z,{type:"product",active:v===n._id&&"report"===f})}),(0,O.jsx)(c.rU,{to:"".concat(C?"/dukonlar/filiallar/sales/".concat(n._id):"/dukonlar/filiallar"," "),onClick:function(){return e&&e.preventDefault(),D(!C),x(!0),void I(!0);var e},children:(0,O.jsx)(r.Z,{type:"selling",active:v===n._id&&"sales"===f})}),(0,O.jsx)(c.rU,{to:"".concat(b?"/dukonlar/filiallar/payment/".concat(n._id):"/dukonlar/filiallar"),onClick:function(){return e&&e.preventDefault(),I(!b),x(!0),void D(!0);var e},children:(0,O.jsx)(r.Z,{type:"payments",active:v===n._id&&"payment"===f||v===n._id&&m.pathname==="/dukonlar/filiallar/payment/".concat(v,"/exchangesId")})}),(0,O.jsx)(c.rU,{to:"".concat(A?"/dukonlar/filiallar/income/".concat(n._id):"/dukonlar/filiallar"),onClick:function(){return e&&e.preventDefault(),T(!A),x(!0),void D(!0);var e},children:(0,O.jsx)(r.Z,{type:"income",active:v===n._id&&"income"===f||v===n._id&&m.pathname==="/dukonlar/filiallar/income/".concat(v)})})]})]})]}),(0,O.jsx)(y,{children:(0,O.jsxs)(o.Z5,{location:m,children:[(0,O.jsx)(o.AW,{path:"/:tablename/:_id",element:v===n._id?"report"===f?(0,O.jsx)(u.default,{id:v}):"income"===f?(0,O.jsx)(W,{id:v}):"sales"===f?(0,O.jsx)(Z.default,{id:v}):(0,O.jsx)(M,{id:n._id,currency:s}):""}),(0,O.jsx)(o.AW,{path:"/:tablename/:_id/exchangesId",element:U===n._id?(0,O.jsx)(z.default,{currency:s}):""})]},m.pathname)})]})},K=n(5668),H=n(4585);var Q=function(){var e=(0,P.v9)((function(e){return e.login})).market,t=(0,P.I0)(),n=(0,a.useState)([]),r=(0,i.Z)(n,2),l=r[0],o=r[1],c=(0,a.useState)(!0),u=(0,i.Z)(c,2),s=u[0],d=u[1];return(0,a.useEffect)((function(){e&&K.Z.emit("getAllFilials",{market:e._id}),e&&K.Z.on("getAllFilials",(function(n){var i=n.id,a=n.filials;i===e._id&&(d(!1),t((0,H.Ee)(a)),o((0,I.map)(a,(function(e){var t,n,i,a,r;return{director:{firstname:(null===e||void 0===e||null===(t=e.director)||void 0===t?void 0:t.firstname)||"",lastname:(null===e||void 0===e||null===(n=e.director)||void 0===n?void 0:n.lastname)||"",image:(null===e||void 0===e||null===(i=e.director)||void 0===i?void 0:i.image)||""},typecount:(null===e||void 0===e?void 0:e.productCategory)||0,productcount:(null===e||void 0===e?void 0:e.productCount)||0,totalPrice:(null===e||void 0===e||null===(a=e.products)||void 0===a?void 0:a.totalPriceuzs)||0,totalPriceUSD:(null===e||void 0===e||null===(r=e.products)||void 0===r?void 0:r.totalPrice)||0,shopname:(null===e||void 0===e?void 0:e.name)||"",_id:(null===e||void 0===e?void 0:e._id)||""}}))))})),e&&K.Z.on("error",(function(t){var n=t.id,i=t.err;n===e._id&&(0,B.Ug)(i.message,"error")}))}),[e,t]),(0,O.jsxs)(D.E.section,{className:"mainPadding",initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[s&&(0,O.jsx)("div",{className:"fixed backdrop-blur-[2px] left-0 right-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,O.jsx)(_.Z,{})}),l.length>0&&(0,I.map)(l,(function(e){return(0,O.jsx)("div",{className:"pb-[1.25rem]",children:(0,O.jsx)(q,{value:e})},(0,I.uniqueId)("filial"))}))]},"content")}},6124:function(e,t,n){n.r(t);var i=n(9439),a=n(2791),r=n(9078),l=n(9434),o=n(5326),c=n(6408),u=n(2987),s=n(2543),d=n(5077),f=n(763),v=n(1295),m=n(4232),g=n(7689),p=n(7584),h=n(2106),x=n(71),S=n(184);t.default=function(e){var t,n=e.currency,y=(0,g.s0)(),Z=(0,g.TH)(),j=null===Z||void 0===Z||null===(t=Z.state)||void 0===t?void 0:t.id,P=(0,l.I0)(),k=(0,l.v9)((function(e){return e.exchangesIdData})),C=k.idProducts,D=k.loading,E=k.total,N=k.totalSearched,b=k.searchedExchanges,I=(0,a.useState)(b),w=(0,i.Z)(I,2),_=w[0],U=w[1],B=(0,a.useState)(0),O=(0,i.Z)(B,2),M=O[0],z=O[1],L=(0,a.useState)("10"),R=(0,i.Z)(L,2),A=R[0],T=R[1],J=(0,a.useState)([]),F=(0,i.Z)(J,2),W=F[0],q=F[1],K=(0,a.useState)(E),H=(0,i.Z)(K,2),Q=H[0],V=H[1],$=(0,a.useState)(""),X=(0,i.Z)($,2),Y=X[0],G=X[1],ee=(0,a.useState)(""),te=(0,i.Z)(ee,2),ne=te[0],ie=te[1],ae=(0,a.useState)(""),re=(0,i.Z)(ae,2),le=re[0],oe=re[1];return(0,a.useEffect)((function(){var e={currentPage:0,countPage:A,transfer:j};P((0,o.mq)(e))}),[P,j,M,A]),(0,a.useEffect)((function(){q(C)}),[C]),(0,a.useEffect)((function(){U(b)}),[b]),(0,a.useEffect)((function(){V(E)}),[E]),(0,S.jsxs)(c.E.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,S.jsxs)("div",{className:"pagination-supplier mainPadding",children:[(0,S.jsxs)("div",{className:"flex gap-[1rem] items-center",children:[(0,S.jsx)("span",{className:"linktoback",onClick:function(){return y(-1)},children:(0,S.jsx)(x.dUf,{})}),(0,S.jsx)(s.Z,{onClick:function(){if((null===W||void 0===W?void 0:W.length)>0){var e=(0,f.map)(W,(function(e,t){var i,a,r,l,o,c,u,s,d;return{nth:t+1,Category_code:(null===e||void 0===e||null===(i=e.category)||void 0===i?void 0:i.code)||"",Product_code:(null===e||void 0===e||null===(a=e.productdata)||void 0===a?void 0:a.code)||"",Product_name:(null===e||void 0===e||null===(r=e.productdata)||void 0===r?void 0:r.name)||"",Product_number:(null===e||void 0===e?void 0:e.pieces)||"",incomingprice:"UZS"===n?(Math.round(1*(null===e||void 0===e||null===(l=e.price)||void 0===l?void 0:l.incomingpriceuzs))/1).toLocaleString("ru-RU"):(Math.round(1e3*(null===e||void 0===e||null===(o=e.price)||void 0===o?void 0:o.incomingprice))/1e3).toLocaleString("ru-RU"),allIncomingPrice:"UZS"===n?Math.round((null===e||void 0===e||null===(c=e.price)||void 0===c?void 0:c.incomingpriceuzs)+(null===e||void 0===e||null===(u=e.price)||void 0===u?void 0:u.sellingpriceuzs)).toLocaleString("ru-RU"):Math.round((null===e||void 0===e||null===(s=e.price)||void 0===s?void 0:s.incomingprice)+(null===e||void 0===e||null===(d=e.price)||void 0===d?void 0:d.sellingprice)).toLocaleString("ru-RU")}}));(0,p.rD)(e,"Barcha almashinilgan maxsulotlar",["\u2116","Kategoriyasi","Kodi","Maxsulot Nomi","Maxsulot Soni","Kelgan Narxi UZS","Jami Summasi UZS"])}else(0,h.Ug)("Jadvalda ma'lumot mavjud emas !","warning")}})]}),(0,S.jsx)("p",{className:"supplier-title",children:"Barcha tovarlar ro'yxati"}),(0,S.jsx)("div",{children:(0!==Q||0!==N)&&(0,S.jsx)(d.Z,{countPage:Number(A),totalDatas:N||Q,setCurrentPage:z,currentPage:M})})]}),(0,S.jsx)(u.Z,{filterBy:["total","category","code","name"],filterByTotal:function(e){var t=e.value;T(t),z(0)},searchByCategory:Y,filterByCategory:function(e){var t=e.target.value,n=t.replace(/\s+/g," ").trim();if(G(t),(_.length>0||N>0)&&P((0,o.Hi)()),""===n)q(C),V(E);else{var i=(0,f.filter)(C,(function(e){var t;return null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.code.includes(n)}));q(i),V(i.length)}},searchByCode:ne,filterByCode:function(e){var t=e.target.value,n=t.replace(/\s+/g," ").trim();if(ie(t),(_.length>0||N>0)&&P((0,o.Hi)()),""===n)q(C),V(E);else{var i=(0,f.filter)(C,(function(e){var t;return null===e||void 0===e||null===(t=e.productdata)||void 0===t?void 0:t.code.includes(n)}));q(i),V(i.length)}},searchByName:le,filterByName:function(e){var t=e.target.value,n=t.replace(/\s+/g," ").trim();if(oe(t),(_.length>0||N>0)&&P((0,o.Hi)()),""===n)q(C),V(E);else{var i=(0,f.filter)(C,(function(e){var t;return null===e||void 0===e||null===(t=e.productdata)||void 0===t?void 0:t.name.toLowerCase().includes(n)}));q(i),V(i.length)}},filterByCodeAndNameAndCategoryWhenPressEnter:function(e){if("Enter"===e.key){z(0);var t={currentPage:M,countPage:A,search:{codeofproduct:ne.replace(/\s+/g," ").trim(),nameofproduct:le.replace(/\s+/g," ").trim(),categoryofproduct:Y.replace(/\s+/g," ").trim()}};P((0,o.fc)(t))}}}),(0,S.jsx)("div",{className:"pl-[2.5rem] pr-[1.25rem] pb-[1.25rem]",children:D?(0,S.jsx)(m.Z,{}):0===W.length?(0,S.jsx)(v.Z,{text:"Tovarlar mavjud emas"}):(0,S.jsx)(r.Z,{data:W,page:"filialShopDataId",currentPage:M,countPage:A,headers:[{styles:"w-[10%] text-start",title:"\u2116"},{styles:"w-[10%] text-start",filter:"category.code",title:"Kategoriyasi"},{styles:"w-[10%] text-start",filter:"productdata.code",title:"Kodi"},{styles:"text-start",title:"Maxsulot nomi"},{styles:"text-start",filter:"pieces",title:"Maxsulot soni"},{styles:"text-start",title:"Kelgan narxi"},{styles:"text-start",title:"Jami summasi"}],currency:n})})]},"content")}},2432:function(e,t,n){n.r(t);var i=n(3433),a=n(1413),r=n(9439),l=n(2791),o=n(2543),c=n(5077),u=n(9078),s=n(2987),d=n(9434),f=n(4232),v=n(1295),m=n(6408),g=n(3160),p=n(6096),h=n(2230),x=n(3168),S=n(763),y=n(7584),Z=n(2106),j=n(5668),P=n(9732),k=n(184);t.default=function(e){var t=e.id,n=(0,x.$)(["common"]).t,C=[{title:"\u2116"},{title:n("Sana"),filter:"createdAt"},{title:n("ID"),filter:"id"},{title:n("Mijoz")},{title:n("Jami")},{title:n("Qarz")},{title:n("Qarz USD")},{title:n("Izoh")},{title:"",styles:"w-[7rem]"}],D=(0,d.I0)(),E=(0,d.v9)((function(e){return e.currency})).currencyType,N=(0,d.v9)((function(e){return e.login})),b=N.user,I=N.market,w=(0,d.v9)((function(e){return e.sellings})),_=w.sellings,U=w.searchedSellings,B=w.getSellingsLoading,O=w.total,M=w.totalSearched,z=(0,l.useState)(""),L=(0,r.Z)(z,2),R=L[0],A=L[1],T=(0,l.useState)(_),J=(0,r.Z)(T,2),F=J[0],W=J[1],q=(0,l.useState)(_),K=(0,r.Z)(q,2),H=K[0],Q=K[1],V=(0,l.useState)(O),$=(0,r.Z)(V,2),X=$[0],Y=$[1],G=(0,l.useState)(U),ee=(0,r.Z)(G,2),te=ee[0],ne=ee[1],ie=(0,l.useState)("10"),ae=(0,r.Z)(ie,2),re=ae[0],le=ae[1],oe=(0,l.useState)(0),ce=(0,r.Z)(oe,2),ue=ce[0],se=ce[1],de=(0,l.useState)({id:"",client:"",product:""}),fe=(0,r.Z)(de,2),ve=fe[0],me=fe[1],ge=(0,l.useState)({filter:"",sort:"",count:0}),pe=(0,r.Z)(ge,2),he=pe[0],xe=pe[1],Se=(0,l.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),ye=(0,r.Z)(Se,2),Ze=ye[0],je=ye[1],Pe=(0,l.useState)(new Date),ke=(0,r.Z)(Pe,2),Ce=ke[0],De=ke[1],Ee=(0,l.useState)(null),Ne=(0,r.Z)(Ee,2),be=Ne[0],Ie=Ne[1],we=(0,l.useState)(!1),_e=(0,r.Z)(we,2),Ue=_e[0],Be=_e[1],Oe=(0,l.useState)(null),Me=(0,r.Z)(Oe,2),ze=Me[0],Le=Me[1],Re=(0,l.useState)([]),Ae=(0,r.Z)(Re,2),Te=Ae[0],Je=Ae[1],Fe=(0,l.useState)(""),We=(0,r.Z)(Fe,2),qe=We[0],Ke=We[1],He=function(e){if("Enter"===e.key){se(0);var n={filialId:t,currentPage:ue,countPage:re,startDate:Ze.toISOString(),endDate:Ce.toISOString(),search:ve};D((0,g.Vi)(n))}},Qe=(0,l.useState)(""),Ve=(0,r.Z)(Qe,2),$e=Ve[0],Xe=Ve[1],Ye=(0,l.useState)(null),Ge=(0,r.Z)(Ye,2),et=Ge[0],tt=Ge[1];(0,l.useEffect)((function(){W(_),Q(_)}),[_]),(0,l.useEffect)((function(){ne(U)}),[U]),(0,l.useEffect)((function(){Y(O)}),[O]),(0,l.useEffect)((function(){var e={filialId:t,currentPage:ue,countPage:re,startDate:Ze.toISOString(),endDate:Ce.toISOString(),search:{id:"",client:""}};D((0,g.gq)(e))}),[ue,re,Ze,Ce,D,t]),(0,l.useEffect)((function(){var e={startDate:Ze,endDate:Ce,search:ve};D((0,g.W2)(e))}),[D,Ze,Ce,ve]);(0,l.useEffect)((function(){var e=[],t=[{label:"Xammasi",value:""}];I&&j.Z.emit("getProductsOfCount",{market:I._id}),I&&j.Z.on("getProductsOfCount",(function(n){var a=n.id,r=n.products;a===I._id&&(t=[].concat((0,i.Z)(t),(0,i.Z)((0,S.map)(r,(function(e){return{value:e._id,label:e.productdata.name}})))),Je(t),e.push.apply(e,(0,i.Z)(r)),D((0,P.r5)(e)))})),I&&j.Z.on("error",(function(e){var t=e.id,n=e.message;t===I._id&&(0,Z.Ug)(n,"error")}))}),[I,D]);return(0,k.jsxs)(m.E.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,k.jsx)(h.Z,{printedSelling:be,currency:E,body:R,isOpen:Ue,toggleModal:function(){Be(!Ue),Ie(null);var e={filialId:t,currentPage:ue,countPage:re,startDate:Ze.toISOString(),endDate:Ce.toISOString(),search:{id:"",client:"",product:null===qe||void 0===qe?void 0:qe.label}};D((0,g.gq)(e))},approveFunction:function(e){D((0,g.ZF)((0,a.Z)((0,a.Z)({},e),{},{saleconnectorid:ze}))).then((function(){var e={filialId:t,currentPage:ue,countPage:re,startDate:Ze.toISOString(),endDate:Ce.toISOString(),search:{id:"",client:""}};D((0,g.gq)(e))})),Be(!1)},commentText:$e,dailyid:et}),(0,k.jsxs)("div",{className:"pagination mainPadding",children:[(0,k.jsx)(o.Z,{onClick:function(){var e="Sotuvlar"-(new Date).toLocaleDateString(),t=["\u2116",n("ID"),n("Mijoz"),n("Jami UZS"),n("Jami USD"),n("Chegirma UZS"),n("Chegirma USD"),n("Qarz UZS"),n("Qarz USD")];if((null===F||void 0===F?void 0:F.length)>0){var i=(0,S.map)(F,(function(e,t){var n,i,a,r,l,o;return{nth:t+1,id:(null===e||void 0===e?void 0:e.id)||"",client:(null===e||void 0===e||null===(n=e.client)||void 0===n?void 0:n.name)||(null===e||void 0===e||null===(i=e.packman)||void 0===i?void 0:i.name),alluzs:(null===e||void 0===e||null===(a=e.products[0])||void 0===a?void 0:a.totalpriceuzs)||"",allusd:(null===e||void 0===e||null===(r=e.products[0])||void 0===r?void 0:r.totalprice)||"",discount:e.discounts.length>0?e.discounts.map((function(e){return e})):0,discountusd:e.discounts.length>0?e.discounts.map((function(e){return e})):0,debd:(null===e||void 0===e||null===(l=e.products[0])||void 0===l?void 0:l.totalpriceuzs)-(null===e||void 0===e||null===(o=e.payments[0])||void 0===o?void 0:o.paymentuzs)-(null===e||void 0===e?void 0:e.discounts.length)>0?e.discounts.map((function(e){return e.discount})):0,debdusd:e.products[0].totalprice-e.payments[0].payment-e.discounts.length>0?e.discounts.map((function(e){return e.discount})):0}}));(0,y.rD)(i,e,t)}else(0,Z.Ug)("Jadvalda ma'lumot mavjud emas !","warning")}}),(0,k.jsx)("p",{className:"flex items-center",children:n("Sotuvlar")}),(0!==X||0!==M)&&(0,k.jsx)(c.Z,{countPage:Number(re),totalDatas:M||X,currentPage:ue,setCurrentPage:se})]}),(0,k.jsx)(s.Z,{filterBy:["total","startDate","endDate","id","clientName","product_name"],filterByTotal:function(e){var t=e.value;le(t),se(0)},startDate:Ze,setStartDate:je,endDate:Ce,setEndDate:De,searchById:ve.id,searchByClientName:ve.client,filterByClientName:function(e){var t=e.target.value,n=t.toLowerCase().replace(/\s+/g," ").trim();if(me((0,a.Z)((0,a.Z)({},ve),{},{client:t})),(te.length>0||M>0)&&D((0,g.Vt)()),""===n)W(_),Y(O);else{var i=(0,S.filter)(_,(function(e){var t,i;return(null===e||void 0===e||null===(t=e.client)||void 0===t?void 0:t.name.toLowerCase().includes(n))||(null===e||void 0===e||null===(i=e.packman)||void 0===i?void 0:i.name.toLowerCase().includes(n))}));W(i),Y(i.length)}},filterById:function(e){var t=e.target.value,n=t.replace(/\s+/g," ").trim();if(p.y.test(t)&&me((0,a.Z)((0,a.Z)({},ve),{},{id:t})),(te.length>0||M>0)&&D((0,g.Vt)()),""===n)W(_),Y(O);else{var i=(0,S.filter)(_,(function(e){return e.id.includes(n)}));W(i),Y(i.length)}},filterByClientNameWhenPressEnter:He,filterByIdWhenPressEnter:He,filteredProducts:Te,handleChangeSelectedProduct:function(e){Ke(e);var n={filialId:t,currentPage:ue,countPage:re,startDate:Ze.toISOString(),endDate:Ce.toISOString(),search:{id:"",client:"",product:e.label}};D((0,g.Vi)(n))},selectedProduct:qe}),(0,k.jsx)("div",{className:"tableContainerPadding",children:B?(0,k.jsx)(f.Z,{}):0===F.length&&0===te.length?(0,k.jsx)(v.Z,{text:"Ro'yxat mavjud emas..."}):(0,k.jsx)(u.Z,{data:te.length>0?te:F,currentPage:ue,currency:E,countPage:re,page:"saleslist",headers:C,Print:function(e){A("allChecks"),Ie(e),Be(!0)},addPlus:function(e){A("addPlus"),Be(!0),Le(e)},Sort:function(e){if(e===he.filter)switch(he.count){case 1:xe({filter:e,sort:"1",count:2}),(0,y.ki)(F,W,e,1,H);break;case 2:xe({filter:e,sort:"",count:0}),(0,y.ki)(F,W,e,"",H);break;default:xe({filter:e,sort:"-1",count:1}),(0,y.ki)(F,W,e,-1,H)}else xe({filter:e,sort:"-1",count:1}),(0,y.ki)(F,W,e,-1,H)},sortItem:he,sellers:"Seller"===(null===b||void 0===b?void 0:b.type),editComment:function(e,t){Xe(t),tt(e._id),A("changeComment"),Be(!0)}})})]},"content")}}}]);
//# sourceMappingURL=8259.2d4b626f.chunk.js.map